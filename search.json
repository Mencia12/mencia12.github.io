[{"title":"Hexo|ç”¨Hexoå†™åšå®¢","url":"/2019/05/19/Hexo%E5%91%BD%E4%BB%A4/","content":"ç®€å•æ€»ç»“ä½¿ç”¨çš„hexoå‘½ä»¤\nHexoæ›´æ–°1ã€å…¨å±€å‡çº§hexo-cliï¼Œå…ˆhexo versionæŸ¥çœ‹å½“å‰ç‰ˆæœ¬ï¼Œç„¶ånpm i hexo-cli -gï¼Œå†æ¬¡hexo versionæŸ¥çœ‹æ˜¯å¦å‡çº§æˆåŠŸã€‚2ã€ä½¿ç”¨npm install -g npm-checkå’Œnpm-checkï¼Œæ£€æŸ¥ç³»ç»Ÿä¸­çš„æ’ä»¶æ˜¯å¦æœ‰å‡çº§çš„ï¼Œå¯ä»¥çœ‹åˆ°è‡ªå·±å‰é¢éƒ½å®‰è£…äº†é‚£äº›æ’ä»¶3ã€ä½¿ç”¨npm install -g npm-upgradeå’Œnpm-upgradeï¼Œå‡çº§ç³»ç»Ÿä¸­çš„æ’ä»¶4ã€ä½¿ç”¨npm update -gå’Œnpm update --save\néƒ¨ç½²ç½‘ç«™hexo clean #æ¸…é™¤ç¼“å­˜ ç½‘é¡µæ­£å¸¸æƒ…å†µä¸‹å¯ä»¥å¿½ç•¥æ­¤æ¡å‘½ä»¤hexo g #ç”Ÿæˆé™æ€ç½‘é¡µhexo d #å¼€å§‹éƒ¨ç½²\nåˆ›å»ºæ–°æ–‡ç« hexo n title\nå±è”½æ–‡ç« åœ¨ä½ ä¸å¸Œæœ›æ¸²æŸ“çš„mdæ–‡ç« æ–‡ä»¶å‰åŠ ä¸Šä¸€ä¸ªä¸‹åˆ’çº¿&quot;_&quot;å³å¯\næœåŠ¡å™¨hexo server #Hexoä¼šç›‘è§†æ–‡ä»¶å˜åŠ¨å¹¶è‡ªåŠ¨æ›´æ–°ï¼Œæ‚¨æ— é¡»é‡å¯æœåŠ¡å™¨ã€‚hexo server -s #é™æ€æ¨¡å¼hexo server -p 5000 #æ›´æ”¹ç«¯å£hexo server -i 192.168.1.1 #è‡ªå®šä¹‰ IP\næ’ä»¶npm install hexo-neat --save-dev #ä¼˜åŒ–åŠ é€Ÿnpm install hexo-asset-image --save #æ·»åŠ æœ¬åœ°å›¾åº“npm install hexo-generator-searchdb --save #é…ç½®æœ¬åœ°æœç´¢npm install hexo-generator-index-pin-top --save #æ–‡ç« ç½®é¡¶\næ·»åŠ å¯åˆ‡æ¢çš„æš—é»‘æ¨¡å¼å®‰è£… hexo-next-darkmode æ’ä»¶\nnpm install hexo-next-darkmode --save\nåœ¨ Next ä¸»é¢˜çš„ _config.yml é…ç½®æ–‡ä»¶é‡Œæ·»åŠ ä»¥ä¸‹å†…å®¹\n# Darkmode JS# For more information: https://github.com/rqh656418510/hexo-next-darkmode, https://github.com/sandoche/Darkmode.jsdarkmode_js:  enable: true  bottom: &#x27;32px&#x27; # default: &#x27;32px&#x27;  right: &#x27;unset&#x27; # default: &#x27;32px&#x27;  left: &#x27;32px&#x27; # default: &#x27;unset&#x27;  time: &#x27;0.5s&#x27; # default: &#x27;0.3s&#x27;  mixColor: &#x27;transparent&#x27; # default: &#x27;#fff&#x27;  backgroundColor: &#x27;transparent&#x27; # default: &#x27;#fff&#x27;  buttonColorDark: &#x27;#100f2c&#x27; # default: &#x27;#100f2c&#x27;  buttonColorLight: &#x27;#fff&#x27; # default: &#x27;#fff&#x27;  isActivated: false # default false  saveInCookies: true # default: true  label: &#x27;ğŸŒ“&#x27; # default: &#x27;&#x27;  autoMatchOsTheme: true # default: true  libUrl: # Set custom library cdn url for Darkmode.js\n\nisActivated: trueï¼šé»˜è®¤æ¿€æ´»æš—é»‘ / å¤œé—´æ¨¡å¼ï¼Œè¯·å§‹ç»ˆä¸ saveInCookies: falseã€autoMatchOsTheme: false ä¸€èµ·ä½¿ç”¨ï¼›\nåŒæ—¶éœ€è¦åœ¨ NexT ä¸»é¢˜çš„ _config.yml é…ç½®æ–‡ä»¶é‡Œè®¾ç½® pjax: trueï¼Œå³å¯ç”¨ Pjaxã€‚\nç¡®ä¿åœ¨ Next çš„ _config.yml é…ç½®æ–‡ä»¶ä¸­çš„ darkmode é€‰é¡¹è®¾ç½®ä¸º falseï¼Œ\n\nè§£å†³æ— æ³•æ˜¾ç¤ºæ•°å­¦å…¬å¼ç¬¬ä¸€æ­¥ï¼šæ›´æ¢æ¸²æŸ“å¼•æ“\nnpm uninstall hexo-renderer-markednpm install hexo-renderer-kramed\nç¬¬äºŒæ­¥ï¼šå¼€å¯ NexT ä¸»é¢˜çš„ MathJax æ”¯æŒ\næ‰“å¼€ ä¸»é¢˜é…ç½®æ–‡ä»¶ _config.next.ymlï¼ˆæ³¨æ„ä¸æ˜¯åšå®¢æ ¹ç›®å½•çš„é‚£ä¸ªï¼‰ï¼Œæœç´¢ mathï¼Œä¿®æ”¹å¦‚ä¸‹é…ç½®ï¼š\nmath:  # Default (false) will load mathjax / katex script on demand.  # That is it only render those page which has `mathjax: true` in front-matter.  # If you set it to true, it will load mathjax / katex script EVERY PAGE.  every_page: true  mathjax:    enable: true    # Available values: none | ams | all    tags: all  katex:    enable: false    # See: https://github.com/KaTeX/KaTeX/tree/master/contrib/copy-tex    copy_tex: false\nç¬¬ä¸‰æ­¥ï¼šåœ¨æ–‡ç« ä¸­å¯ç”¨å…¬å¼ä¸ºäº†é˜²æ­¢ç½‘ç«™åŠ è½½è¿‡æ…¢ï¼ŒNexT é»˜è®¤ä¸ä¼šåœ¨æ‰€æœ‰é¡µé¢åŠ è½½å·¨å¤§çš„æ•°å­¦å…¬å¼åº“ã€‚ ä½ éœ€è¦åœ¨é‚£ç¯‡åŒ…å«æ•°å­¦å…¬å¼çš„æ–‡ç« é¡¶éƒ¨ï¼ˆFront-matterï¼‰ï¼Œæ‰‹åŠ¨åŠ ä¸Š mathjax: trueã€‚\nç¤ºä¾‹ï¼š---title: ç®—æ³•å¤æ‚åº¦åˆ†ædate: 2025-12-22 17:00:00tags: [Algorithm, Math]mathjax: true  &lt;-- åŠ ä¸Šè¿™ä¸€è¡Œ---è¿™é‡Œæ˜¯æ­£æ–‡...$$T(n)=2T(\\sqrt&#123;n&#125;)+ \\log n$$\nGithubå¤‡ä»½åšå®¢æºæ–‡ä»¶åœ¨githubåšå®¢ä»“åº“ä¸‹æ–°å»ºä¸€ä¸ªåˆ†æ”¯hexoï¼Œç„¶ågit cloneåˆ°æœ¬åœ°ï¼ŒæŠŠ.gitæ–‡ä»¶å¤¹æ‹¿å‡ºæ¥ï¼Œæ”¾åœ¨åšå®¢æ ¹ç›®å½•ä¸‹\ngit checkout hexo #åˆ‡æ¢åˆ°hexoåˆ†æ”¯git add . #æ·»åŠ å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶åˆ°æš‚å­˜åŒºgit commit -m &quot;xxx&quot; #æ³¨é‡Šgit push #æäº¤\nåŒæ­¥git pull #åŒæ­¥\nMarkdownè¡¨æƒ…https://www.jianshu.com/p/0520359a18d5\nç¬¦å·&amp;å…¬å¼https://blog.csdn.net/gsww404/article/details/78684278https://www.jianshu.com/p/16fbd768bfe7\n","tags":["Hexo"]},{"title":"kindleä¹¦ç±æ’ç‰ˆ","url":"/2025/12/23/kindle/","content":"æ›´æ–°ä¸€äº›ç”¨äºAZW3æ ¼å¼çš„æ’ç‰ˆ\nå­—ä½“é€šç”¨/* å­—ä½“ */@page &#123;  margin-bottom: 5pt;  margin-top: 5pt;&#125;@font-face &#123;  font-family: &quot;&quot;;  src: url(&quot;..&quot;);&#125;@font-face &#123;  font-family: &quot;&quot;;  src: url(&quot;..&quot;);&#125;\nä¸ªäººä¸“ç”¨/* å­—ä½“ */@page &#123;  margin-bottom: 5pt;  margin-top: 5pt;&#125;@font-face &#123;  font-family: &quot;fzlt&quot;;  src: url(&quot;../fzltZH.ttf&quot;);&#125;@font-face &#123;  font-family: &quot;syst&quot;;  src: url(&quot;../systB.ttf&quot;);&#125;\nå¸¸ç”¨å­—ä½“æ ‡é¢˜ï¼šsystB.ttfï¼ŒfzltZH.ttf\næ­£æ–‡ï¼šhysf65W.ttfï¼ˆæ¯”è¾ƒç²—çš„ä»¿å®‹ï¼‰ï¼ŒfzyST.ttf\nç”Ÿåƒ»å­—ï¼šbsh.ttf\næ’ç‰ˆæ ¼å¼åŸºæœ¬æ ¼å¼/* æ–‡æœ¬ */.hd &#123;  display: block;  line-height: 1.4;&#125;.txt &#123;  display: block;  line-height: 1.4;  text-align: justify;  text-indent: 2em;&#125;.txtc &#123;  display: block;  font-family: STKai, serif;  line-height: 1.4;  text-align: justify;&#125;/* ç« æ ‡é¢˜ */.chapter-sequence-number &#123;  font-family: &quot;fzlt&quot;;  font-size: 1rem;  padding: 2px 4px;&#125;.chapter-title &#123;  display: block;  font-family: &quot;syst&quot;;  font-size: 1.2em;  line-height: 1.4;  text-align: center;&#125;.chapter-subtitle &#123;  font-size: 0.7em;&#125;.hd1 &#123;  display: block;&#125;/* å·æ ‡é¢˜ æ¨ªæ’ */.volume-title &#123;  display: block;  font-family: &quot;DK-KAITI&quot;, &quot;æ¥·ä½“&quot;, &quot;æ–¹æ­£æ¥·ä½“_GBK&quot;, &quot;KaiTi&quot;, &quot;STKaiti&quot;, &quot;STKai&quot;, &quot;kt&quot;, serif;  font-size: 1.3em;  line-height: 1.4;  text-align: center;  margin: 30% auto;&#125;.volume-subtitle &#123;  display: block;  font-family: &quot;syst&quot;;  text-align: center;&#125;.hd1 &#123;  display: block;&#125;\n/* å·æ ‡é¢˜ä¸‹æ–¹æœ‰å­—å¯ç”¨ */.vtxt &#123;  display: block;  font-family: &quot;DK-KAITI&quot;, &quot;æ¥·ä½“&quot;, &quot;æ–¹æ­£æ¥·ä½“_GBK&quot;, &quot;KaiTi&quot;, &quot;STKaiti&quot;, &quot;STKai&quot;, &quot;kt&quot;, serif;  line-height: 1.4;  text-align: justify;  text-indent: 2em;  margin-top: -20%;  padding-top: 0;  max-width: 60%;  margin-left: auto;  margin-right: auto;&#125;\n/* å·æ ‡é¢˜ ç«–æ’ */.head &#123;  display: block;  line-height: 1.4;  text-align: center;  width: 1.4em;  margin: 25% auto;&#125;.head1 &#123;  display: block;  font-family: &quot;STKai&quot;, &quot;DK-FANGSONG&quot;, &quot;æ–¹æ­£ä»¿å®‹_GBK&quot;, &quot;kt&quot;, serif;  font-size: 1.4em;  font-weight: bold;  line-height: 1.4;  text-align: center;&#125;.head2 &#123;  display: block;  font-family: &quot;STKai&quot;, &quot;DK-FANGSONG&quot;, &quot;æ–¹æ­£ä»¿å®‹_GBK&quot;, &quot;kt&quot;, serif;  font-size: 1.4em;  font-weight: bold;  line-height: 1.4;  text-align: center;&#125;\nå°é¢å›¾/* å°é¢å›¾ */.pic &#123;  height: auto;  line-height: 1.4;  width: auto;&#125;.cover &#123;  display: block;  line-height: 1.4;  margin-bottom: 1em;  margin-top: 1em;  text-align: center;  width: 100%;&#125;\næ³¨é‡Š/* æ³¨é‡Š */.zhusi &#123;  display: block;  font-family: &quot;DK-KAITI&quot;, &quot;æ¥·ä½“&quot;, &quot;æ–¹æ­£æ¥·ä½“_GBK&quot;, &quot;KaiTi&quot;, &quot;STKaiti&quot;, &quot;STKai&quot;, &quot;kt&quot;, serif;  font-size: 1em;  line-height: 1.5;  text-indent: 2em;&#125;.fenge &#123;  color: gray;  display: block;  height: 2px;  line-height: 1.4;  margin: 0.5em auto;  border: currentColor inset 1px;&#125;.math-super &#123;  font-family: &quot;DK-KAITI&quot;, &quot;æ¥·ä½“&quot;, &quot;æ–¹æ­£æ¥·ä½“_GBK&quot;, &quot;KaiTi&quot;, &quot;STKaiti&quot;, &quot;STKai&quot;, &quot;kt&quot;, serif;  font-size: 0.75em;  vertical-align: super;&#125;.zs &#123;  line-height: 1.4;  text-decoration: none;&#125;\nåˆ†å‰²çº¿/* åˆ†å‰²çº¿ */.fg &#123;  text-align: center;  margin: 2em 0 2em;&#125;\n&lt;p class=&quot;fg&quot;&gt;â”€â”€â”€â”€â”€â”€ Â· âœ¦ Â· â”€â”€â”€â”€â”€â”€&lt;/p&gt;\næ­£åˆ™æ›¿æ¢ç« èŠ‚å&lt;h2 class=&quot;chapter-title&quot;&gt;&lt;span class=&quot;chapter-sequence-number&quot;&gt;\\1&lt;/span&gt;&lt;br class=&quot;hd1&quot;/&gt; \\2&lt;span class=&quot;chapter-subtitle&quot;&gt;ï¼ˆ\\3ï¼‰&lt;/span&gt;&lt;/h2&gt;\n&lt;h2 class=&quot;chapter-title&quot;&gt;&lt;span class=&quot;chapter-sequence-number&quot;&gt;\\1&lt;/span&gt;&lt;br class=&quot;hd1&quot;/&gt; \\2&lt;/h2&gt;\n&lt;h2 class=&quot;chapter-title&quot;&gt;\nå·åæ¨ªæ’&lt;h1 id=&quot;title&quot; class=&quot;volume-title&quot;&gt;\\1&lt;br class=&quot;hd1&quot;/&gt;&lt;span class=&quot;volume-subtitle&quot;&gt; \\2&lt;/span&gt;&lt;/h1&gt;\nç«–æ’&lt;div class=&quot;head&quot;&gt;  &lt;h1 class=&quot;head1&quot; title=&quot;\\1 \\2&quot;&gt;\\1&lt;/h1&gt;  &lt;p class=&quot;head2&quot;&gt;\\2&lt;/p&gt;&lt;/div&gt;\næ³¨é‡Šåˆ†éš”çº¿\n&lt;hr class=&quot;fenge&quot;/&gt;\nå­—ä¸Šæ ‡å·\n&lt;sup class=&quot;math-super&quot;&gt;&lt;a class=&quot;zs&quot; href=&quot;\\1.html#m\\2&quot; id=&quot;w\\2&quot;&gt;\\2&lt;/a&gt;&lt;/sup&gt;\næ³¨é‡Šæ ‡å·\n&lt;p class=&quot;zhusi&quot;&gt;&lt;a href=&quot;\\1.html#w\\2&quot; id=&quot;m\\2&quot;&gt;[\\2]&lt;/a&gt;\nå°é¢&lt;div class=&quot;cover&quot;&gt;\t&lt;img alt=&quot;&quot; class=&quot;pic&quot; src=&quot;../images/\\2.jpeg&quot;/&gt;&lt;/div&gt;\né»˜è®¤å­—ä½“å®‹ä½“    STSongfont-family: STSong, serif;\né»‘ä½“    STHeitifont-family: STHeiti, san-serif;\næ¥·ä½“    STKaifont-family: STKai, serif;\nåœ†ä½“    STYuanfont-family: STYuan, san-serif;\nEasyPubæŸ¥æ‰¾è§„åˆ™&lt;body class=&quot;calibre1&quot;&gt;|&lt;p class=&quot;a&quot;&gt;ã€€ã€€|&lt;h2 id=&quot;title&quot; class=&quot;titletoc&quot;&gt;.*?&lt;/h2&gt;|&lt;h2 id=&quot;title&quot; class=&quot;titlel2single&quot;&gt;.*?&lt;/h2&gt;\næ­£åˆ™æ›¿æ¢å‡½æ•°import redef replace(match, number, file_name, metadata, dictionaries, data, functions, *args, **kwargs):    text = match.group(0)    # &lt;body class=&quot;calibre1&quot;&gt; â†’ &lt;body class=&quot;hd&quot;&gt;    if &#x27;&lt;body class=&quot;calibre1&quot;&gt;&#x27; in text:        return &#x27;&lt;body class=&quot;hd&quot;&gt;&#x27;    # &lt;p class=&quot;a&quot;&gt;ã€€ã€€ â†’ &lt;p class=&quot;txt&quot;&gt;    if re.search(r&#x27;&lt;p class=&quot;a&quot;&gt;ã€€ã€€&#x27;, text):        return re.sub(r&#x27;&lt;p class=&quot;a&quot;&gt;ã€€ã€€&#x27;, &#x27;&lt;p class=&quot;txt&quot;&gt;&#x27;, text)    # &lt;h2 id=&quot;title&quot; class=&quot;titletoc&quot;&gt;Xï¼ˆYï¼‰&lt;/h2&gt;  â†’  æœ‰ä¸‰æ®µç»“æ„ï¼ˆç« èŠ‚å· æ ‡é¢˜ ï¼ˆå‰¯æ ‡é¢˜ï¼‰ï¼‰    if re.search(r&#x27;&lt;h2 id=&quot;title&quot; class=&quot;titletoc&quot;&gt;(.*?) (.*?)ï¼ˆ(.*?)ï¼‰&lt;/h2&gt;&#x27;, text):        return re.sub(            r&#x27;&lt;h2 id=&quot;title&quot; class=&quot;titletoc&quot;&gt;(.*?) (.*?)ï¼ˆ(.*?)ï¼‰&lt;/h2&gt;&#x27;,            (                &#x27;&lt;h2 class=&quot;chapter-title&quot;&gt;\\n&#x27;                &#x27;&lt;span class=&quot;chapter-sequence-number&quot;&gt;\\\\1&lt;/span&gt;\\n&#x27;                &#x27;&lt;br  class=&quot;hd1&quot;/&gt; \\\\2\\n&#x27;                &#x27;&lt;span class=&quot;chapter-subtitle&quot;&gt;ï¼ˆ\\\\3ï¼‰&lt;/span&gt;&lt;/h2&gt;&#x27;            ),            text        )    # &lt;h2 id=&quot;title&quot; class=&quot;titletoc&quot;&gt;X Y&lt;/h2&gt; â†’ ä¸¤æ®µç»“æ„ï¼ˆç« èŠ‚å· æ ‡é¢˜ï¼‰    if re.search(r&#x27;&lt;h2 id=&quot;title&quot; class=&quot;titletoc&quot;&gt;(.*?) (.*?)&lt;/h2&gt;&#x27;, text):        return re.sub(            r&#x27;&lt;h2 id=&quot;title&quot; class=&quot;titletoc&quot;&gt;(.*?) (.*?)&lt;/h2&gt;&#x27;,            (                &#x27;&lt;h2 class=&quot;chapter-title&quot;&gt;\\n&#x27;                &#x27;&lt;span class=&quot;chapter-sequence-number&quot;&gt;\\\\1&lt;/span&gt;\\n&#x27;                &#x27;&lt;br  class=&quot;hd1&quot;/&gt; \\\\2&lt;/h2&gt;&#x27;            ),            text        )    # &lt;h2 id=&quot;title&quot; class=&quot;titletoc&quot;&gt;X&lt;/h2&gt; â†’ å•ç‹¬æ ‡é¢˜    if re.search(r&#x27;&lt;h2 id=&quot;title&quot; class=&quot;titletoc&quot;&gt;(.*?)&lt;/h2&gt;&#x27;, text):        return re.sub(            r&#x27;&lt;h2 id=&quot;title&quot; class=&quot;titletoc&quot;&gt;(.*?)&lt;/h2&gt;&#x27;,            r&#x27;&lt;h2 class=&quot;chapter-title&quot;&gt;\\1&lt;/h2&gt;&#x27;,            text        )    # &lt;h2 id=&quot;title&quot; class=&quot;titlel2single&quot;&gt;X Y&lt;/h2&gt; â†’ &lt;h1&gt; å·æ ‡é¢˜ç»“æ„    if re.search(r&#x27;&lt;h2 id=&quot;title&quot; class=&quot;titlel2single&quot;&gt;(.*?) (.*?)&lt;/h2&gt;&#x27;, text):        return re.sub(            r&#x27;&lt;h2 id=&quot;title&quot; class=&quot;titlel2single&quot;&gt;(.*?) (.*?)&lt;/h2&gt;&#x27;,            (                &#x27;&lt;h1 id=&quot;title&quot; class=&quot;volume-title&quot;&gt;\\\\1&lt;br class=&quot;hd1&quot;/&gt;\\n&#x27;                &#x27;&lt;span class=&quot;volume-subtitle&quot;&gt; \\\\2&lt;/span&gt;&lt;/h1&gt;&#x27;            ),            text        )    # æœªåŒ¹é…åˆ™è¿”å›åŸæ–‡    return text\nazw3è½¬epubè½¬æ¢åä¿®æ”¹hd1\n.hd1 &#123;  display: block;  margin: 0.1em auto;&#125;\né˜¿è’™è¯»ä¹¦æŸ¥æ‰¾è§„åˆ™(?s).*\næ­£åˆ™æ›¿æ¢å‡½æ•°import redef replace(match, number, file_name, metadata, dictionaries, data, functions, *args, **kwargs):    text = match.group(0)    remove_patterns = [        r&#x27;&lt;div id=&quot;book-columns&quot; class=&quot;calibre1&quot;&gt;&#x27;,        r&#x27;&lt;div id=&quot;book-inner&quot; class=&quot;calibre1&quot;&gt;&#x27;,        r&#x27;&lt;span id=&quot;kobo\\.\\d+\\.\\d+&quot;&gt;&#x27;,        r&#x27;&lt;img[^&gt;]+src=&quot;\\.\\./images/\\d+\\.png&quot;[^&gt;]*/?&gt;\\s*&lt;/span&gt;\\s*&lt;br[^&gt;]*&gt;&#x27;,    ]    for p in remove_patterns:        text = re.sub(p, &#x27;&#x27;, text, flags=re.DOTALL)    text = re.sub(        r&#x27;&lt;div\\s+class=&quot;calibre1&quot;&gt;\\s*&lt;hr\\s+class=&quot;xian&quot;\\s*/&gt;\\s*&lt;/div&gt;\\s*&lt;ol\\s+class=&quot;duokan-footnote-content&quot;\\s*&gt;&#x27;,        &#x27;&lt;hr class=&quot;fenge&quot;/&gt;&#x27;,        text,        flags=re.I | re.S    )        text = re.sub(        r&#x27;&lt;a[^&gt;]*class=&quot;duokan-footnote&quot;[^&gt;]*type=&quot;noteref&quot;[^&gt;]*href=&quot;([^#&quot;]+)#B_(\\d+)&quot;[^&gt;]*id=&quot;A_\\2&quot;[^&gt;]*&gt;.*?&lt;/a&gt;&#x27;,        r&#x27;&lt;sup class=&quot;math-super&quot;&gt;&lt;a class=&quot;zs&quot; href=&quot;\\1#m\\2&quot; id=&quot;w\\2&quot;&gt;\\2&lt;/a&gt;&lt;/sup&gt;&#x27;,        text,        flags=re.I | re.S    )    text = re.sub(        r&#x27;&lt;li class=&quot;duokan-footnote-item&quot; id=&quot;B_(\\d+)&quot;&gt;\\s*&lt;p class=&quot;footnote&quot;&gt;&lt;a href=&quot;(.*?).html#A_\\1&quot; class=&quot;duokan-footnote&quot;&gt;.*?&lt;/a&gt;&#x27;,        r&#x27;&lt;p class=&quot;zhusi&quot;&gt;&lt;a href=&quot;\\2.html#w\\1&quot; id=&quot;m\\1&quot;&gt;[\\1]&lt;/a&gt;&#x27;,        text,        flags=re.DOTALL    )        return text\n","tags":["CSS"]},{"title":"æ¼«ç”»å›¾ç‰‡æ•´ç†","url":"/2024/08/20/%E6%BC%AB%E7%94%BB/","content":"ç®€å•å›¾ç‰‡æ“ä½œ\nå›¾ç‰‡æ¨¡å¼åŒé¡µå›¾ç‰‡é”™ä½å‘å›¾ç‰‡æ–‡ä»¶å¤¹æ·»åŠ å›¾ç‰‡ï¼Œå¹¶é‡å‘½ådef Img_Copy(source_image, target_folder, new_image_name):    # è·å–ç›®æ ‡æ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰å­æ–‡ä»¶å¤¹    subfolders = [f.path for f in os.scandir(target_folder) if f.is_dir()]    for subfolder in subfolders:        # ç”Ÿæˆæ–°å›¾ç‰‡çš„å®Œæ•´è·¯å¾„        new_image_path = os.path.join(subfolder, new_image_name)        # å°†å›¾ç‰‡å¤åˆ¶åˆ°å­æ–‡ä»¶å¤¹ä¸­ï¼Œå¹¶é‡å‘½å        shutil.copy(source_image, new_image_path)        print(f&quot;Copied &#123;source_image&#125; to &#123;new_image_path&#125;&quot;)\nç§»é™¤å¤šä½™çš„å›¾ç‰‡def Img_Move(root_folder, out_folder, idxs, c=0):    for subdir, _, _ in os.walk(root_folder):        if subdir == root_folder:            continue        image_path = []        folder = sorted(os.listdir(subdir))        for image_file in folder:            image_path.append(os.path.join(subdir, image_file))        image_path.sort()        for j in idxs:            if c:                shutil.copy(image_path[j],                            os.path.join(out_folder, os.path.basename(subdir) + &quot;_&quot; + os.path.basename(image_path[j])))            else:                shutil.move(image_path[j], os.path.join(out_folder, os.path.basename(subdir) + &quot;_&quot; + os.path.basename(image_path[j])))\næ•´ç†å›¾ç‰‡æ¯ä¸ªæ–‡ä»¶å¤¹ä¸‹å›¾ç‰‡å‘½åæ ¼å¼ä¸ç»Ÿä¸€ï¼ŒæŒ‰é¡ºåºé‡å‘½åå›¾ç‰‡ã€‚è¿˜å¯ä»¥æŒ‡å®šå›¾ç‰‡ç§»åˆ°æœ€ådef rename_image(parent_folder_path, i=1):    # è·å–ä¸»æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰å­æ–‡ä»¶å¤¹    subfolders = [f.path for f in os.scandir(parent_folder_path) if f.is_dir()]    for subfolder in subfolders:        # è·å–å­æ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰å›¾ç‰‡æ–‡ä»¶        images = [f for f in os.listdir(subfolder) if f.lower().endswith((&#x27;.png&#x27;, &#x27;.jpg&#x27;, &#x27;.jpeg&#x27;, &#x27;.bmp&#x27;, &#x27;.gif&#x27;))]        # ç¡®ä¿æœ‰è¶³å¤Ÿçš„å›¾ç‰‡æ–‡ä»¶        if len(images) &lt; 2:            print(f&quot;&#123;subfolder&#125; æ–‡ä»¶å¤¹ä¸­æ²¡æœ‰è¶³å¤Ÿçš„å›¾ç‰‡ã€‚&quot;)            continue        # æ’åºæ–‡ä»¶åï¼ˆå¦‚æœéœ€è¦æŒ‰é¡ºåºï¼‰        images.sort()        for index, image in enumerate(images, start=1):            original_extension = os.path.splitext(image)[1]  # è·å–æ–‡ä»¶åç¼€            new_name = f&quot;img&#123;index:04d&#125;&#123;original_extension&#125;&quot;  # æ–°æ–‡ä»¶å            original_path = os.path.join(subfolder, image)            new_path = os.path.join(subfolder, new_name)            # é‡å‘½åæ–‡ä»¶            os.rename(original_path, new_path)            print(f&quot;å·²å°† &#123;original_path&#125; é‡å‘½åä¸º &#123;new_path&#125;.&quot;)                    # è·å–æ€»å›¾ç‰‡æ•°é‡        total_images = len(images)        # æ‰¾åˆ°ç¬¬iå¼ å›¾ç‰‡å¹¶é‡å‘½å        original_extension = os.path.splitext(images[i])[1]  # è·å–æ–‡ä»¶åç¼€        i_image = f&quot;img&#123;i+1:04d&#125;&#123;original_extension&#125;&quot;        new_filename = f&quot;img&#123;total_images+1:04d&#125;&#123;original_extension&#125;&quot;  # æ–°æ–‡ä»¶å        original_path = os.path.join(subfolder, i_image)        new_path = os.path.join(subfolder, new_filename)        os.rename(original_path, new_path)        print(f&quot;å·²å°† &#123;subfolder&#125; ä¸­çš„ &#123;i_image&#125; é‡å‘½åä¸º &#123;new_filename&#125;.&quot;)\n\n\n\n\n","tags":["Python"]},{"title":"åˆ·åˆ·åˆ·","url":"/2023/04/03/%E5%88%B7%E5%88%B7%E5%88%B7/","content":"åˆ·é¢˜è®°å½•\n\n1053. äº¤æ¢ä¸€æ¬¡çš„å…ˆå‰æ’åˆ—è§£ï¼šç»„åˆæ•°å­¦å­—å…¸åºæ³•çš„é€†åºclass Solution &#123;public:    vector&lt;int&gt; prevPermOpt1(vector&lt;int&gt;&amp; arr) &#123;        int n = arr.size();        for (int i = n - 1; i &gt; 0; i--)&#123;            if (arr[i - 1] &gt; arr[i]) &#123;                for (int j = n - 1; j &gt; i - 1; j--) &#123;                    if (arr[j] &lt; arr[i - 1] &amp;&amp; arr[j] != arr[j - 1])&#123;                        int t = arr[j];                        arr[j] = arr[i - 1];                        arr[i - 1] = t;                        return arr;                    &#125;                &#125;            &#125;        &#125;        return arr;    &#125;&#125;;\n2399. æ£€æŸ¥ç›¸åŒå­—æ¯é—´çš„è·ç¦»è§£ï¼šå“ˆå¸Œè¡¨å…ˆè®°å½•æ¯ä¸ªå­—ç¬¦çš„ç¬¬ä¸€æ¬¡çš„ä½ç½®ï¼Œç¬¬äºŒæ¬¡é‡åˆ°æ—¶è®¡ç®—è·ç¦»å¹¶ä¸è·ç¦»æ•°ç»„æ¯”å¯¹ã€‚\nclass Solution:    def checkDistances(self, s: str, distance: List[int]) -&gt; bool:        d = defaultdict(int)        for i, c in enumerate(s, 1):            if d[c] and i - d[c] - 1 != distance[ord(c) - ord(&#x27;a&#x27;)]:                return False            d[c] = i        return True\n1125. æœ€å°çš„å¿…è¦å›¢é˜Ÿè§£ï¼š\n1019. é“¾è¡¨ä¸­çš„ä¸‹ä¸€ä¸ªæ›´å¤§èŠ‚ç‚¹è§£ï¼šé‡‡ç”¨å•è°ƒæ ˆçš„æ–¹æ³•ã€‚å¦‚æœæ ˆé¡¶å…ƒç´ å°äºç­‰äºå½“å‰å…ƒç´ ï¼Œåˆ™å¾ªç¯å°†æ ˆé¡¶å…ƒç´ å‡ºæ ˆï¼Œç›´åˆ°æ ˆé¡¶å…ƒç´ å¤§äºå½“å‰å…ƒç´ æˆ–è€…æ ˆä¸ºç©ºã€‚å¦‚æœæ­¤æ—¶æ ˆä¸ºç©ºï¼Œåˆ™è¯´æ˜å½“å‰å…ƒç´ æ²¡æœ‰ä¸‹ä¸€ä¸ªæ›´å¤§çš„å…ƒç´ ï¼Œå¦åˆ™å½“å‰å…ƒç´ çš„ä¸‹ä¸€ä¸ªæ›´å¤§çš„å…ƒç´ å°±æ˜¯æ ˆé¡¶å…ƒç´ ã€‚æ›´æ–°ansæ•°ç»„ã€‚ç„¶åå°†å½“å‰å…ƒç´ å…¥æ ˆï¼Œç»§ç»­éå†ã€‚\n# Definition for singly-linked list.# class ListNode:#     def __init__(self, val=0, next=None):#         self.val = val#         self.next = nextclass Solution:    def nextLargerNodes(self, head: Optional[ListNode]) -&gt; List[int]:        nums = []        while head:            nums.append(head.val)            head = head.next        stk = []        n = len(nums)        ans = [0] * n        for i in range(n - 1, -1, -1) :            while stk and stk[-1] &lt;= nums[i]:                stk.pop()            if stk:                ans[i] = stk[-1]            stk.append(nums[i])        return ans\n1041. å›°äºç¯ä¸­çš„æœºå™¨äººè§£ï¼šæ¨¡æ‹Ÿã€‚ä¸€è½®åå›åˆ°åŸç‚¹æˆ–è€…æœå‘æ”¹å˜ï¼Œå¯ä»¥åˆ¤æ–­ä¸ºåœ¨ç¯ä¸­ã€‚\nclass Solution:    def isRobotBounded(self, instructions: str) -&gt; bool:        k = 0        dist = [0] * 4        for c in instructions:            if c == &#x27;L&#x27;:                k = (k + 1) % 4            elif c == &#x27;R&#x27;:                k = (k + 3) % 4             else:                dist[k] += 1        return (dist[0] == dist[2] and dist[1] == dist[3]) or k != 0\n1147. æ®µå¼å›æ–‡1157. å­æ•°ç»„ä¸­å ç»å¤§å¤šæ•°çš„å…ƒç´ è§£ï¼šéšæœºåŒ– + äºŒåˆ†æŸ¥æ‰¾ã€‚\n1ï¼‰è‹¥åŒºé—´çš„ã€Œç»å¯¹ä¼—æ•°ã€å­˜åœ¨ã€‚æ¯æ¬¡éšæœºè‡³å°‘æœ‰$1/2$çš„æ¦‚ç‡é€‰ä¸­ï¼Œæ¯æ¬¡æŸ¥è¯¢çš„æ­£ç¡®æ€§ä¸º$1-(1/2)^k$\n2ï¼‰è®¡ç®—éšæœºæ•°$x$çš„å‡ºç°æ¬¡æ•°ã€‚ä½¿ç”¨ä¸€ä¸ªå“ˆå¸Œè¡¨æ¥å­˜å‚¨æ¯ä¸ªæ•°å‡ºç°çš„ä½ç½®ï¼Œåœ¨å“ˆå¸Œè¡¨ä¸­ä»¥xä¸ºé”®å¾—åˆ°çš„æ•°ç»„ä¸Šï¼Œåˆ†åˆ«äºŒåˆ†æŸ¥æ‰¾å·¦å³æŒ‡é’ˆçš„æ’å…¥ä½ç½®ï¼Œä¸¤è€…ä¹‹å·®å°±æ˜¯åŒºé—´å†…$x$çš„ä¸ªæ•°ã€‚\n3ï¼‰å¦‚æœ$x$ä¸ªæ•°å¤§äºç­‰äºè¦æ±‚å€¼ï¼Œè¿”å›$x$ï¼›å¦‚æœå°äºè¦æ±‚å€¼ä¸”å¤§äºç­‰äºåŒºé—´çš„ä¸€åŠï¼Œè¯´æ˜åŒºé—´å†…æœ€å¤šçš„æ•°ä¹Ÿæ— æ³•æ»¡è¶³è¦æ±‚ï¼Œå³ä¸å­˜åœ¨ç»å¯¹ä¼—æ•°ã€‚\nclass MajorityChecker:    k = 20    def __init__(self, arr: List[int]):        self.arr = arr        self.loc = defaultdict(list)        for i, val in enumerate(arr):            self.loc[val].append(i)    def query(self, left: int, right: int, threshold: int) -&gt; int:        arr_ = self.arr        loc_ = self.loc                length = right - left + 1        for i in range(MajorityChecker.k):            x = arr_[randint(left, right)]            pos = loc_[x]            occ = bisect_right(pos, right) - bisect_left(pos, left)            if occ &gt;= threshold:                return x            elif occ * 2 &gt;= length:                return -1        return -1\n2409. ç»Ÿè®¡å…±åŒåº¦è¿‡çš„æ—¥å­æ•°è§£ï¼šæ¨¡æ‹Ÿã€‚å¯»æ‰¾ä¸¤ä¸ªæ—¶é—´åŒºé—´çš„äº¤é›†ï¼Œå³èµ·å§‹ä¸ºåˆ°è¾¾æ—¶é—´ä¸­æœ€æ™šçš„ç‚¹ï¼Œæœ«å°¾ä¸ºç¦»å¼€æ—¶é—´ä¸­æœ€æ—©çš„ç‚¹ã€‚å°†æ—¥æœŸè½¬æ¢ä¸ºå¤©æ•°ï¼Œä¸¤è€…ä¹‹å·®å³ä¸ºç»“æœã€‚è‹¥ä¸ºè´Ÿæ•°ï¼Œè¿”å›0ã€‚\nclass Solution:    def countDaysTogether(self, arriveAlice: str, leaveAlice: str, arriveBob: str, leaveBob: str) -&gt; int:        a = max(arriveAlice, arriveBob)        b = min(leaveAlice, leaveBob)        days = (31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31)        x = sum(days[:int(a[:2]) - 1]) + int(a[3:])        y = sum(days[:int(b[:2]) - 1]) + int(b[3:])        return max(y - x + 1, 0)\nåˆ†éš”æ•°ç»„ä»¥å¾—åˆ°æœ€å¤§å’Œclass Solution:    def maxSumAfterPartitioning(self, arr: List[int], k: int) -&gt; int:        n = len(arr)        f = [0] * (n + 1)        for i in range(1, n + 1):            mx = 0            for j in range(i, max(0, i - k), -1):                mx = max(mx, arr[j - 1])                f[i] = max(f[i], f[j - 1] + mx * (i - j + 1))        return f[n]\n1222. å¯ä»¥æ”»å‡»å›½ç‹çš„çš‡åè§£ï¼šå…ˆå°†æ‰€æœ‰çš‡åçš„ä½ç½®å­˜å…¥å“ˆå¸Œè¡¨æˆ–è€…äºŒç»´æ•°ç»„ sss ä¸­ã€‚ä»å›½ç‹çš„ä½ç½®å¼€å§‹ï¼Œä¾æ¬¡å‘ä¸Šã€ä¸‹ã€å·¦ã€å³ã€å·¦ä¸Šã€å³ä¸Šã€å·¦ä¸‹ã€å³ä¸‹å…«ä¸ªæ–¹å‘æœç´¢ï¼Œå¦‚æœæŸä¸ªæ–¹å‘ä¸Šå­˜åœ¨çš‡åï¼Œé‚£ä¹ˆå°±å°†å…¶ä½ç½®åŠ å…¥ç­”æ¡ˆä¸­ï¼Œå¹¶ä¸”åœæ­¢ç»§ç»­æœç´¢è¯¥æ–¹å‘ã€‚\nclass Solution:    def queensAttacktheKing(self, queens: List[List[int]], king: List[int]) -&gt; List[List[int]]:        n = 8        s = &#123;(i, j) for i, j in queens&#125;        ans = []        for a in range(-1, 2):            for b in range(-1, 2):                if a or b:                    x, y = king                    while 0 &lt;= x + a &lt; n and 0 &lt;= y &lt; n:                        x, y = x + a, y + b                        if (x, y) in s:                            ans.append([x, y])                            break        return ans\n198. æ‰“å®¶åŠ«èˆè§£ï¼šæˆ‘ä»¬å®šä¹‰ $f[i]$ è¡¨ç¤ºå‰ $i$ é—´æˆ¿å±‹èƒ½å·çªƒåˆ°çš„æœ€é«˜æ€»é‡‘é¢ï¼Œåˆå§‹æ—¶ $f[0]=0, f[1]=nums[0]$ã€‚\nè€ƒè™‘$i&gt;1$çš„æƒ…å†µï¼Œç¬¬$i$é—´æˆ¿å±‹æœ‰ä¸¤ä¸ªé€‰é¡¹ï¼š\n\nä¸å·çªƒç¬¬$i$é—´æˆ¿å±‹ï¼Œå·çªƒæ€»é‡‘é¢ä¸º$f[i-1]$ï¼›\nå·çªƒç¬¬$i$é—´æˆ¿å±‹ï¼Œå·çªƒæ€»é‡‘é¢ä¸º$f[i-2]+nums[i-1]$\n\nclass Solution:    def rob(self, nums: List[int]) -&gt; int:        n = len(nums)        f = [0] * (n + 1)        f[1] = nums[0]        for i in range(2, n + 1):            f[i] = max(f[i - 1], f[i - 2] + nums[i - 1])        return f[n]\nè§£ï¼š\nè§£ï¼š\nè§£ï¼š\nè§£ï¼š\nè§£ï¼š\nè§£ï¼š\n","tags":["Python","C++"]},{"title":"ç®—æ³•","url":"/2023/02/28/%E7%AE%97%E6%B3%95/","content":"ç®—æ³•è¯¾ç¨‹ç¬”è®°\nç¬¬ä¸€ç« å‚è€ƒé“¾æ¥ï¼šhttps://www.jiangguo.net/c/7l5/0w.html\nå¤æ‚åº¦ä»ä½åˆ°é«˜ï¼š$1&lt;logn&lt;n&lt;nlogn&lt;log(n!)$$&lt;n^k&lt;a^n&lt;n!&lt;n^n$\nç¬¬äºŒç« å‚è€ƒé“¾æ¥ï¼šhttps://www.jianshu.com/p/1a87c98b0eb5\nè§£é€’å½’å¼çš„æ–¹æ³•å½’çº³æ³•\nçŒœæµ‹è§£çš„å½¢å¼\nç”¨æ•°å­¦å½’çº³æ³•æ±‚å‡ºè§£ä¸­çš„å¸¸æ•°ï¼Œå¹¶è¯æ˜è§£æ˜¯æ­£ç¡®çš„\n\n\nçŒœæµ‹é ç»éªŒ\n\nå˜é‡æ›¿æ¢ä¾‹é¢˜ï¼š$T(n)=2T(\\sqrt{n})+ logn$\nå¯ä»¥è®¾ $m=logn$ï¼Œåˆ™ $T(2^m)=2T(2^{m/2})+m$\nå†è®¾ $S(m)=T(2^m)$ï¼Œå¯å¾—$S(m)=2S(m/2)+m$\nå¯è¯ $S(m)=O(mlogm)$, åˆ™$T(n)=O(lognlog(logn))$\né€’å½’æ ‘\nmasterå®šç†å¿«é€Ÿè®¡ç®—$T(n)=aT(n/b)+ O(n^d)$çš„å¤æ‚åº¦åˆ¤æ–­1) $d &gt; log_b{a}$\n\nT(n) = O(n^d)2) $d = log_b{a}$\n\nT(n) = O(n^dlogn)3) $d &lt; log_b{a}$\n\nT(n) = O(n^{log_b{a}})è¿ç”¨ Master å®šç†çš„æ—¶å€™ï¼Œç¬¬ä¸€æ¡å’Œç¬¬ä¸‰æ¡ä¸­çš„$Îµ$å¿…é¡»å¤§äºé›¶ã€‚ä¾‹å¦‚ï¼š$T(n)=2T(n/2)+ nlogn$\nç†è®ºè¯æ˜https://www.cnblogs.com/HIIM/p/12499319.html\nç¬¬ä¸‰ç« æœ€é•¿å…¬å…±å­åºåˆ—c[i][j] = \\begin{cases} 0 & \\text{i > 0; j = 0} \\\\ c[i - 1][j - 1] + 1 & \\text{i, j > 0; $(x_i = y_i)$} \\\\ max(c[i][j - 1], c[i - 1][j]) & \\text{i, j > 0;  $(x_i \\neq y_i)$}\\end{cases}è®¡ç®—c[i][j]çš„ç®—æ³•æ—¶é—´å¤æ‚åº¦ä¸º$O(mn)$\næ ¹æ®b[i][j]æ¨å¯¼åºåˆ—çš„æ—¶é—´å¤æ‚åº¦ä¸º$O(m + n)$\n01èƒŒåŒ…m[i][j] = \\begin{cases} max(m[i + 1][j], m[i + 1][j - w_i] + v_i) & \\text{ j â‰¥ $w_i$ } \\\\ m[i + 1][j] & \\text{ 0 â‰¤ j < $w_i$ } \\end{cases}æ—¶é—´å¤æ‚åº¦ï¼šO(cn)\nè·³è·ƒç‚¹æµæ°´ä½œä¸šè°ƒåº¦Johnsonç®—æ³•1) å°†ä»»åŠ¡åˆ†ä¸ºä¸¤ç±»$a_i &lt; b_i$ å’Œ $a_i &gt; b_i$2) $a_i &lt; b_i$å¾€å‰æ’ï¼ŒæŒ‰ç…§$a_i$å‡åºæ’åˆ—3) $a_i &gt; b_i$å¾€åæ’ï¼ŒæŒ‰ç…§$b_i$é™åºæ’åˆ—\nç¬¬å››ç« ä¸»è¦ä¸ºè´ªå¿ƒé€‰æ‹©æ€§å’Œæœ€ä¼˜å­ç»“æ„è¯æ˜\næœ€å°ç”Ÿæˆæ ‘Primç®—æ³•ï¼šä»ç‚¹v1å¼€å§‹é€‰æ‹©ç¦»v1æœ€è¿‘çš„ç‚¹ï¼›ç°åœ¨v1å’Œv3ä½œä¸ºä¸€ä¸ªæ•´ä½“ï¼Œçœ‹é‚£ä¸ªç‚¹ç¦»v1å’Œv3æœ€è¿‘ï¼Œæ­¤æ—¶æœ‰ä¸¤ä¸ªç‚¹ç¦»å¾—æœ€è¿‘ï¼ŒæŒ‰é¡ºåºé€‰æ‹©v4ï¼›ã€‚ã€‚ã€‚æ—¶é—´å¤æ‚åº¦ï¼š$O(n^2)$\nKruskalç®—æ³•ï¼šå°†å›¾ä¸­çš„æ‰€æœ‰è¾¹éƒ½å»æ‰ï¼›å°†è¾¹æŒ‰æƒå€¼ä»å°åˆ°å¤§çš„é¡ºåºæ·»åŠ åˆ°å›¾ä¸­ï¼Œä¿è¯æ·»åŠ çš„è¿‡ç¨‹ä¸­ä¸ä¼šå½¢æˆç¯ï¼›é‡å¤ä¸Šä¸€æ­¥ç›´åˆ°è¿æ¥æ‰€æœ‰é¡¶ç‚¹$O(eloge)$\n","tags":["C++","ç†è®º"]},{"title":"C++å­¦ä¹ ç¬”è®°","url":"/2022/11/15/c/","content":"æ¨èç½‘ç«™ï¼šinterview.huihut.com\nåŸºç¡€ç¬”è®°å±€éƒ¨å˜é‡å’Œå…¨å±€å˜é‡åœ¨ç¨‹åºä¸­ï¼Œå±€éƒ¨å˜é‡å’Œå…¨å±€å˜é‡çš„åç§°å¯ä»¥ç›¸åŒï¼Œä½†æ˜¯åœ¨å‡½æ•°å†…ï¼Œå±€éƒ¨å˜é‡çš„å€¼ä¼šè¦†ç›–å…¨å±€å˜é‡çš„å€¼ã€‚\nä»£ç ç¤ºä¾‹äºŒç»´æ•°ç»„æ’åºä»¥list[i][1]ä¸ºå…³é”®å€¼ï¼Œä»å¤§åˆ°å°æ’åºsort(list.begin(), list.end(),     [](const vector&lt;int&gt; &amp;a, const vector&lt;int&gt; &amp;b) &#123;            return a[1] &gt; b[1];        &#125;);\næ–‡ä»¶è·¯å¾„åˆ’åˆ†string path1 = &quot;D:/datas/1.bmp&quot;string::size_type iPos = (path1 .find_last_of(&#x27;\\\\&#x27;) + 1) == 0 ?  path1 .find_last_of(&#x27;/&#x27;) + 1: path1 .find_last_of(&#x27;\\\\&#x27;) + 1 ;string ImgName = path1 .substr(iPos, path1 .length() - iPos);//è·å–å¸¦åç¼€çš„æ–‡ä»¶åstring ImgPath = path1 .substr(0,iPos);//è·å–æ–‡ä»¶è·¯å¾„string ImgNameNoTag = ImgName.substr(0, ImgName.rfind(&quot;.&quot;));//è·å–ä¸å¸¦åç¼€çš„æ–‡ä»¶åstring ImgNameTag = ImgName.substr(ImgName.rfind(&quot;.&quot;),ImgName.length());//è·å–åç¼€å","tags":["C++"]},{"title":"ç»„åˆæ•°å­¦","url":"/2022/09/28/%E7%BB%84%E5%90%88%E6%95%B0%E5%AD%A6/","content":"å­¦ä¹ æ€»ç»“\nç¬¬ä¸€ç« åŠ æ³•æ³•åˆ™å’Œä¹˜æ³•æ³•åˆ™ä¸€ä¸€å¯¹åº”ä¾‹ï¼š100ä½é€‰æ‰‹è¦é€‰å‡º1ä½å† å†›ï¼Œè¦ä¸¾è¡Œå¤šå°‘åœºæ¯”èµ›ï¼Ÿ\n\nä¸€åœºæ¯”èµ›æ·˜æ±°ä¸€äººï¼Œæ·˜æ±°99äººåˆ™è¦æ‰“99åœºã€‚\n\næ’åˆ—ç»„åˆä¾‹ï¼šäº”ä½æ•°ä¸­ï¼Œè‡³å°‘å‡ºç°ä¸€ä¸ª6ï¼Œè€Œä¸”è¢«3æ•´é™¤çš„æ•°æœ‰å¤šå°‘ä¸ªï¼Ÿ\n\näº”ä½æ•°ä¸­è¢«3é™¤å°½çš„æœ‰30000ä¸ªï¼›&lt;/br&gt;ç¬¬1ä½ä¸å‡ºç°6æœ‰8ç§å¯èƒ½ï¼ˆ12345789ï¼‰ï¼Œ&lt;/br&gt;ç¬¬2ï¼Œ3ï¼Œ4ä½ä¸å‡ºç°6æœ‰9ç§å¯èƒ½ï¼ˆ012345789ï¼‰ï¼›&lt;/br&gt;æƒ³è¦è¢«3é™¤å°½ä¸”ä¸å«6ï¼Œåˆ™å‰å››ä½ç›¸åŠ åä½™æ•°ä¸º0ï¼Œ1ï¼Œ2æ—¶ï¼Œç¬¬5ä½åˆ†åˆ«ä¸ºï¼ˆ039ï¼‰ï¼Œï¼ˆ258ï¼‰ï¼Œï¼ˆ147ï¼‰ï¼Œéƒ½æ˜¯3ç§å¯èƒ½ã€‚&lt;/br&gt;åˆ™$89^33=17496$\n\nåœ†å‘¨æ’åˆ—Q(n,r)=P(n,r)/ræ’åˆ—ç”Ÿæˆç®—æ³•åºæ•°æ³•è®¾æ•´æ•°ä¸º$n$ï¼Œ$k! &lt; n &lt; (k+1)!$\nn-1 = a_k*k!+...+a_1$aka{k-1}â€¦a1$ä¸º$n$çš„åºæ•°\n\næ’åˆ—ï¼šä»¥4213ä¸ºä¾‹ï¼Œ4çš„å³è¾¹æ¯”å®ƒå°çš„æœ‰3ä¸ªï¼Œåˆ™$a_3=3$ï¼›3çš„å³è¾¹æ¯”å®ƒå°çš„æœ‰0ä¸ªï¼Œåˆ™$a_2=0$ï¼›2çš„å³è¾¹æ¯”å®ƒå°çš„æœ‰1ä¸ªï¼Œåˆ™$a_1=1$ã€‚äºæ˜¯æ’åˆ—(4213)å¯¹åº”çš„åºæ•°(301)\n\nå­—å…¸åºæ³•è®¾åºåˆ—ä¸º$p_1p_2â€¦p_k$,åˆ™è¯¥åºåˆ—çš„ä¸‹ä¸€æ’åˆ—ä¸º\n\nä»å³å¾€å·¦æ‰¾é¦–æ¬¡å‡ºç°$pj&gt;p{j-1}$æƒ…å†µ\nä»å³å¾€å·¦æ‰¾åˆ°é¦–ä¸ªå¤§äº$p{j-1}$çš„æ•°ï¼Œå¹¶äº$p{j-1}$äº¤æ¢\nå°†$p_jâ€¦p_k$é¡ºåºé€†è½¬ï¼ˆä¾‹ï¼š1234å˜4321ï¼‰\n\n\n3421çš„ä¸‹ä¸€æ’åˆ—ä¸º4123\n\næ¢ä½æ³•\nä¼˜å…ˆæ´»åŠ¨å¤§å€¼ï¼Œæ²¡æœ‰æ•°å¤„äºæ´»åŠ¨çŠ¶æ€ç»“æŸ\n\n#å…è®¸é‡å¤ç»„åˆï¼ˆçº¿æ€§æ–¹ç¨‹æ•´æ•°è§£ï¼‰\nC(n+r-1,r)ä¸ç›¸é‚»çš„ç»„åˆ\nC(n-r+1,r)ç¬¬äºŒç«  é€’æ¨å…³ç³»ä¸æ¯å‡½æ•°\nC(n,0)+C(n,1)+...+C(n,n) = 2^n\nC(n, 1) + 2C(n, 2) +...+nC(n, n) = n2^{n-1}æ¯å‡½æ•°å®šä¹‰å¯¹äºåºåˆ—$C_0,C_1,â€¦$æ„é€ ä¸€å‡½æ•°\n\nG(x) = C_0 + C_1x + C_2x^2 + ...ç§°G(x)ä¸ºåºåˆ—$C_0,C_1,â€¦$çš„æ¯å‡½æ•°\n\n$(1 + x) ^ n$æ˜¯åºåˆ—$C(n,0),C(n,1),â€¦,C(n,n)$çš„æ¯å‡½æ•°\n\n","tags":["æ•°å­¦"]},{"title":"ç¤¾å›¢æ£€æµ‹","url":"/2022/08/10/%E7%A4%BE%E5%9B%A2%E6%A3%80%E6%B5%8B/","content":"è®ºæ–‡é˜…è¯»ç¬”è®°\n\nåŸºäºæ·±åº¦å­¦ä¹ çš„ç¤¾åŒºå‘ç°ç ”ç©¶ç»¼è¿°ã€ŠA Comprehensive Survey on Community Detection with Deep Learningã€‹\nç»¼è¿°(ä¸­æ–‡ç‰ˆ)çš„å­¦ä¹ æ€»ç»“æ³¨: Community Detection æœ¬æ–‡ç¿»è¯‘ä¸ºç¤¾å›¢æ£€æµ‹\n\n3. åŸºäºå›¾å·ç§¯ç¥ç»ç½‘ç»œï¼ˆGCNï¼‰çš„ç¤¾åŒºå‘ç°GCN åœ¨æ·±åº¦å›¾å·ç§¯å±‚ä¸­èšåˆèŠ‚ç‚¹çš„é‚»åŸŸä¿¡æ¯ï¼Œä»å…¨å±€ä¸Šæ•è·ç”¨äºç¤¾åŒºå‘ç°çš„å¤æ‚ç‰¹å¾ã€‚åŸºäºGCN çš„ç¤¾åŒºå‘ç°æ–¹æ³•æœ‰ä¸¤ç±»ï¼šï¼ˆ1ï¼‰ç›‘ç£/åŠç›‘ç£ç¤¾åŒºåˆ†ç±»ï¼ˆ2ï¼‰åŸºäºæ— ç›‘ç£ç½‘ç»œè¡¨ç¤ºçš„ç¤¾åŒºèšç±»ã€‚ç¤¾åŒºåˆ†ç±»æ–¹æ³•å—åˆ°ç°å®ä¸–ç•Œä¸­ç¼ºä¹æ ‡ç­¾çš„é™åˆ¶ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œé€šè¿‡çŸ©é˜µé‡æ„å’Œç›®æ ‡ä¼˜åŒ–ç­‰æŠ€æœ¯ï¼Œç½‘ç»œè¡¨ç¤ºå¯ä»¥æ›´çµæ´»åœ°å¯¹ç¤¾åŒºè¿›è¡Œèšç±»ã€‚\n4. åŸºäºå›¾æ³¨æ„åŠ›ç½‘ç»œï¼ˆGATï¼‰çš„ç¤¾åŒºå‘ç°åŸºäºå›¾æ³¨æ„åŠ›ç½‘ç»œçš„ç¤¾åŒºå‘ç°æ–¹æ³•å¯ä»¥åœ¨å¤æ‚çš„ç½‘ç»œåœºæ™¯ä¸‹è¿›è¡Œç¤¾åŒºå‘ç°ã€‚GAT é€šè¿‡å¯è®­ç»ƒçš„æƒé‡èšåˆé‚»åŸŸå†…çš„èŠ‚ç‚¹ç‰¹å¾ï¼Œè¯¥æƒé‡é€šè¿‡è€ƒè™‘å¤šç§å› ç´ ï¼ˆå°¤å…¶æ˜¯å¯¹äºå…·æœ‰å¤šç§å…³ç³»ç±»å‹çš„ç½‘ç»œï¼‰çš„æ³¨æ„åŠ›è®¡ç®—è€Œæ¥ã€‚\n5. åŸºäºç”Ÿæˆå¯¹æŠ—ç½‘ç»œï¼ˆGANï¼‰çš„ç¤¾åŒºå‘ç°GAN é€šè¿‡ç”Ÿæˆå™¨$Î¦_g$ç”Ÿæˆäººé€ æ ·æœ¬$Z$æ¥æ¬ºéª—åˆ¤åˆ«å™¨$Î¦_d$ã€‚åˆ¤åˆ«å™¨å°†å¤šå±‚æ„ŸçŸ¥æœºï¼ˆMLPï¼‰ã€å›¾ç¥ç»ç½‘ç»œï¼ˆGCNï¼‰ç­‰æ·±åº¦ç¥ç»ç½‘ç»œä½œç”¨äºè¡¨å¾ä¸Šã€‚å› æ­¤ï¼ŒçœŸå®æ ·æœ¬å’Œäººé€ æ ·æœ¬ä¼šé€šè¿‡ç«äº‰åšå¼ˆè¿›è¡Œè°ƒä¼˜ï¼Œä»è€Œå¾—åˆ°æœ€ä¼˜çš„ç¤¾åŒºç‰¹å¾ã€‚GAN ä¸­ä½¿ç”¨çš„çœŸå®æ ·æœ¬åŒ…æ‹¬ï¼š\nï¼ˆ1ï¼‰æ‹“æ‰‘ç»“æ„$A$ï¼›\nï¼ˆ2ï¼‰æ‹“æ‰‘ç»“æ„ä¸èŠ‚ç‚¹ç‰¹å¾$(A,X)$ï¼›\nï¼ˆ3ï¼‰èŠ‚ç‚¹åµŒå…¥$H_Î½$ï¼›\nï¼ˆ4ï¼‰èŠ‚ç‚¹çš„ç¤¾å›¢å½’å±$H_c$ã€‚\næˆ‘ä»¬åœ¨è¡¨å¾ä¸­åˆ†æç½‘ç»œæ‹“æ‰‘ï¼ˆä¸‰å…ƒç»„ã€æ´¾ç³»ã€ç¤¾åŒºï¼‰æˆ–ç›´æ¥åœ¨ GAN ä¸­åˆ†æå®ƒä»¬ã€‚è¯¥æ–¹æ³•åœ¨èåˆç½‘ç»œæ‹“æ‰‘ã€å±æ€§å’Œè¡¨å¾çš„è¿‡ç¨‹ä¸­å‘ç°ç¤¾åŒºã€‚\n6. åŸºäºè‡ªç¼–ç å™¨ï¼ˆAEï¼‰çš„ç¤¾åŒºå‘ç°è‡ªç¼–ç å™¨ï¼ˆAEï¼‰æœ€å¸¸è¢«ç”¨äºæ— ç›‘ç£ç¤¾åŒºå‘ç°ï¼Œé€šå¸¸è¢«ç”¨åˆ°çš„ AE å˜ä½“åŒ…æ‹¬æ ˆå¼ AEã€ç¨€ç– AEã€å»èº AEã€å·ç§¯ AEã€å˜åˆ† AEã€‚AE å¯ä»¥æç»˜éçº¿æ€§çš„ã€å¸¦å™ªå£°çš„çœŸå®ä¸–ç•Œç½‘ç»œï¼Œå¹¶ç”Ÿæˆå¹³æ»‘çš„è¡¨å¾ã€‚é€šç”¨çš„ AE æ¶æ„ç”±ä¸€ä¸ªç¼–ç å™¨å’Œä¸€ä¸ªè§£ç å™¨ç»„æˆã€‚ç¼–ç å™¨å°†ç½‘ç»œç»“æ„å’Œå¯è·å–çš„è¯­ä¹‰ä¿¡æ¯æ˜ å°„åˆ°ä¸€ä¸ªä½ç»´æ½œåœ¨ç©ºé—´ä¸­ã€‚è§£ç å™¨åˆ™æ ¹æ®ç¼–ç å¾—åˆ°çš„è¡¨ç¤ºé‡æ„ä¸€ä¸ªç½‘ç»œã€‚\n\nåŸºäºå¤šå±‚ç½‘ç»œçš„ç¤¾å›¢æ£€æµ‹ç»¼è¿°ã€ŠCommunity Detection in Multiplex Networksã€‹\nå…¨å±€ç¤¾åŒºå‘ç°ç®—æ³•ä¹Ÿå¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸‰ä¸ªå…¸å‹çš„ä¸»è¦ç±»ã€‚\nFlatteningç¬¬ä¸€ç§æ–¹æ³•æ˜¯é€šè¿‡åˆå¹¶å¤šå±‚ç½‘ç»œï¼Œä½¿ç”¨æ‰€è°“çš„æ‰å¹³åŒ–ç®—æ³•ï¼Œç„¶ååº”ç”¨ä¼ ç»Ÿçš„ç¤¾åŒºå‘ç°ç®—æ³•ï¼Œå°†å¤šå±‚ç½‘ç»œç®€åŒ–ä¸ºä¸€ä¸ªå›¾ã€‚\nLayer by layeré€å±‚çš„æ–¹æ³•å…ˆå¯¹æ¯å±‚(ä¾‹å¦‚,åº”ç”¨ä¼ ç»Ÿçš„ç¤¾åŒºå‘ç°ç®—æ³•)è¿›è¡Œå¤„ç†ï¼Œå†å¯¹å¤„ç†åçš„ç»“æœè¿›è¡Œåˆå¹¶ã€‚\nMultilayerç¬¬ä¸‰ç±»ç®—æ³•ç›´æ¥åœ¨å¤šè·¯å¤ç”¨ç½‘ç»œæ¨¡å‹ä¸Šè¿è¡Œã€‚\n\nå±äºè¿™ä¸€ç±»çš„åŸºäºéšæœºæ¸¸èµ°è€…çš„æ–¹æ³•å…è®¸æ¸¸èµ°è€…ä»ä¸€å±‚åˆ‡æ¢åˆ°å¦ä¸€å±‚ã€‚\n\nåŸºäºæ·±åº¦å›¾ä¿¡æ¯æœ€å¤§åŒ–çš„ç¤¾å›¢æ£€æµ‹ã€ŠCommDGI: Community Detection Oriented Deep Graph Infomaxã€‹\nç›®å‰çš„æŒ‘æˆ˜ï¼š\n\næ— æ ‡ç­¾çš„å›¾å­¦ä¹ ï¼šä¸€èˆ¬æ¥è¯´ï¼Œç¤¾åŒºæ£€æµ‹ä»»åŠ¡æ˜¯åœ¨æ— æ ‡ç­¾çš„æƒ…å†µä¸‹è¿›è¡Œçš„ï¼Œè¿™æ„å‘³ç€ç¥ç»å·¥ä½œæœ¬èº«ä¼šäº§ç”Ÿä¸€äº›è‡ªç›‘ç£ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯å¯ä»¥é¼“åŠ±ç¼–ç å™¨çš„è¾“å‡ºå…·æœ‰æœŸæœ›çš„ç‰¹æ€§ã€‚\nç¤¾åŒºæ— å…³è¡¨ç¤ºï¼šé€šç”¨å›¾ç¥ç»ç½‘ç»œå­¦ä¹ åˆ°çš„è¡¨ç¤ºä¸èƒ½æ•è·èšç±»å’Œç¤¾åŒºç»“æ„ä¿¡æ¯ã€‚å°†èšç±»è¿‡ç¨‹ä¸å›¾ç¥ç»ç½‘ç»œç›¸ç»“åˆä»¥æ›´å¥½åœ°å¤„ç†ç¤¾åŒºå‘ç°é—®é¢˜æ˜¯å¿…è¦çš„ï¼Œä½†ä¹Ÿæ˜¯å…·æœ‰æŒ‘æˆ˜æ€§çš„ã€‚\nçº ç¼ è¡¨ç¤ºï¼šå›¾ç¥ç»ç½‘ç»œåœ¨çŸ©é˜µé‡æ„ç›®æ ‡ä¸‹å­¦ä¹ åˆ°çš„è¡¨ç¤ºæ˜¯çº ç¼ çš„ï¼Œå¯è§£é‡Šæ€§å·®ã€‚\nç«¯åˆ°ç«¯å­¦ä¹ ï¼šç»Ÿä¸€å›¾å’Œèšç±»å­¦ä¹ å¯¹é¢å‘ç¤¾åŒºçš„å›¾ç¥ç»ç½‘ç»œæ¥è¯´æ˜¯å…·æœ‰æŒ‘æˆ˜æ€§ä½†æœ‰ç”¨çš„ã€‚èšç±»åˆ†é…å¯ä»¥å¸®åŠ©ä»¥ç¤¾åŒºç›¸å…³çš„æ–¹å¼æ›´æ–°èŠ‚ç‚¹è¡¨ç¤ºã€‚\n\nä¸ºäº†å…‹æœè¿™äº›é—®é¢˜ï¼Œæ–‡ç« æå‡ºäº†CommDGIï¼ˆCommunity Deep Graph Infomaxï¼‰æ¨¡å‹ã€‚åœ¨æ­¤æ¡†æ¶ä¸­ï¼Œä¸ºäº†ç¼–ç èƒ½å¤Ÿæ„ŸçŸ¥åˆ°èŠ‚ç‚¹ç»“æ„ä¸ç¤¾åŒºçš„è¡¨ç¤ºï¼Œé‡‡ç”¨æœ€å¤§åŒ–äº’ä¿¡æ¯æ¥æ•è·å±€éƒ¨å’Œå…¨å±€ç»“æ„ä¿¡æ¯ã€‚ä¸åŒäºDGIï¼Œè¯¥æ¨¡å‹æå‡ºäº†ä¸€ç§æ–°çš„æœ€å¤§åŒ–äº’ä¿¡æ¯çš„èŒƒå¼ã€‚å›¾äº’ä¿¡æ¯ï¼ˆGraph mutual informationï¼‰æ˜¯é€šè¿‡èŠ‚ç‚¹å’Œå›¾æ¥è¿›è¡Œè®¡ç®—ï¼Œç¤¾åŒºäº’ä¿¡æ¯ï¼ˆcommunity mutual informationï¼‰æ˜¯é€šè¿‡èŠ‚ç‚¹å’Œç¤¾åŒºï¼ˆå­å›¾ï¼‰æ¥è¿›è¡Œè®¡ç®—ã€‚è¿™ä¸¤ç§äº’ä¿¡æ¯ä¸€èµ·æœ€å¤§åŒ–æ¥ç¼–ç èŠ‚ç‚¹çš„å›¾å’Œèšç±»ç‰¹å¾ï¼ˆthe graph and clustering feature of each nodeï¼‰ã€‚\nä¸€è‡´æ€§å¤šå›¾åµŒå…¥ç”¨äºå¤šè§†å›¾èšç±»ã€ŠConsistent Multiple Graph Embedding for Multi-View Clusteringã€‹\næœ¬æ–‡æå‡ºäº†ä¸€ç§æ–°é¢–çš„ä¸€è‡´æ€§å¤šå›¾åµŒå…¥èšç±»æ¡†æ¶( CMGEC )ã€‚å…·ä½“åœ°ï¼Œè®¾è®¡äº†å¤šå›¾è‡ªç¼–ç å™¨( M-GAE )ï¼Œåˆ©ç”¨å¤šå›¾æ³¨æ„åŠ›èåˆç¼–ç å™¨å¯¹å¤šè§†å›¾æ•°æ®çš„äº’è¡¥ä¿¡æ¯è¿›è¡Œçµæ´»ç¼–ç ã€‚ä¸ºäº†æŒ‡å¯¼å­¦ä¹ åˆ°çš„å…±åŒè¡¨ç¤ºä¿æŒæ¯ä¸ªè§†å›¾ä¸­ç›¸é‚»ç‰¹å¾çš„ç›¸ä¼¼æ€§ï¼Œå¼•å…¥äº†å¤šè§†å›¾äº’ä¿¡æ¯æœ€å¤§åŒ–æ¨¡å—( MMIM )ã€‚æ­¤å¤–ï¼Œè®¾è®¡äº†ä¸€ä¸ªå›¾èåˆç½‘ç»œ( GFN )ï¼Œä»ä¸åŒè§’åº¦æ¢ç´¢å›¾ä¹‹é—´çš„å…³ç³»ï¼Œå¹¶æä¾›M - GAEæ‰€éœ€çš„å…¬å…±å…±è¯†å›¾ã€‚é€šè¿‡è”åˆè®­ç»ƒè¿™äº›æ¨¡å‹ï¼Œå¯ä»¥å¾—åˆ°å…±åŒçš„è¡¨ç¤ºï¼Œä»å¤šä¸ªè§†å›¾ä¸­ç¼–ç æ›´å¤šçš„äº’è¡¥ä¿¡æ¯ï¼Œæ›´å…¨é¢åœ°æè¿°æ•°æ®ã€‚\n\né¢å‘æ— ç›‘ç£çš„æ·±åº¦å›¾ç»“æ„å­¦ä¹ ã€ŠTowards Unsupervised Deep Graph Structure Learningã€‹â€™www22â€™\nèƒŒæ™¯ç›®å‰ä¼˜åŒ–å›¾ç»“æ„çš„æ–¹æ³•ä¾§é‡äºç›‘ç£å­¦ä¹ åœºæ™¯ï¼Œè¿™å¯¼è‡´äº†å‡ ä¸ªé—®é¢˜ï¼Œå³å¯¹æ ‡ç­¾çš„ä¾èµ–ã€è¾¹ç¼˜åˆ†å¸ƒçš„åå·®ä»¥åŠå¯¹åº”ç”¨ä»»åŠ¡çš„é™åˆ¶ã€‚\næ–¹æ³•é¦–æ¬¡æå‡ºé‡‡ç”¨GNNæ— ç›‘ç£çš„æ–¹æ³•ã€‚\nç®€å•çš„æ— ç›‘ç£å›¾è¡¨ç¤ºå­¦ä¹ ã€ŠSimple Unsupervised Graph Representation Learningã€‹\nèƒŒæ™¯å®ç°æœ‰æ•ˆä¸”é«˜æ•ˆçš„å¯¹æ¯”å­¦ä¹ ã€‚\næ–¹æ³•ä¸ºäº†è·å¾—æœ‰æ•ˆæ€§ï¼Œæˆ‘ä»¬è®¾è®¡äº†ä¸¤ä¸ªä¸‰å…ƒç»„æŸå¤±æ¥æ¢ç´¢ç»“æ„ä¿¡æ¯å’Œé‚»å±…ä¿¡æ¯ä¹‹é—´çš„äº’è¡¥ä¿¡æ¯ä»¥æ‰©å¤§ç±»é—´å˜å¼‚ï¼Œä»¥åŠä¸Šå¸¦æŸå¤±ä»¥å‡å°‘ç±»å†…å˜å¼‚ã€‚ä¸ºäº†æé«˜æ•ˆç‡ï¼Œæˆ‘ä»¬çš„æ–¹æ³•æ—¨åœ¨åˆ é™¤ç”¨äºç”Ÿæˆé”šåµŒå…¥å’Œè´ŸåµŒå…¥çš„ GCNï¼Œä»¥åŠä»å…ˆå‰çš„å›¾å½¢å¯¹æ¯”å­¦ä¹ ä¸­åˆ é™¤æ•°æ®å¢å¼ºå’Œé‰´åˆ«å™¨ã€‚\nCommDGI: é¢å‘æ·±åº¦å›¾çš„ç¤¾åŒºå‘ç°ã€ŠCommDGI: Community Detection Oriented Deep Graphã€‹â€™CIKM â€˜20â€™\nèƒŒæ™¯æ–¹æ³•\n ã€Šã€‹\nèƒŒæ™¯æ–¹æ³•\n ã€Šã€‹\nèƒŒæ™¯æ–¹æ³•\n","tags":["æ·±åº¦å­¦ä¹ "]},{"title":"Kindle|ç”µå­ä¹¦æ’ç‰ˆæ€»ç»“","url":"/2021/03/18/calibre/","content":"æ€»ç»“ä¸€äº›ç”¨äºAZW3æ ¼å¼çš„æ’ç‰ˆ\nå·¥å…·Sigilä¸‹è½½åœ°å€\nSigilï¼Œè·¨å¹³å°çš„å¼€æº ePub ç”µå­ä¹¦ç¼–è¾‘å™¨ï¼Œæ”¯æŒWindowsã€Linuxå’ŒMacç³»ç»Ÿã€‚\n\nä¸ªäººä¸»è¦ç”¨äºåˆ‡åˆ†ç« èŠ‚.ä¸»è¦æ˜¯å› ä¸ºå¤„ç†æ–‡æœ¬é‡è¾ƒå¤§çš„æ–‡ä»¶æ—¶ä¼šé—ªé€€\nEasypubä¸‹è½½åœ°å€\n\nå¯ä»¥TXTæ–‡æ¡£è½¬æˆå¸¦ç›®å½•çš„MOBI/EPUBæ ¼å¼,ä½†æ˜¯æ’ç‰ˆä¸€èˆ¬.\n\nä¸€èˆ¬ç”¨è¿™ä¸ªå°†txtç®€å•è½¬æ¢ä¸‹,å†ç»†è°ƒ\nCalibreä¸‹è½½åœ°å€\n\nCalibre æ˜¯ä¸€ä¸ªå…è´¹çš„å¼€æºçš„â€œä¸€ç«™å¼â€çš„ç”µå­ä¹¦è§£å†³æ–¹æ¡ˆï¼Œå®ƒå¯ä»¥å…¨é¢æ»¡è¶³ä½ çš„ç”µå­ä¹¦éœ€æ±‚ã€‚å®ƒæ˜¯ä¸€ä¸ªå®Œæ•´çš„ç”µå­å›¾ä¹¦é¦†ï¼ŒåŒ…æ‹¬å›¾ä¹¦ç®¡ç†ï¼Œæ ¼å¼è½¬æ¢ï¼Œæ–°é—»ï¼Œå°†ææ–™è½¬æ¢ä¸ºç”µå­ä¹¦ï¼Œä»¥åŠç”µå­ä¹¦é˜…è¯»å™¨åŒæ­¥åŠŸèƒ½ã€æ•´åˆè¿›ç”µå­å›¾ä¹¦é˜…è¯»å™¨ã€‚å½“ç„¶å®ƒä¹Ÿå†…ç½®äº†ä¸€ä¸ª ePub æ ¼å¼ç”µå­ä¹¦ç¼–è¾‘å·¥å…·ä»¥æ»¡è¶³ä¿®æ”¹ç”µå­ä¹¦çš„éœ€è¦ã€‚\n\nä¸»è¦å·¥å…·,åŠŸèƒ½å¼ºæ‚\n\nå­—ä½“ä¸ªäººä¸»è¦ä½¿ç”¨é»‘ä½“,æ¥·ä½“,æ€æºå®‹ä½“å’Œæ–¹æ­£å…°äº­\næ¥·ä½“font-family: &quot;DK-KAITI&quot;, &quot;æ¥·ä½“&quot;, &quot;æ–¹æ­£æ¥·ä½“_GBK&quot;, &quot;KaiTi&quot;, &quot;STKaiti&quot;, &quot;STKai&quot;, &quot;kt&quot;, serif;\næ€æºå®‹ä½“@font-face &#123;  font-family: &quot;syst&quot;;  src: url(&quot;../fonts/systB.ttf&quot;);&#125;\nfont-family: &quot;syst&quot;;\næ–¹æ­£å…°äº­@font-face &#123;  font-family: &quot;fzlt&quot;;  src: url(&quot;../fonts/fzltZH.ttf&quot;);&#125;\nfont-family: &quot;fzlt&quot;;\nå°é¢Kindle ç”µå­ä¹¦å°é¢å›¾ç‰‡æ ‡å‡†è§„æ ¼å¦‚ä¸‹ï¼š\n\nJPEG æˆ– TIFF æ ¼å¼\nä¼˜å…ˆä½¿ç”¨ 1.6:1 çš„é•¿å®½æ¯”\næœ€å°å°ºå¯¸ï¼šå®½ 625 åƒç´ ï¼Œé•¿ 1000 åƒç´ \næœ€ä½³å°ºå¯¸ï¼šå®½ 1563 åƒç´ ï¼Œé•¿ 2500 åƒç´ \n\næ ‡é¢˜å·æ ‡é¢˜æ¨ªæ¿&lt;h1 id=&quot;title&quot; class=&quot;volume-title&quot;&gt;ç¬¬ä¸€å·&lt;br class=&quot;calibre3&quot;/&gt;&lt;span class=&quot;volume-subtitle&quot;&gt; æ¸¸æˆåˆ›æ–°çš„ä¸€èˆ¬åŸç†&lt;/span&gt;&lt;/h1&gt;\n\nå…¶ä¸­.volume-title &#123;  display: block;  font-family: &quot;DK-KAITI&quot;, &quot;æ¥·ä½“&quot;, &quot;æ–¹æ­£æ¥·ä½“_GBK&quot;, &quot;KaiTi&quot;, &quot;STKaiti&quot;, &quot;STKai&quot;, &quot;kt&quot;, serif;  font-size: 1.3em;  line-height: 1.4;  text-align: center;  margin: 30% auto;&#125;.volume-subtitle &#123;  display: block;  font-family: &quot;syst&quot;;  text-align: center;&#125;\nç«–ç‰ˆ&lt;div class=&quot;head&quot;&gt;  &lt;h1 class=&quot;head1&quot; title=&quot;ç¬¬ä¸€å· å¤©å…ƒç¯‡&quot;&gt;ç¬¬ä¸€å·&lt;/h1&gt;  &lt;p class=&quot;head2&quot;&gt;å¤©å…ƒç¯‡&lt;/p&gt;&lt;/div&gt;\n.head &#123;  display: block;  line-height: 1.4;  text-align: center;  width: 1.4em;  margin: 25% auto;&#125;.head1 &#123;  display: block;  font-family: &quot;STKai&quot;, &quot;DK-FANGSONG&quot;, &quot;æ–¹æ­£ä»¿å®‹_GBK&quot;, &quot;kt&quot;, serif;  font-size: 1.4em;  font-weight: bold;  line-height: 1.4;  text-align: center;&#125;.head2 &#123;  display: block;  font-family: &quot;STKai&quot;, &quot;DK-FANGSONG&quot;, &quot;æ–¹æ­£ä»¿å®‹_GBK&quot;, &quot;kt&quot;, serif;  font-size: 1.4em;  font-weight: bold;  line-height: 1.4;  text-align: center;&#125;\nç« æ ‡é¢˜&lt;h2 class=&quot;chapter-title&quot;&gt;&lt;span class=&quot;chapter-sequence-number&quot;&gt;ç¬¬991ç« &lt;/span&gt;&lt;br/&gt; é»‘ç«çŸ³å’Œå“¨å…µ&lt;span class=&quot;chapter-subtitle&quot;&gt;ï¼ˆä¸Šï¼‰&lt;/span&gt;&lt;/h2&gt;\n.chapter-sequence-number &#123;  font-family: &quot;fzlt&quot;;  font-size: 1rem;  padding: 2px 4px;&#125;.chapter-title &#123;  display: block;  font-family: &quot;syst&quot;;  font-size: 1.2em;  line-height: 1.4;  text-align: center;&#125;.chapter-subtitle &#123;  font-size: 0.7em;&#125;\næ­£æ–‡æ–‡å­—.calibre4 &#123;  display: block;  line-height: 1.4;  text-align: justify;  text-indent: 2em;&#125;\næ’å›¾&lt;div class=&quot;tupian&quot;&gt;  &lt;img alt=&quot;&quot; class=&quot;image-alone&quot; src=&quot;../images/00079.jpeg&quot;/&gt;&lt;/div&gt;\n.tupian &#123;  display: block;  text-align: center;  margin: 1em auto;&#125;.image-alone &#123;  height: auto;  width: 90%;&#125;\næ³¨é‡Š&lt;span class=&quot;math-super&quot;&gt;&lt;a href=&quot;part0107.html#bz1&quot; id=&quot;z1&quot;&gt;[1]&lt;/a&gt;&lt;/span&gt;\n&lt;p class=&quot;zhusi&quot;&gt;&lt;a href=&quot;part0012.html#z1&quot; id=&quot;bz1&quot;&gt;[1]&lt;/a&gt;æ³¨é‡Šå†…å®¹&lt;/p&gt;\n.math-super &#123;  font-family: &quot;DK-KAITI&quot;, &quot;æ¥·ä½“&quot;, &quot;æ–¹æ­£æ¥·ä½“_GBK&quot;, &quot;KaiTi&quot;, &quot;STKaiti&quot;, &quot;STKai&quot;, &quot;kt&quot;, serif;  font-size: 0.75em;  vertical-align: super;&#125;.zhusi &#123;  display: block;  font-family: &quot;DK-KAITI&quot;, &quot;æ¥·ä½“&quot;, &quot;æ–¹æ­£æ¥·ä½“_GBK&quot;, &quot;KaiTi&quot;, &quot;STKaiti&quot;, &quot;STKai&quot;, &quot;kt&quot;, serif;  line-height: 1.5;  margin: 1em 0;&#125;\nå…¶ä»–æ–¹æ¡†&lt;div class=&quot;reference&quot;&gt;&lt;/div&gt;\n.reference &#123;  display: block;  line-height: 1.4;  margin-bottom: 1em;  margin-top: 1em;  padding: 0 0.25em;  border: #444 dotted 1px;&#125;\né˜´å½±&lt;p class=&quot;indent&quot;&gt;&lt;span class=&quot;titlemode&quot;&gt;åŸæ–‡&lt;/span&gt;&lt;/p&gt;\n.indent &#123;  display: block;  line-height: 140%;  text-align: justify;  text-indent: 2em;&#125;.titlemode &#123;  background-color: #4A494A;  color: #fff;  font-family: &quot;æ¥·ä½“&quot;, &quot;ä»¿å®‹_gb2312&quot;, &quot;zw&quot;, serif;  font-size: 1.1em;  font-weight: bold;  line-height: 1.4;  padding: 3px;&#125;\n","tags":["CSS"]},{"title":"Python|Pycharmä½¿ç”¨æŠ€å·§","url":"/2020/08/15/Pycharm/","content":"Windows 10 ä¸“ä¸šç‰ˆPycharm 2020.2\nPycharmä½¿ç”¨æŠ€å·§è‡ªåŠ¨è°ƒæ•´ä»£ç æ ¼å¼é—®é¢˜\nåœ¨ä½¿ç”¨pycharmçš„ä»£ç ç¼–è¾‘å™¨æ—¶ï¼Œå¸¸å¸¸æ‡’å¾—å†™ç©ºæ ¼ï¼Œä½†è¿™æ˜¯ä¸ç¬¦åˆä»£ç è§„èŒƒçš„ï¼Œè€Œä¸”ä¹Ÿä¼šå½±å“å¯è¯»æ€§ã€‚\nè§£å†³åŠæ³•\npycharmæœ‰è‡ªåŠ¨è°ƒæ•´ä»£ç æ ¼å¼çš„å¿«æ·é”®ï¼Œé»˜è®¤ä¸ºAlt+Ctrl+Lï¼ŒæŒ‰ä¸‹å¿«æ·é”®åï¼Œä»£ç è‡ªåŠ¨å¡«å……äº†ç©ºæ ¼ã€‚\nè¿è¡Œå½“å‰ç¼–è¾‘æ–‡ä»¶é—®é¢˜\nè¿è¡Œä»£ç æ—¶ï¼Œæ€»æ˜¯è¦å…ˆé€‰æ‹©æ–‡ä»¶ï¼Œç‚¹å‡»è¿è¡Œæˆ–è€…å³å‡»é€‰æ‹©è¿è¡Œï¼Œéœ€è¦ä¸¤æ­¥\nè§£å†³æ–¹æ³•\nè®¾ç½®å¿«æ·é”®ï¼Œè¿è¡Œå½“å‰ç¼–è¾‘æ–‡ä»¶å¿«æ·é”®ä¸ºCtrl+Sift+F10\n","tags":["Python"]},{"title":"Python|å­¦ä¹ æ€»ç»“","url":"/2020/07/08/Python%E5%B0%8F%E6%8A%80%E5%B7%A7/","content":"è®°å½•æœ‰è¶£çš„å°æŠ€å·§\nåŸºç¡€å­¦ä¹ set() å‡½æ•°set() å‡½æ•°åˆ›å»ºä¸€ä¸ªæ— åºä¸é‡å¤å…ƒç´ é›†ï¼Œå¯è¿›è¡Œå…³ç³»æµ‹è¯•ï¼Œåˆ é™¤é‡å¤æ•°æ®ï¼Œè¿˜å¯ä»¥è®¡ç®—äº¤é›†ã€å·®é›†ã€å¹¶é›†ç­‰ã€‚x = set(&#x27;runoob&#x27;)y = set(&#x27;google&#x27;)x, y&gt;&gt;&gt; (set([&#x27;b&#x27;, &#x27;r&#x27;, &#x27;u&#x27;, &#x27;o&#x27;, &#x27;n&#x27;]), set([&#x27;e&#x27;, &#x27;o&#x27;, &#x27;g&#x27;, &#x27;l&#x27;]))x &amp; y         # äº¤é›†&gt;&gt;&gt; set([&#x27;o&#x27;])x | y         # å¹¶é›†&gt;&gt;&gt; set([&#x27;b&#x27;, &#x27;e&#x27;, &#x27;g&#x27;, &#x27;l&#x27;, &#x27;o&#x27;, &#x27;n&#x27;, &#x27;r&#x27;, &#x27;u&#x27;])x - y         # å·®é›†&gt;&gt;&gt; set([&#x27;r&#x27;, &#x27;b&#x27;, &#x27;u&#x27;, &#x27;n&#x27;])\nCounter() å‡½æ•°Counteræ˜¯dictå­ç±»ï¼Œç”¨äºè®¡æ•°å¯å“ˆå¸Œçš„å¯¹è±¡ã€‚å…ƒç´ è¢«ä½œä¸ºå­—å…¸çš„keyå­˜å‚¨ï¼Œå®ƒä»¬çš„è®¡æ•°ä½œä¸ºå­—å…¸çš„valueå­˜å‚¨ã€‚from collections import Countercnt = Counter()for word in [&#x27;red&#x27;, &#x27;blue&#x27;, &#x27;red&#x27;, &#x27;green&#x27;, &#x27;blue&#x27;, &#x27;blue&#x27;]:    cnt[word] += 1  # å¦‚æœé”®ä¸å­˜åœ¨ï¼Œå°±è¿”å›0print cnt&gt;&gt;&gt; Counter(&#123;â€˜blueâ€™: 3, â€˜redâ€™: 2, â€˜greenâ€™: 1&#125;)\nzip()# æ˜¾ç¤ºåˆ—nums = [&#x27;flower&#x27;,&#x27;flow&#x27;,&#x27;flight&#x27;]for i in zip(*nums):    print(i)&gt;&gt;&gt; (&#x27;f&#x27;, &#x27;f&#x27;, &#x27;f&#x27;)    (&#x27;l&#x27;, &#x27;l&#x27;, &#x27;l&#x27;)    (&#x27;o&#x27;, &#x27;o&#x27;, &#x27;i&#x27;)    (&#x27;w&#x27;, &#x27;w&#x27;, &#x27;g&#x27;)\nå®ç”¨å·¥å…·ä¸€é”®æŠ å›¾\nè¿›å…¥å®˜ç½‘,å¯ä»¥ç›´æ¥ä¸Šä¼ å›¾ç‰‡\n\n\n\nä¹Ÿå¯ä»¥æ³¨å†Œè´¦å·ç”³è¯·APIï¼Œé€šè¿‡ä»£ç å®ç°# å®‰è£…åº“pip install removebg\n# ä»å®˜ç½‘è·å–è‡ªå·±çš„APIfrom removebg import RemoveBgrmbg = RemoveBg(&quot;è‡ªå·±çš„API&quot;, &quot;error.log&quot;)rmbg.remove_background_from_img_file(&quot;C:/Code/Picture/new.jpg&quot;)\n\n\n\n\n","tags":["python"]},{"title":"Python|PyTorchå­¦ä¹ è®°å½•","url":"/2020/07/08/pytorch/","content":"PyTorchä½¿ç”¨å¿ƒå¾—\nåˆ›å»ºè™šæ‹Ÿç¯å¢ƒconda create -n c_d python=3.7\nconda activate c_d\nå®‰è£…PyTorchè¿›å…¥PyTorchå®˜ç½‘\nconda install pytorch==1.13.1 torchvision==0.14.1 torchaudio==0.13.1 pytorch-cuda=11.6 -c pytorch -c nvidia\norpip install torch==1.13.1+cu116 torchvision==0.14.1+cu116 torchaudio==0.13.1 --extra-index-url https://download.pytorch.org/whl/cu116\nå®‰è£…PyGè¿›å…¥PyGå®˜ç½‘pip install torch_geometric# Optional dependencies:pip install torch_scatter torch_sparse torch_cluster torch_spline_conv -f https://data.pyg.org/whl/torch-1.13.0+cu116.html\nå…¶ä»–CPU, GPUç›‘æ§# ä» PyPI è·å–å¹¶å®‰è£…$ pip3 install --upgrade nvitop# ä» GitHub è·å–å¹¶å®‰è£…æœ€æ–°ç‰ˆ (æ¨è)$ pip3 install git+https://github.com/XuehaiPan/nvitop.git#egg=nvitop\n# è·å–å¹¶æ˜¾ç¤ºæœºå™¨èµ„æºä¿¡æ¯ (åªæ‰“å°ä¸€æ¬¡)$ nvitop -1          # è·å–å¹¶æ˜¾ç¤ºæœºå™¨èµ„æºä¿¡æ¯ (æ‰€æœ‰ GPU)$ nvitop -1 -o 0 1   # åªæ˜¾ç¤º &lt;GPU 0&gt; å’Œ &lt;GPU 1&gt;$ nvitop -1 -ov      # åªæ˜¾ç¤º `CUDA_VISIBLE_DEVICES` ä¸­çš„ GPU$ nvitop -1 -U       # åªä½¿ç”¨ ASCII å­—ç¬¦ é€‚ç”¨äºä¸æ”¯æŒ Unicode å­—ç¬¦çš„ç»ˆç«¯# èµ„æºç›‘è§†å™¨æ¨¡å¼$ nvitop             # èµ„æºç›‘è§†å™¨$ nvitop -m auto     # èµ„æºç›‘è§†å™¨ (é€šè¿‡ç»ˆç«¯å¤§å°è‡ªåŠ¨è°ƒæ•´æ˜¾ç¤ºæ¨¡å¼ (é»˜è®¤))$ nvitop -m full     # èµ„æºç›‘è§†å™¨ (å®Œå…¨æ¨¡å¼ï¼Œæ— è§†çª—å£å¤§å°å˜åŒ–)$ nvitop -m compact  # èµ„æºç›‘è§†å™¨ (ç´§å‡‘æ¨¡å¼ï¼Œæ— è§†çª—å£å¤§å°å˜åŒ–)$ nvitop -m -o 0 1   # åªæ˜¾ç¤º &lt;GPU 0&gt; å’Œ &lt;GPU 1&gt;$ nvitop -m -ov      # åªæ˜¾ç¤º `CUDA_VISIBLE_DEVICES` ä¸­çš„ GPU$ nvitop -m -U       # åªä½¿ç”¨ ASCII å­—ç¬¦ é€‚ç”¨äºä¸æ”¯æŒ Unicode å­—ç¬¦çš„ç»ˆç«¯","tags":["Python","æ·±åº¦å­¦ä¹ ","PyTorch"]},{"title":"Python|ä¸€è¡Œä»£ç ç”ŸæˆäºŒç»´ç ","url":"/2020/02/28/%E4%BA%8C%E7%BB%B4%E7%A0%81/","content":"ç®€å•ç”ŸæˆäºŒç»´ç \näºŒç»´ç äºŒç»´ç ä¹Ÿç§°ä¸ºäºŒç»´æ¡ç ï¼Œæ˜¯æŒ‡åœ¨ä¸€ç»´æ¡ç çš„åŸºç¡€ä¸Šæ‰©å±•å‡ºå¦ä¸€ç»´å…·æœ‰å¯è¯»æ€§çš„æ¡ç ï¼Œä½¿ç”¨é»‘ç™½çŸ©å½¢å›¾æ¡ˆè¡¨ç¤ºäºŒè¿›åˆ¶æ•°æ®ï¼Œè¢«è®¾å¤‡æ‰«æåå¯è·å–å…¶ä¸­æ‰€åŒ…å«çš„ä¿¡æ¯ã€‚ä¸€ç»´æ¡ç çš„å®½åº¦è®°è½½ç€æ•°æ®ï¼Œè€Œå…¶é•¿åº¦æ²¡æœ‰è®°è½½æ•°æ®ã€‚äºŒç»´ç çš„é•¿åº¦ã€å®½åº¦å‡è®°è½½ç€æ•°æ®ã€‚äºŒç»´ç æœ‰ä¸€ç»´æ¡ç æ²¡æœ‰çš„â€œå®šä½ç‚¹â€å’Œâ€œå®¹é”™æœºåˆ¶â€ã€‚å®¹é”™æœºåˆ¶åœ¨å³ä½¿æ²¡æœ‰è¯†åˆ«åˆ°å…¨éƒ¨çš„æ¡ç ã€æˆ–æ˜¯è¯´æ¡ç æœ‰æ±¡æŸæ—¶ï¼Œä¹Ÿå¯ä»¥æ­£ç¡®åœ°è¿˜åŸæ¡ç ä¸Šçš„ä¿¡æ¯ã€‚\näºŒç»´ç åœ¨ç°å®ç”Ÿæ´»ä¸­çš„åº”ç”¨è¶Šæ¥ä¸æ™®éï¼Œå½’äºåŠŸäº QR code ç åˆ¶çš„æµè¡Œã€‚æˆ‘ä»¬å¸¸è¯´çš„äºŒç»´ç å°±æ˜¯å®ƒã€‚æ‰€ä»¥ï¼ŒäºŒç»´ç åˆè¢«ç§°ä¸º QR codeã€‚\n\nQR code æ˜¯ä¸€ç§çŸ©é˜µå¼äºŒç»´æ¡ç ï¼ˆåˆç§°æ£‹ç›˜å¼äºŒç»´æ¡ç ï¼‰ã€‚å®ƒæ˜¯åœ¨ä¸€ä¸ªçŸ©å½¢ç©ºé—´é€šè¿‡é»‘ã€ç™½åƒç´ åœ¨çŸ©é˜µä¸­çš„ä¸åŒåˆ†å¸ƒè¿›è¡Œç¼–ç ã€‚åœ¨çŸ©é˜µç›¸åº”å…ƒç´ ä½ç½®ä¸Šï¼Œç”¨ç‚¹ï¼ˆæ–¹ç‚¹ã€åœ†ç‚¹æˆ–å…¶ä»–å½¢çŠ¶ï¼‰çš„å‡ºç°è¡¨ç¤ºäºŒè¿›åˆ¶â€œ1â€ï¼Œç‚¹çš„ä¸å‡ºç°è¡¨ç¤ºäºŒè¿›åˆ¶çš„â€œ0â€ï¼Œç‚¹çš„æ’åˆ—ç»„åˆç¡®å®šäº†çŸ©é˜µå¼äºŒç»´æ¡ç æ‰€ä»£è¡¨çš„æ„ä¹‰ã€‚\n\näºŒç»´ç çš„ç”Ÿæˆå®‰è£…å·¥å…· Myqrï¼špip install myqrç”Ÿæˆä¸€ä¸ªæ™®é€šäºŒç»´ç ï¼šmyqr https://mengqiu233.github.ioè¿™æ—¶å°±ä¼šåœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªåç§°ä¸º qrcode.png çš„äºŒç»´ç \n\næ³¨æ„è¿™é‡Œçš„å­—ç¬¦ä¸²ä¸èƒ½æŒ‡å®šä¸­æ–‡\n\n\n\n\n\nå‘½ä»¤\nä½œç”¨\n~\n\n\n\n\n-d\nè¾“å‡ºçš„æ–‡ä»¶è·¯å¾„\n\n\n-n\næ–‡ä»¶åç§°\n.jpg .png .gif\n\n\n-l\näºŒç»´ç çš„çº é”™ç­‰çº§\nLã€Mã€Qã€Hï¼Œä»å·¦åˆ°å³ä¾æ¬¡å‡é«˜\n\n\n-v\näºŒç»´ç çš„è¾¹é•¿\nèŒƒå›´æ˜¯ 1 è‡³ 40ï¼Œæ•°å­—è¶Šå¤§è¾¹é•¿è¶Šå¤§\n\n\n-p\næ·»åŠ å›¾ç‰‡\n\n\n\n\næ¯”å¦‚å°†å›¾ç‰‡ç»“åˆåˆ°äºŒç»´ç ä¸­myqr https://mengqiu233.github.io/ -p tree.jpg -c\n","tags":["Python"]},{"title":"Python|åŸºäºBOFç®—æ³•çš„å›¾åƒæ£€ç´¢","url":"/2019/07/07/BOF/","content":"BoF(Bag of features)ç®—æ³•åœ¨å›¾åƒåˆ†ç±»ä¸­å…·æœ‰ç€é‡è¦çš„ä½œç”¨\nç®€ä»‹Bag of Featuresæ–¹æ³•ä»¿ç…§æ–‡æœ¬æ£€ç´¢é¢†åŸŸçš„Bag-of-Wordsæ–¹æ³•ï¼ŒæŠŠæ¯å¹…å›¾åƒæè¿°ä¸ºä¸€ä¸ªå±€éƒ¨åŒºåŸŸ/å…³é”®ç‚¹(Patches/Key Points)ç‰¹å¾çš„æ— åºé›†åˆã€‚ä½¿ç”¨æŸç§èšç±»ç®—æ³•(å¦‚K-means)å°†å±€éƒ¨ç‰¹å¾è¿›è¡Œèšç±»ï¼Œæ¯ä¸ªèšç±»ä¸­å¿ƒè¢«çœ‹ä½œæ˜¯è¯å…¸ä¸­çš„ä¸€ä¸ªè§†è§‰è¯æ±‡(Visual Word)ï¼Œç›¸å½“äºæ–‡æœ¬æ£€ç´¢ä¸­çš„è¯ï¼Œè§†è§‰è¯æ±‡ç”±èšç±»ä¸­å¿ƒå¯¹åº”ç‰¹å¾å½¢æˆçš„ç å­—(code word)æ¥è¡¨ç¤ºã€‚å›¾åƒä¸­çš„æ¯ä¸ªç‰¹å¾éƒ½å°†è¢«æ˜ å°„åˆ°è§†è§‰è¯å…¸çš„æŸä¸ªè¯ä¸Šï¼Œè¿™ç§æ˜ å°„å¯ä»¥é€šè¿‡è®¡ç®—ç‰¹å¾é—´çš„è·ç¦»å»å®ç°ï¼Œç„¶åç»Ÿè®¡æ¯ä¸ªè§†è§‰è¯æ±‡çš„å‡ºç°ä¸å¦æˆ–æ¬¡æ•°ï¼Œå›¾åƒå¯æè¿°ä¸ºä¸€ä¸ªç»´æ•°ç›¸åŒçš„ç›´æ–¹å›¾å‘é‡ã€‚\nåŸºæœ¬æµç¨‹åŸºæœ¬æµç¨‹å¯ä»¥åˆ†ä¸ºå››æ­¥ï¼š\nç‰¹å¾æå–ä»åŸå§‹å›¾åƒä¸­æå–ç‰¹å¾ï¼Œå¸¸ç”¨çš„ç‰¹å¾æå–æ–¹æ³•æœ‰SIFTï¼ŒSURFã€‚SIFTå¾—åˆ°çš„ç‰¹å¾æè¿°æ˜¯128ç»´åº¦çš„å‘é‡ï¼Œç›¸æ¯”SISFï¼ŒSURFè®¡ç®—é‡æ›´å°äº›ï¼Œå¾—åˆ°çš„ç‰¹å¾æ˜¯64ç»´çš„å‘é‡ã€‚ä¹Ÿæœ‰ä½¿ç”¨HoGå’ŒLBPæ¥è¿›è¡Œç‰¹å¾æå–çš„ã€‚æ³¨æ„ç‰¹å¾æå–çš„æ–¹æ³•è¦æ»¡è¶³æ—‹è½¬ä¸å˜æ€§ä»¥åŠå°ºå¯¸ä¸å˜æ€§ã€‚\nå­—å…¸ç”Ÿæˆå¯¹æ‰€æœ‰çš„å›¾ç‰‡æå–å®Œç‰¹å¾åï¼Œå°†æ‰€æœ‰çš„ç‰¹å¾è¿›è¡Œèšç±»ï¼Œæ¯”å¦‚ä½¿ç”¨K-Meansèšç±»ï¼Œå¾—åˆ°Kç±»ï¼Œæ¯ä¸ªç±»åˆ«çœ‹ä½œä¸€ä¸ªwordï¼Œè¿™æ ·æˆ‘ä»¬å°±å¾—åˆ°äº†å­—å…¸ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚\nç›´æ–¹å›¾è¡¨ç¤ºä¸Šä¸€æ­¥è®­ç»ƒå¾—åˆ°çš„å­—å…¸ï¼Œæ˜¯ä¸ºäº†è¿™ä¸€æ­¥å¯¹å›¾åƒç‰¹å¾è¿›è¡Œé‡åŒ–ã€‚å¯¹äºä¸€å¹…å›¾åƒè€Œè¨€ï¼Œæˆ‘ä»¬å¯ä»¥æå–å‡ºå¤§é‡çš„ç‰¹å¾ï¼Œä½†è¿™äº›ç‰¹å¾(å¦‚SIFTæå–çš„ç‰¹å¾)ä»ç„¶å±äºä¸€ç§æµ…å±‚çš„è¡¨ç¤ºï¼Œç¼ºä¹ä»£è¡¨æ€§ã€‚å› æ­¤ï¼Œè¿™ä¸€æ­¥çš„ç›®æ ‡ï¼Œæ˜¯æ ¹æ®å­—å…¸é‡æ–°æå–å›¾åƒçš„é«˜å±‚ç‰¹å¾ã€‚å…·ä½“åšæ³•æ˜¯ï¼Œå¯¹äºæ¯ä¸€å¼ å›¾ç‰‡å¾—åˆ°çš„æ¯ä¸€ä¸ªç‰¹å¾(å¦‚SIFTæå–çš„ç‰¹å¾)ï¼Œéƒ½å¯ä»¥åœ¨å­—å…¸ä¸­æ‰¾åˆ°ä¸€ä¸ªæœ€ç›¸ä¼¼çš„word(å®é™…ä¸Šå°±æ˜¯å°†ç‰¹å¾è¾“å…¥åˆ°å¾—åˆ°çš„èšç±»æ¨¡å‹ï¼Œå¾—åˆ°ç±»åˆ«)ï¼Œç»Ÿè®¡ç›¸ä¼¼çš„æ¯ç§wordçš„æ•°é‡ï¼Œäºæ˜¯å°±å¾—åˆ°ä¸€ä¸ªKç»´çš„ç›´æ–¹å›¾ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚\nè®­ç»ƒåˆ†ç±»å™¨å¯¹äºæ¯å¼ å›¾ç‰‡ï¼Œæˆ‘ä»¬å¾—åˆ°äº†å…¶å¯¹åº”çš„ç›´æ–¹å›¾å‘é‡ï¼Œå½“ç„¶ä¹ŸçŸ¥é“å…¶å¯¹åº”çš„å±äºå“ªç§ç‰©å“çš„æ ‡è®°ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æ„é€ è®­ç»ƒé›†æ¥è®­ç»ƒæŸç§åˆ†ç±»å™¨ã€‚å½“éœ€è¦è¿›è¡Œé¢„æµ‹æ—¶ï¼Œæˆ‘ä»¬å…ˆæµ‹è¯•é›†çš„å›¾ç‰‡ä¸­æå–ç‰¹å¾ï¼Œç„¶ååˆ©ç”¨å­—å…¸é‡åŒ–å¾—åˆ°ç›´æ–¹å›¾ï¼Œè¾“å…¥è®­ç»ƒå¥½çš„åˆ†ç±»å™¨ï¼Œå¾—åˆ°é¢„æµ‹çš„ç±»åˆ«ã€‚\nç®—æ³•å®ç°æ•°æ®é¢„å¤„ç†æœ¬æ¬¡å®éªŒé‡‡ç”¨äº†ä¸‰ä¸ªç±»åˆ«ï¼š[â€˜aeroplaneâ€™, â€˜bicycleâ€™, â€˜carâ€™]ï¼Œåœ¨trainæ–‡ä»¶å¤¹ä¸‹æœ‰ä¸‰ä¸ªå­æ–‡ä»¶å¤¹è¡¨ç¤ºå„ç±»ã€‚def read_paths(path):    # è·å–è®­ç»ƒæ•°æ®ç±»åˆ«    training_names = os.listdir(path)    # è·å–å›¾ç‰‡è·¯å¾„åŠæ ‡ç­¾    image_paths = [] # è·å–æ‰€æœ‰å›¾ç‰‡è·¯å¾„    image_classes = [] #è®°å½•æ¯å¼ å›¾ç‰‡çš„æ ‡ç­¾ï¼Œ[0,...,0,1,...,1,2,...,2]    class_id = 0    for training_name in training_names:        name = os.path.join(path, training_name)        class_path = list(paths.list_images(name))        image_paths += class_path        image_classes += [class_id] * len(class_path)        class_id += 1    print(&quot;Label \\t\\t  count&quot;)    print(&quot;---------------------&quot;)    i = 0    for training_name in training_names:        print(&#x27;&#123;0:10&#125; &#123;1:6d&#125;&#x27;.format(training_name, image_classes.count(i)))        i += 1    print(&quot;\\n&quot;)    return training_names, image_paths, image_classes\næå–å›¾åƒç‰¹å¾è¿™é‡Œé‡‡ç”¨çš„æ˜¯OpenCVè‡ªå¸¦çš„SIFTç®—æ³•ç”Ÿæˆå›¾åƒåº“ä¸­æ¯å¹…å›¾çš„ç‰¹å¾ç‚¹åŠæè¿°ç¬¦ã€‚#åˆ›å»ºç‰¹å¾æå–å’Œå…³é”®ç‚¹æ£€æµ‹å™¨å¯¹è±¡sift=cv2.xfeatures2d.SIFT_create()# ç‰¹å¾æå–ä¸æè¿°å­ç”Ÿæˆdes_list = []for image_path in image_paths:    im = cv2.imread(image_path)    kpts, des = sift.detectAndCompute(im, None)    des_list.append((image_path, des))    print(&quot;image file path : &quot;, image_path)# æè¿°å­å‘é‡èšåˆdescriptors = des_list[0][1]for image_path, descriptor in des_list[1:]:    descriptors = np.vstack((descriptors, descriptor))\nå¯¹ç‰¹å¾è¿›è¡Œèšç±»# kmeansèšç±»k = 100voc,_= kmeans(descriptors, k, 1)\næ ¹æ®å­—å…¸å°†å›¾ç‰‡è¡¨ç¤ºæˆå‘é‡# ç”Ÿæˆç‰¹å¾ç›´æ–¹å›¾im_features = np.zeros((len(image_paths), k), &quot;float32&quot;)for i in range(len(image_paths)):    words, distance = vq(des_list[i][1], voc)    for w in words:        im_features[i][w] += 1\n\nç‰¹å¾é›†è¿›è¡ŒåŠ æƒåŠé‡åŒ–åœ¨ä¸€ç¯‡æ–‡æ¡£é‡Œï¼Œâ€œçš„â€â€œä½ â€â€œæˆ‘â€ç­‰å­—çœ¼çš„å‡ºç°é¢‘ç‡é«˜ï¼Œé‚£ä¹ˆè¿™äº›wordåœ¨ç›´æ–¹å›¾ä¸Šçš„binå°±ä¼šæ¯”è¾ƒé«˜ï¼Œå¹¶ä¸”åœ¨æ¯ç¯‡æ–‡æ¡£é‡Œéƒ½ä¼šå‡ºç°ï¼Œä½†æ˜¯è¿™äº›å¹¶ä¸èƒ½ä½œä¸ºæ–‡æ¡£çš„æ ‡è¯†ï¼Œå› æ­¤è¦å¼±åŒ–è¿™äº›å…±æ€§ç‰¹å¾çš„æƒé‡ã€‚\n\nè¿™é‡Œé‡‡ç”¨äº†TF-IDFåŠ æƒTF:å¦‚æœæŸä¸ªå…³é”®è¯åœ¨ä¸€ç¯‡æ–‡ç« ä¸­å‡ºç°çš„é¢‘ç‡é«˜ï¼Œè¯´æ˜è¯¥è¯è¯­èƒ½å¤Ÿè¡¨å¾æ–‡ç« çš„å†…å®¹ï¼Œè¯¥å…³é”®è¯åœ¨å…¶å®ƒæ–‡ç« ä¸­å¾ˆå°‘å‡ºç°ï¼Œåˆ™è®¤ä¸ºæ­¤è¯è¯­å…·æœ‰å¾ˆå¥½çš„ç±»åˆ«åŒºåˆ†åº¦ï¼Œå¯¹åˆ†ç±»æœ‰å¾ˆå¤§çš„è´¡çŒ®ã€‚IDF:å¦‚æœæ–‡ä»¶æ•°æ®åº“ä¸­åŒ…å«è¯è¯­Açš„æ–‡ä»¶è¶Šå°‘ï¼Œåˆ™IDFè¶Šå¤§ï¼Œè¯´æ˜è¯è¯­Aå…·æœ‰å¾ˆå¥½çš„ç±»åˆ«åŒºåˆ†èƒ½åŠ›ã€‚# TF-IDFnbr = np.sum((im_features &gt; 0) * 1, axis=0)idf = np.array(np.log((1.0 * len(image_paths) + 1) / (1.0 * nbr + 1)), &#x27;float32&#x27;)im_features = im_features * idftf = np.zeros((len(image_paths), k), &quot;float32&quot;)for i in range(len(image_paths)):     tf[i] = im_features[i] / (np.sum(im_features, axis=1)[i])     im_features[i] = im_features[i] * tf[i]# å°ºåº¦åŒ–stdSlr = StandardScaler().fit(im_features)im_features = stdSlr.transform(im_features)\nè®­ç»ƒåˆ†ç±»å™¨clf = LinearSVC()clf.fit(im_features, np.array(image_classes))\næœ€åå¯ä»¥å°†è®­ç»ƒçš„ç»“æœæ‰“åŒ…å¹¶ä¿å­˜print(&quot;training and save model...&quot;)sklearn.externals.joblib.dump((clf, training_names,std_slr, k, voc, idf), &quot;bof.pkl&quot;, compress=3)print(&quot;========================================&quot;)\né¢„æµ‹å¹¶æµ‹è¯•é¢„æµ‹æ­¥éª¤å’Œè®­ç»ƒç›¸ä¼¼ï¼Œå…ˆæå–å›¾åƒç‰¹å¾ï¼Œå°†æå–çš„å›¾åƒç‰¹å¾åŠ æƒå¹¶å°ºåº¦åŒ–ï¼Œä»£å…¥è®­ç»ƒå¥½çš„åˆ†ç±»å™¨def predict_image(image_path):    clf, classes_names, std_slr, k, voc, idf = sklearn.externals.joblib.load(&quot;bof.pkl&quot;)    sift = cv2.xfeatures2d.SIFT_create()    im = cv2.imread(image_path, cv2.IMREAD_GRAYSCALE)    kpts, des = sift.detectAndCompute(im, None)    test_features = np.zeros((1, k), &quot;float32&quot;)    words, distance = vq(des, voc)    for w in words:        test_features[0][w] += 1    test_features = test_features * idf    tf = test_features / np.sum(test_features, axis=1)    test_features = test_features * tf    # Scale the features    test_features = std_slr.transform(test_features)    # Perform the predictions    predictions = [classes_names[i] for i in clf.predict(test_features)]    return predictionsè¯»å–æµ‹è¯•æ•°æ®ï¼Œå¹¶è¾“å‡ºç»“æœdef test(test_path):    _, image_paths, _ = read_paths(test_path)    i = 0    for image_path in image_paths:        i += 1        predictions = predict_image(image_path)        img = cv2.imread(image_path)        img = cv2.resize(img, (int(img.shape[1]*2), int(img.shape[0] * 2))) #å›¾ç‰‡æ‰©å¤§ä¸¤å€        output=cv2.putText(img, predictions[0], (10, 150), cv2.FONT_HERSHEY_COMPLEX, 2.0, (100, 200, 200), 5)        cv2.imshow(image_path, output)        cv2.waitKey(0)        print(&quot;image%d: %s, classes : %s&quot; % (i, image_path, predictions))\n\nä»£ç import osimport cv2import numpy as npimport sklearn.externalsfrom imutils import pathsfrom sklearn.svm import LinearSVCfrom scipy.cluster.vq import *from sklearn.preprocessing import StandardScalerdef read_paths(path):    # è·å–è®­ç»ƒæ•°æ®ç±»åˆ«    training_names = os.listdir(path)    # è·å–å›¾ç‰‡è·¯å¾„åŠæ ‡ç­¾    image_paths = [] # è·å–æ‰€æœ‰å›¾ç‰‡è·¯å¾„    image_classes = [] #è®°å½•æ¯å¼ å›¾ç‰‡çš„æ ‡ç­¾ï¼Œ[0,...,0,1,...,1,2,...,2]    class_id = 0    for training_name in training_names:        name = os.path.join(path, training_name)        class_path = list(paths.list_images(name))        image_paths += class_path        image_classes += [class_id] * len(class_path)        class_id += 1    print(&quot;Label \\t\\t  count&quot;)    print(&quot;---------------------&quot;)    i = 0    for training_name in training_names:        print(&#x27;&#123;0:10&#125; &#123;1:6d&#125;&#x27;.format(training_name, image_classes.count(i)))        i += 1    print(&quot;\\n&quot;)    return training_names, image_paths, image_classesdef train(train_path):    training_names, image_paths, image_classes = read_paths(train_path)    # åˆ›å»ºSIFTç‰¹å¾æå–å™¨    sift = cv2.xfeatures2d.SIFT_create()    # ç‰¹å¾æå–ä¸æè¿°å­ç”Ÿæˆ    des_list = []    for image_path in image_paths:        im = cv2.imread(image_path)        kpts, des = sift.detectAndCompute(im, None)        des_list.append(des)    # æè¿°å­å‘é‡    descriptors = des_list[0]    for descriptor in des_list[1:]:        descriptors = np.vstack((descriptors, descriptor))    # 100 èšç±» K-Means    k = 100    voc, _ = kmeans(descriptors, k, 1)    # ç”Ÿæˆç‰¹å¾ç›´æ–¹å›¾    im_features = np.zeros((len(image_paths), k), &quot;float32&quot;)    for i in range(len(image_paths)):        words, distance = vq(des_list[i], voc)        for w in words:            im_features[i][w] += 1    # TF-IDF    nbr = np.sum((im_features &gt; 0) * 1, axis=0)    idf = np.array(np.log((1.0 * len(image_paths) + 1) / (1.0 * nbr + 1)), &#x27;float32&#x27;)    im_features = im_features * idf    tf = np.zeros((len(image_paths), k), &quot;float32&quot;)    for i in range(len(image_paths)):        tf[i] = im_features[i] / (np.sum(im_features, axis=1)[i])        im_features[i] = im_features[i] * tf[i]    # å°ºåº¦åŒ–    std_slr = StandardScaler().fit(im_features)    im_features = std_slr.transform(im_features)    # SVM    clf = LinearSVC()    clf.fit(im_features, np.array(image_classes))    # Save the SVM    print(&quot;training and save model...&quot;)    sklearn.externals.joblib.dump((clf, training_names, std_slr, k, voc, idf), &quot;bof.pkl&quot;, compress=3)    print(&quot;========================================&quot;)def predict_image(image_path):    clf, classes_names, std_slr, k, voc, idf = sklearn.externals.joblib.load(&quot;bof.pkl&quot;)    sift = cv2.xfeatures2d.SIFT_create()    im = cv2.imread(image_path, cv2.IMREAD_GRAYSCALE)    kpts, des = sift.detectAndCompute(im, None)    test_features = np.zeros((1, k), &quot;float32&quot;)    words, distance = vq(des, voc)    for w in words:        test_features[0][w] += 1    test_features = test_features * idf    tf = test_features / np.sum(test_features, axis=1)    test_features = test_features * tf    # Scale the features    test_features = std_slr.transform(test_features)    # Perform the predictions    predictions = [classes_names[i] for i in clf.predict(test_features)]    return predictionsdef test(test_path):    _, image_paths, _ = read_paths(test_path)    i = 0    for image_path in image_paths:        i += 1        predictions = predict_image(image_path)        print(&quot;image%d: %s, classes : %s&quot; % (i, image_path, predictions))if __name__ == &quot;__main__&quot;:    train_path = &quot;C:/Code/Picture/dataset/train/&quot;    train(train_path)    test_path = &quot;C:/Code/Picture/dataset/test/&quot;    test(test_path)\nç¼ºé™·\nå­—å…¸å¤§å°çš„é€‰æ‹©ä¹Ÿæ˜¯é—®é¢˜ï¼Œå­—å…¸è¿‡å¤§ï¼Œå•è¯ç¼ºä¹ä¸€èˆ¬æ€§ï¼Œå¯¹å™ªå£°æ•æ„Ÿï¼Œè®¡ç®—é‡å¤§ï¼Œå…³é”®æ˜¯å›¾è±¡æŠ•å½±åçš„ç»´æ•°é«˜ï¼›å­—å…¸å¤ªå°ï¼Œå•è¯åŒºåˆ†æ€§èƒ½å·®ï¼Œå¯¹ç›¸ä¼¼çš„ç›®æ ‡ç‰¹å¾æ— æ³•è¡¨ç¤ºã€‚\nè¿™ç§ä¸€ä¸ªç‰¹å¾ç‚¹å¯¹åº”äºä¸€ä¸ªè¯çš„æ–¹æ³•æ˜¾ç„¶å¿½ç•¥å›¾åƒç©ºé—´ä¸Šä¸‹æ–‡ï¼Œè¿™å¾ˆå®¹æ˜“é€ æˆè¯è¯­ä¹‰çš„æ¨¡ç³Šã€‚\nå›¾åƒä¸­ä¸€èˆ¬éƒ½å­˜åœ¨åŒä¸»é¢˜æ— å…³çš„å†…å®¹ï¼Œä¼šå½±å“åˆ†ç±»çš„ç»“æœï¼Œæ”¹è¿›æ–¹æ³•æ˜¯æ£€æµ‹å…´è¶£åŒºåŸŸå¹¶ç»™ä¸åŒçš„æƒé‡ã€‚\n\n","tags":["Python","BOF","OpenCV","SIFT","Kmeans"]},{"title":"Math|è·ç¦»è®¡ç®—","url":"/2019/06/28/%E8%B7%9D%E7%A6%BB%E8%AE%A1%E7%AE%97/","content":"æœºå™¨å­¦ä¹ å¸¸ç”¨è·ç¦»è®¡ç®—æ€»ç»“\næ›¼å“ˆé¡¿è·ç¦»æ›¼å“ˆé¡¿è·ç¦»ï¼ˆManhattan Distanceï¼‰åˆç§°è®¡ç¨‹è½¦å‡ ä½•è·ç¦»æˆ–æ–¹æ ¼çº¿è·ç¦»ï¼Œæ˜¯ç”±åä¹ä¸–çºªçš„èµ«å°”æ›¼Â·é—µå¯å¤«æ–¯åŸºæ‰€åˆ›è¯æ±‡ ï¼Œä¸ºæ¬§å‡ é‡Œå¾—å‡ ä½•åº¦é‡ç©ºé—´çš„å‡ ä½•å­¦ä¹‹ç”¨è¯­ï¼Œç”¨ä»¥æ ‡æ˜ä¸¤ä¸ªç‚¹ä¸Šåœ¨æ ‡å‡†åæ ‡ç³»ä¸Šçš„ç»å¯¹è½´è·ä¹‹æ€»å’Œã€‚æ›¼å“ˆé¡¿è·ç¦»çš„æ­£å¼æ„ä¹‰ä¸ºL1-è·ç¦»æˆ–åŸå¸‚åŒºå—è·ç¦»ï¼Œä¹Ÿå°±æ˜¯åœ¨æ¬§å‡ é‡Œå¾—ç©ºé—´çš„å›ºå®šç›´è§’åæ ‡ç³»ä¸Šä¸¤ç‚¹æ‰€å½¢æˆçš„çº¿æ®µå¯¹è½´äº§ç”Ÿçš„æŠ•å½±çš„è·ç¦»æ€»å’Œã€‚æ›¼å“ˆé¡¿è·ç¦»å…¬å¼ä¸º\nd=\\sum_{i=1}^n|x_i-y_i|æ¬§å‡ é‡Œå¾—è·ç¦»æ¬§å‡ é‡Œå¾—åº¦é‡ï¼ˆEuclidean Distanceï¼‰ä¹Ÿç§°æ¬§æ°è·ç¦»ï¼š åœ¨æ•°å­¦ä¸­ï¼Œæ¬§å‡ é‡Œå¾—è·ç¦»æˆ–æ¬§å‡ é‡Œå¾—åº¦é‡æ˜¯æ¬§å‡ é‡Œå¾—ç©ºé—´ä¸­ä¸¤ç‚¹é—´â€œæ™®é€šâ€ï¼ˆå³ç›´çº¿ï¼‰è·ç¦»ã€‚åœ¨æ¬§å‡ é‡Œå¾—ç©ºé—´ä¸­ï¼Œç‚¹$x=\\left(x{1}, x{2}, \\ldots, x{n}\\right)$å’Œ$y=\\left(y{1}, y{2}, \\ldots, y{n}\\right)$ä¹‹é—´çš„æ¬§æ°è·ç¦»ä¸º:\nd=\\sqrt{\\sum_{i=1}^{n}\\left(x_{i}-y_{i}\\right)^{2}}åˆ‡æ¯”é›ªå¤«è·ç¦»æ•°å­¦ä¸Šï¼Œåˆ‡æ¯”é›ªå¤«è·ç¦»ï¼ˆChebyshev distanceï¼‰æˆ–æ˜¯$L_{\\infty}$åº¦é‡æ˜¯å‘é‡ç©ºé—´ä¸­çš„ä¸€ç§åº¦é‡ï¼ŒäºŒä¸ªç‚¹ä¹‹é—´çš„è·ç¦»å®šä¹‰ä¸ºå…¶å„åº§æ ‡æ•°å€¼å·®çš„æœ€å¤§å€¼ã€‚ä»¥p(x1,y1)å’Œq(x2,y2)äºŒç‚¹ä¸ºä¾‹ï¼Œå…¶åˆ‡æ¯”é›ªå¤«è·ç¦»ä¸ºï¼š\nD_{\\text {Chebyshev}}(p, q)=\\max \\left(\\left|x_{2}-x_{1}\\right|,\\left|y_{2}-y_{1}\\right|\\right)ä¸€èˆ¬å½¢å¼ä¸ºï¼š\nD_{\\text { Chebyshev }}(p, q)=\\max _{i}\\left(\\left|p_{i}-q_{i}\\right|\\right)=\\lim _{k \\rightarrow \\infty}\\left(\\sum_{i=1}^{n}\\left|p_{i}-q_{i}\\right|^{k}\\right)^{1 / k}é—µå¯å¤«æ–¯åŸºè·ç¦»é—µå¯å¤«æ–¯åŸºè·ç¦»æˆ–é—µæ°è·ç¦»ï¼ˆMinkowski Distanceï¼‰ï¼šä»¥ä¿„ç½—æ–¯æ•°å­¦å®¶é—µå¯å¤«æ–¯åŸºå‘½åçš„è·ç¦»ï¼›æ˜¯æ¬§å¼è·ç¦»çš„æ¨å¹¿ï¼Œé—µæ°è·ç¦»ä¸æ˜¯ä¸€ç§è·ç¦»ï¼Œè€Œæ˜¯ä¸€ç»„è·ç¦»çš„å®šä¹‰ã€‚å…¶å®šä¹‰å¦‚ä¸‹ï¼š\nd=\\sqrt[p]{\\sum_{i=1}^{n}\\left|x_{i}-y_{i}\\right|^{p}}ä»ä¸Šé¢å…¬å¼å¯ä»¥çœ‹å‡ºï¼šå½“$p=1$æ—¶ï¼Œå°±æ˜¯æ›¼å“ˆé¡¿è·ç¦»å½“$p=2$æ—¶ï¼Œå°±æ˜¯æ¬§æ°è·ç¦»å½“$p \\rightarrow \\infty$æ—¶ï¼Œå°±æ˜¯åˆ‡æ¯”é›ªå¤«è·ç¦»\né©¬æ°è·ç¦»é©¬æ°è·ç¦»(Mahalanobis distance)ï¼š ç”±å°åº¦ç»Ÿè®¡å­¦å®¶é©¬å“ˆæ‹‰è¯ºæ¯”æ–¯æå‡ºï¼Œè¡¨ç¤ºæ•°æ®çš„åæ–¹å·®è·ç¦»ã€‚å®ƒæ˜¯ä¸€ç§æœ‰æ•ˆçš„è®¡ç®—ä¸¤ä¸ªæœªçŸ¥æ ·æœ¬é›†çš„ç›¸ä¼¼åº¦çš„æ–¹æ³•ã€‚ä¸æ¬§æ°è·ç¦»ä¸åŒçš„æ˜¯å®ƒè€ƒè™‘åˆ°å„ç§ç‰¹æ€§ä¹‹é—´çš„è”ç³»ï¼ˆä¾‹å¦‚ï¼šä¸€æ¡å…³äºèº«é«˜çš„ä¿¡æ¯ä¼šå¸¦æ¥ä¸€æ¡å…³äºä½“é‡çš„ä¿¡æ¯ï¼Œå› ä¸ºä¸¤è€…æ˜¯æœ‰å…³è”çš„ï¼‰å¹¶ä¸”æ˜¯å°ºåº¦æ— å…³çš„(scale-invariant)ï¼Œå³ç‹¬ç«‹äºæµ‹é‡å°ºåº¦ï¼Œå¦‚æœåæ–¹å·®çŸ©é˜µä¸ºå•ä½çŸ©é˜µï¼Œé©¬æ°è·ç¦»å°±ç®€åŒ–ä¸ºæ¬§å¼è·ç¦»ï¼Œå¦‚æœåæ–¹å·®çŸ©é˜µä¸ºå¯¹è§’é˜µï¼Œå…¶ä¹Ÿå¯ç§°ä¸ºæ­£è§„åŒ–çš„é©¬æ°è·ç¦»ã€‚ è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š\nD_{M}(x)=\\sqrt{(x-\\mu)^{T} \\Sigma^{-1}(x-\\mu)}é©¬æ°è·ç¦»ä¹Ÿå¯ä»¥å®šä¹‰ä¸ºä¸¤ä¸ªæœä»åŒä¸€åˆ†å¸ƒå¹¶ä¸”å…¶åæ–¹å·®çŸ©é˜µä¸º$\\Sigma$çš„éšæœºå˜é‡$\\vec{x}$ä¸$\\vec{y}$çš„å·®å¼‚ç¨‹åº¦ï¼š\nd(\\vec{x}, \\vec{y})=\\sqrt{(\\vec{x}-\\vec{y})^{T} \\Sigma^{-1}(\\vec{x}-\\vec{y})}æ±‰æ˜è·ç¦»åœ¨ä¿¡æ¯è®ºä¸­ï¼Œä¸¤ä¸ªç­‰é•¿å­—ç¬¦ä¸²ä¹‹é—´çš„æ±‰æ˜è·ç¦»ï¼ˆHamming distanceï¼‰æ˜¯ä¸¤ä¸ªå­—ç¬¦ä¸²å¯¹åº”ä½ç½®çš„ä¸åŒå­—ç¬¦çš„ä¸ªæ•°ã€‚æ¢å¥è¯è¯´ï¼Œå®ƒå°±æ˜¯å°†ä¸€ä¸ªå­—ç¬¦ä¸²å˜æ¢æˆå¦å¤–ä¸€ä¸ªå­—ç¬¦ä¸²æ‰€éœ€è¦æ›¿æ¢çš„å­—ç¬¦ä¸ªæ•°ã€‚\n\n1011101 ä¸ 1001001 ä¹‹é—´çš„æ±‰æ˜è·ç¦»æ˜¯ 2ã€‚2143896 ä¸ 2233796 ä¹‹é—´çš„æ±‰æ˜è·ç¦»æ˜¯ 3ã€‚â€œtonedâ€ ä¸ â€œrosesâ€ ä¹‹é—´çš„æ±‰æ˜è·ç¦»æ˜¯ 3ã€‚\n\nä½™å¼¦ç›¸ä¼¼åº¦ä½™å¼¦ç›¸ä¼¼åº¦é€šè¿‡æµ‹é‡ä¸¤ä¸ªå‘é‡çš„å¤¹è§’çš„ä½™å¼¦å€¼æ¥åº¦é‡å®ƒä»¬ä¹‹é—´çš„ç›¸ä¼¼æ€§ã€‚0åº¦è§’çš„ä½™å¼¦å€¼æ˜¯1ï¼Œè€Œå…¶ä»–ä»»ä½•è§’åº¦çš„ä½™å¼¦å€¼éƒ½ä¸å¤§äº1ï¼›å¹¶ä¸”å…¶æœ€å°å€¼æ˜¯-1ã€‚ä»è€Œä¸¤ä¸ªå‘é‡ä¹‹é—´çš„è§’åº¦çš„ä½™å¼¦å€¼ç¡®å®šä¸¤ä¸ªå‘é‡æ˜¯å¦å¤§è‡´æŒ‡å‘ç›¸åŒçš„æ–¹å‘ã€‚ä¸¤ä¸ªå‘é‡æœ‰ç›¸åŒçš„æŒ‡å‘æ—¶ï¼Œä½™å¼¦ç›¸ä¼¼åº¦çš„å€¼ä¸º1ï¼›ä¸¤ä¸ªå‘é‡å¤¹è§’ä¸º90Â°æ—¶ï¼Œä½™å¼¦ç›¸ä¼¼åº¦çš„å€¼ä¸º0ï¼›ä¸¤ä¸ªå‘é‡æŒ‡å‘å®Œå…¨ç›¸åçš„æ–¹å‘æ—¶ï¼Œä½™å¼¦ç›¸ä¼¼åº¦çš„å€¼ä¸º-1ã€‚è¿™ç»“æœæ˜¯ä¸å‘é‡çš„é•¿åº¦æ— å…³çš„ï¼Œä»…ä»…ä¸å‘é‡çš„æŒ‡å‘æ–¹å‘ç›¸å…³ã€‚ä½™å¼¦ç›¸ä¼¼åº¦é€šå¸¸ç”¨äºæ­£ç©ºé—´ï¼Œå› æ­¤ç»™å‡ºçš„å€¼ä¸º0åˆ°1ä¹‹é—´ã€‚ç»™å®šä¸¤ä¸ªå±æ€§å‘é‡ï¼ŒAå’ŒBï¼Œå…¶ä½™å¼¦ç›¸ä¼¼æ€§Î¸ç”±ç‚¹ç§¯å’Œå‘é‡é•¿åº¦ç»™å‡ºï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n\\cos \\theta=\\frac{A \\cdot B}{\\|A\\|\\|B\\|}=\\frac{\\sum_{i=1}^{n} A_{i} \\times B_{i}}{\\sqrt{\\sum_{i=1}^{n}\\left(A_{i}\\right)^{2}} \\times \\sqrt{\\sum_{i=1}^{n}\\left(B_{i}\\right)^{2}}}æ°å¡å¾·è·ç¦»æ°å¡å¾·è·ç¦»(Jaccard Distance) ï¼šå®ƒæ˜¯æ°å¡å¾·ç›¸ä¼¼ç³»æ•°çš„è¡¥é›†ï¼Œè¢«å®šä¹‰ä¸º1å‡å»Jaccardç›¸ä¼¼ç³»æ•°ã€‚è€Œæ°å¡å¾·ç›¸ä¼¼ç³»æ•°(Jaccard similarity coefficient)ï¼Œä¹Ÿç§°æ°å¡å¾·æŒ‡æ•°(Jaccard Index)ï¼Œæ˜¯ç”¨æ¥è¡¡é‡ä¸¤ä¸ªé›†åˆç›¸ä¼¼åº¦çš„ä¸€ç§æŒ‡æ ‡ã€‚Jaccardç›¸ä¼¼æŒ‡æ•°ç”¨æ¥åº¦é‡ä¸¤ä¸ªé›†åˆä¹‹é—´çš„ç›¸ä¼¼æ€§ï¼Œå®ƒè¢«å®šä¹‰ä¸ºä¸¤ä¸ªé›†åˆäº¤é›†çš„å…ƒç´ ä¸ªæ•°é™¤ä»¥å¹¶é›†çš„å…ƒç´ ä¸ªæ•°ã€‚\nJ(A, B)=\\frac{|A \\cap B|}{|A \\cup B|}æ°å¡å¾·è·ç¦»å¦‚ä¸‹ï¼š\nd_{J}(A, B)=1-J(A, B)=\\frac{|A \\cup B|-|A \\cap B|}{|A \\cup B|}æ€§è´¨ï¼š1ï¼‰è‹¥$Aã€B$ä¸¤ä¸ªé›†åˆéƒ½ä¸ºç©ºï¼Œåˆ™$J(A,B)=1$2ï¼‰$0 \\leq J(A, B) \\leq 1$\nçš®å°”æ£®ç›¸å…³ç³»æ•°çš®å°”æ£®ç›¸å…³ç³»æ•°ï¼ˆPearson correlation coefficientï¼‰ï¼šä¹Ÿç§°çš®å°”æ£®ç§¯çŸ©ç›¸å…³ç³»æ•°(Pearson product-moment correlation coefficient) ï¼Œæ˜¯ä¸€ç§çº¿æ€§ç›¸å…³ç³»æ•°ã€‚çš®å°”æ£®ç›¸å…³ç³»æ•°æ˜¯ç”¨æ¥åæ˜ ä¸¤ä¸ªå˜é‡çº¿æ€§ç›¸å…³ç¨‹åº¦çš„ç»Ÿè®¡é‡ã€‚ç›¸å…³ç³»æ•°ç”¨rè¡¨ç¤ºï¼Œå…¶ä¸­nä¸ºæ ·æœ¬é‡ï¼Œåˆ†åˆ«ä¸ºä¸¤ä¸ªå˜é‡çš„è§‚æµ‹å€¼å’Œå‡å€¼ã€‚ræè¿°çš„æ˜¯ä¸¤ä¸ªå˜é‡é—´çº¿æ€§ç›¸å…³å¼ºå¼±çš„ç¨‹åº¦ã€‚rçš„ç»å¯¹å€¼è¶Šå¤§è¡¨æ˜ç›¸å…³æ€§è¶Šå¼ºã€‚è®¡ç®—å…¬å¼ï¼š\n\nr=\\frac{\\sum_{i=1}^{n}\\left(X_{i}-\\overline{x}\\right)\\left(Y_{i}-\\overline{y}\\right)}{\\sqrt{\\sum_{i=1}^{n}\\left(X_{i}-\\overline{x}\\right)^{2}} \\sqrt{\\sum_{i=1}^{n}\\left(Y_{i}-\\overline{y}\\right)^{2}}}åˆ†å­æ˜¯ä¸¤ä¸ªé›†åˆçš„äº¤é›†å¤§å°ï¼Œåˆ†æ¯æ˜¯ä¸¤ä¸ªé›†åˆå¤§å°çš„å‡ ä½•å¹³å‡å€¼ã€‚æ˜¯ä½™å¼¦ç›¸ä¼¼æ€§çš„ä¸€ç§å½¢å¼\nç¼–è¾‘è·ç¦»ç¼–è¾‘è·ç¦»ï¼ˆEdit Distanceï¼‰:åˆç§°Levenshteinè·ç¦»ï¼Œæ˜¯æŒ‡ä¸¤ä¸ªå­—ä¸²ä¹‹é—´ï¼Œç”±ä¸€ä¸ªè½¬æˆå¦ä¸€ä¸ªæ‰€éœ€çš„æœ€å°‘ç¼–è¾‘æ“ä½œæ¬¡æ•°ã€‚è®¸å¯çš„ç¼–è¾‘æ“ä½œåŒ…æ‹¬å°†ä¸€ä¸ªå­—ç¬¦æ›¿æ¢æˆå¦ä¸€ä¸ªå­—ç¬¦ï¼Œæ’å…¥ä¸€ä¸ªå­—ç¬¦ï¼Œåˆ é™¤ä¸€ä¸ªå­—ç¬¦ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œç¼–è¾‘è·ç¦»è¶Šå°ï¼Œä¸¤ä¸ªä¸²çš„ç›¸ä¼¼åº¦è¶Šå¤§ã€‚ä¿„ç½—æ–¯ç§‘å­¦å®¶Vladimir Levenshteinåœ¨1965å¹´æå‡ºè¿™ä¸ªæ¦‚å¿µã€‚ç¼–è¾‘è·ç¦»è¶Šå°çš„ä¸¤ä¸ªå­—ç¬¦ä¸²è¶Šç›¸ä¼¼ï¼Œå½“ç¼–è¾‘è·ç¦»ä¸º0æ—¶ï¼Œä¸¤å­—ç¬¦ä¸²ç›¸ç­‰ã€‚\nf(n) = \\begin{cases}max(i,j) & \\text{if min(i,j)=0} \\\\ min{\\begin{cases} lev_{a,b}(i-1,j)+1 \\\\ lev_{a,b}(i,j-1)+1 \\\\ lev_{a,b}(i-1,j-1)+1_{(a_i \\neq b_j)} \\end{cases}} & \\text{otherwise.}\\end{cases}K-Læ•£åº¦K-Læ•£åº¦å³ç›¸å¯¹ç†µï¼›æ˜¯è¡¡é‡ä¸¤ä¸ªåˆ†å¸ƒ(Pã€Q)ä¹‹é—´çš„è·ç¦»ï¼›è¶Šå°è¶Šç›¸ä¼¼ã€‚è®¡ç®—å…¬å¼ï¼š\nD(P||Q)=\\sum_{i=1}^nP(i)log{P(i) \\over Q(i)}\nå‚è€ƒåšå®¢ï¼š\n[1] æœºå™¨å­¦ä¹ ä¸­å¸¸ç”¨çš„è·ç¦»å…¬å¼\n[2] å¸¸ç”¨çš„ç›¸ä¼¼æ€§åº¦é‡ç®—æ³•\n[3] æœºå™¨å­¦ä¹ å’Œç»Ÿè®¡å­¦ä¸­å¸¸è§çš„è·ç¦»å’Œç›¸ä¼¼åº¦åº¦é‡\n[4] å‡ ç§è·ç¦»åº¦é‡æ–¹æ³•æ¯”è¾ƒ\n","tags":["æœºå™¨å­¦ä¹ "]},{"title":"JAVA|MapReduce-TopN","url":"/2019/06/28/TopN/","content":"é—®é¢˜æè¿°ï¼šæœ‰ä¸€ä¸ªå¾ˆå¤§çš„æ–‡ä»¶ï¼Œè¿™æ–‡ä»¶ä¸­çš„å†…å®¹å…¨éƒ¨éƒ½æ˜¯æ•°å­—ï¼Œè¦æ±‚å°è¯•ä»è¿™ä¸ªæ–‡ä»¶ä¸­æ‰¾å‡ºæœ€å¤§çš„Nä¸ªæ•°å­—ã€‚è®¾ç½®æ•°æ®é›†data.txt14323344352436327342845945102343424436324647427668778923324\nä»£ç import java.io.IOException;import java.util.Arrays;import org.apache.hadoop.conf.Configuration;import org.apache.hadoop.fs.Path;import org.apache.hadoop.io.DoubleWritable;import org.apache.hadoop.io.IntWritable;import org.apache.hadoop.io.Text;import org.apache.hadoop.mapreduce.Job;import org.apache.hadoop.mapreduce.Mapper;import org.apache.hadoop.mapreduce.Reducer;import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;import org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;import org.apache.hadoop.util.GenericOptionsParser;public class TopN &#123;\tpublic static class TMap extends Mapper&lt;Object, Text, Text, Text&gt;&#123;\t\tint[] topN;\t\tint length;\t\t\t\tpublic void setup(Context context) throws IOException, InterruptedException &#123;\t\t\tlength = context.getConfiguration().getInt(&quot;N&quot;,5);\t\t\ttopN = new int[length+1];\t\t&#125;\t\tpublic void map(Object key, Text value, Context context) throws IOException, InterruptedException &#123;\t\t\tString data = value.toString();\t\t\tint cost = Integer.valueOf(data);\t\t\ttopN[0] = cost;\t\t\tArrays.sort(topN);\t\t&#125;\t\tprotected void cleanup(Context context) throws IOException, InterruptedException &#123;            for (int i = 1; i &lt; length+1;i++)&#123;                context.write(new Text(String.valueOf(topN[i])),new Text(String.valueOf(topN[i])));            &#125;\t\t&#125;\t&#125;\tpublic static class TReducer extends Reducer&lt;Text,Text,Text,Text&gt; &#123;\t\tint[] topN;        int length;        protected void setup(Context context) throws IOException, InterruptedException &#123;            length = context.getConfiguration().getInt(&quot;N&quot;,5);            topN = new int[length+1];        &#125;\t\t\t\tpublic void reduce(Text key, Iterable&lt;Text&gt; values, Context context) throws IOException, InterruptedException &#123;\t\t\ttopN[0] = Integer.valueOf(key.toString());\t\t\tArrays.sort(topN);\t\t&#125;\t\t\t\tprotected void cleanup(Context context) throws IOException, InterruptedException &#123;            for (int i = 1; i &lt; length+1;i++)&#123;                context.write(new Text(String.valueOf(i)),new Text(String.valueOf(topN[length-i+1])));            &#125;\t\t&#125;\t&#125;\tpublic static void main(String[] args) throws Exception &#123;\t\tConfiguration conf = new Configuration();\t\tconf.setInt(&quot;N&quot;,3);\t\tString[] otherArgs = new GenericOptionsParser(conf, args).getRemainingArgs();\t\tif (otherArgs.length &lt; 2) &#123;\t\t  System.err.println(&quot;Usage: TopN&lt;in&gt; [&lt;in&gt;...] &lt;out&gt;&quot;);\t\t  System.exit(2);\t\t&#125;\t\tJob job = Job.getInstance(conf, &quot;TopN&quot;);\t\tjob.setJarByClass(TopN.class);\t\tjob.setMapperClass(TMap.class);\t\tjob.setReducerClass(TReducer.class);\t\tjob.setOutputKeyClass(Text.class);\t\tjob.setOutputValueClass(Text.class);\t\tfor (int i = 0; i &lt; otherArgs.length - 1; ++i) &#123;\t\t\tFileInputFormat.addInputPath(job, new Path(otherArgs[i]));\t\t&#125;\t\tFileOutputFormat.setOutputPath(job,new Path(otherArgs[otherArgs.length - 1]));\t\tSystem.exit(job.waitForCompletion(true) ? 0 : 1);\t&#125;&#125;\nsetcp.batset classpath=%classpath%;C:\\Soft\\Hadoop\\etc\\hadoop;C:\\Soft\\Hadoop\\share\\hadoop\\common;C:\\Soft\\Hadoop\\share\\hadoop\\common\\lib\\*;C:\\Soft\\Hadoop\\share\\hadoop\\common\\*;C:\\Soft\\Hadoop\\share\\hadoop\\hdfs;C:\\Soft\\Hadoop\\share\\hadoop\\hdfs\\lib\\*;C:\\Soft\\Hadoop\\share\\hadoop\\hdfs\\*;C:\\Soft\\Hadoop\\share\\hadoop\\yarn;C:\\Soft\\Hadoop\\share\\hadoop\\yarn\\lib\\*;C:\\Soft\\Hadoop\\share\\hadoop\\yarn\\*;C:\\Soft\\Hadoop\\share\\hadoop\\mapreduce\\*\nåŸºæœ¬æ­¥éª¤setcpjavac TopN.javajar cvf TopN.jar *.classhadoop jar TopN.jar TopN /test /outputhadoop fs -ls /outputhadoop fs -cat /output/part-r-00000hadoop fs -rm -r /output\n","tags":["Java","åˆ†å¸ƒå¼","Hadoop","MapReduce"]},{"title":"NOTE|æœºå™¨å­¦ä¹ ","url":"/2019/06/24/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/","content":"ç›®å‰å­¦ä¹ çš„æœºå™¨å­¦ä¹ çŸ¥è¯†ç‚¹æ€»ç»“\nPerceptronåŸç†æ„ŸçŸ¥æœº(Perceptron) ç”±ä¸¤å±‚ç¥ç»å…ƒç»„æˆã€‚è¾“å…¥å±‚æ¥æ”¶å¤–ç•Œè¾“å…¥ä¿¡å·åä¼ é€’ç»™è¾“å‡ºå±‚ï¼Œ è¾“å‡ºå±‚æ˜¯M-P ç¥ç»å…ƒï¼Œäº¦ç§°â€é˜”å€¼é€»è¾‘å•å…ƒâ€ (threshold logic unit)ã€‚\næ„æˆå¯ä»¥çœ‹åˆ°ï¼Œä¸€ä¸ªæ„ŸçŸ¥å™¨æœ‰å¦‚ä¸‹ç»„æˆéƒ¨åˆ†ï¼š\n\nè¾“å…¥æƒå€¼ ä¸€ä¸ªæ„ŸçŸ¥å™¨å¯ä»¥æ¥æ”¶å¤šä¸ªè¾“å…¥$\\left(x{1}, x{2}, \\ldots, x{n} | x{i} \\in \\mathfrak{R}\\right)$ï¼Œæ¯ä¸ªè¾“å…¥ä¸Šæœ‰ä¸€ä¸ªæƒå€¼$w{i} \\in \\Re$ï¼Œæ­¤å¤–è¿˜æœ‰ä¸€ä¸ªåç½®é¡¹$b \\in \\mathfrak{R}$ï¼Œå°±æ˜¯ä¸Šå›¾ä¸­çš„$w{0}$ã€‚\næ¿€æ´»å‡½æ•° æ„ŸçŸ¥å™¨çš„æ¿€æ´»å‡½æ•°å¯ä»¥æœ‰å¾ˆå¤šé€‰æ‹©ï¼Œæ¯”å¦‚æˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¸‹é¢è¿™ä¸ªé˜¶è·ƒå‡½æ•°$f$æ¥ä½œä¸ºæ¿€æ´»å‡½æ•°ï¼šf(z)=\\left\\{\\begin{array}{ll}{1} & {z>0} \\\\ {0} & {\\text { otherwise }}\\end{array}\\right.\nè¾“å‡º æ„ŸçŸ¥å™¨çš„è¾“å‡ºç”±ä¸‹é¢è¿™ä¸ªå…¬å¼æ¥è®¡ç®—y=f(w \\bullet x+b) \\quad å…¬å¼1\n\nå®ç°æ„ŸçŸ¥å™¨è®­ç»ƒç®—æ³•ï¼šå°†æƒé‡é¡¹å’Œåç½®é¡¹åˆå§‹åŒ–ï¼Œç„¶åï¼Œåˆ©ç”¨ä¸‹é¢çš„æ„ŸçŸ¥å™¨è§„åˆ™è¿­ä»£ä¿®æ”¹$w_{i}$å’Œ$b$ï¼Œç›´åˆ°è®­ç»ƒå®Œæˆã€‚\n\\begin{array}{c}{w_{i} \\leftarrow w_{i}+\\Delta w_{i}} \\\\ {b \\leftarrow b+\\Delta b}\\end{array}å…¶ä¸­\n\\begin{aligned} \\Delta w_{i} &=\\eta(y-y_{'}) x_{i} \\\\ \\Delta b &=\\eta(y-y_{'}) \\end{aligned}$w{i}$æ˜¯ä¸è¾“å…¥$x{i}$å¯¹åº”çš„æƒé‡é¡¹ï¼Œæ˜¯$b$åç½®é¡¹ã€‚$y$æ˜¯è®­ç»ƒæ ·æœ¬çš„å®é™…å€¼ã€‚è€Œ$y_{â€˜}$æ˜¯æ„ŸçŸ¥å™¨çš„è¾“å‡ºå€¼ï¼Œå®ƒæ˜¯æ ¹æ®å…¬å¼(1)è®¡ç®—å¾—å‡ºã€‚$\\eta$æ˜¯ä¸€ä¸ªç§°ä¸ºå­¦ä¹ é€Ÿç‡çš„å¸¸æ•°ï¼Œå…¶ä½œç”¨æ˜¯æ§åˆ¶æ¯ä¸€æ­¥è°ƒæ•´æƒçš„å¹…åº¦ã€‚\nä»£ç from functools import reduceclass VectorOp(object):    &quot;&quot;&quot;    å®ç°å‘é‡è®¡ç®—æ“ä½œ    &quot;&quot;&quot;    def dot(x, y):        &quot;&quot;&quot;        è®¡ç®—ä¸¤ä¸ªå‘é‡xå’Œyçš„å†…ç§¯        &quot;&quot;&quot;        # é¦–å…ˆæŠŠx[x1,x2,x3...]å’Œy[y1,y2,y3,...]æŒ‰å…ƒç´ ç›¸ä¹˜        # å˜æˆ[x1*y1, x2*y2, x3*y3]        # ç„¶ååˆ©ç”¨reduceæ±‚å’Œ        return reduce(lambda a, b: a + b, VectorOp.element_multiply(x, y), 0.0)    def element_multiply(x, y):        &quot;&quot;&quot;        å°†ä¸¤ä¸ªå‘é‡xå’ŒyæŒ‰å…ƒç´ ç›¸ä¹˜        &quot;&quot;&quot;        # é¦–å…ˆæŠŠx[x1,x2,x3...]å’Œy[y1,y2,y3,...]æ‰“åŒ…åœ¨ä¸€èµ·        # å˜æˆ[(x1,y1),(x2,y2),(x3,y3),...]        # ç„¶ååˆ©ç”¨mapå‡½æ•°è®¡ç®—[x1*y1, x2*y2, x3*y3]        return list(map(lambda x_y: x_y[0] * x_y[1], zip(x, y)))    def element_add(x, y):        &quot;&quot;&quot;        å°†ä¸¤ä¸ªå‘é‡xå’ŒyæŒ‰å…ƒç´ ç›¸åŠ         &quot;&quot;&quot;        # é¦–å…ˆæŠŠx[x1,x2,x3...]å’Œy[y1,y2,y3,...]æ‰“åŒ…åœ¨ä¸€èµ·        # å˜æˆ[(x1,y1),(x2,y2),(x3,y3),...]        # ç„¶ååˆ©ç”¨mapå‡½æ•°è®¡ç®—[x1+y1, x2+y2, x3+y3]        return list(map(lambda x_y: x_y[0] + x_y[1], zip(x, y)))    def scala_multiply(v, s):        &quot;&quot;&quot;        å°†å‘é‡vä¸­çš„æ¯ä¸ªå…ƒç´ å’Œæ ‡é‡sç›¸ä¹˜        &quot;&quot;&quot;        return map(lambda e: e * s, v)class Perceptron(object):    def __init__(self, input_num, activator):        &quot;&quot;&quot;        åˆå§‹åŒ–æ„ŸçŸ¥å™¨ï¼Œè®¾ç½®è¾“å…¥å‚æ•°çš„ä¸ªæ•°ï¼Œä»¥åŠæ¿€æ´»å‡½æ•°ã€‚        &quot;&quot;&quot;        self.activator = activator        # æƒé‡å‘é‡åˆå§‹åŒ–ä¸º0        self.weights = [0.0] * input_num        # åç½®é¡¹åˆå§‹åŒ–ä¸º0        self.bias = 0.0    def __str__(self):        &quot;&quot;&quot;        æ‰“å°å­¦ä¹ åˆ°çš„æƒé‡ã€åç½®é¡¹        &quot;&quot;&quot;        return &#x27;weights\\t:%s\\nbias\\t:%f\\n&#x27; % (self.weights, self.bias)    def predict(self, input_vec):        &quot;&quot;&quot;        è¾“å…¥å‘é‡ï¼Œè¾“å‡ºæ„ŸçŸ¥å™¨çš„è®¡ç®—ç»“æœ        &quot;&quot;&quot;        # è®¡ç®—å‘é‡input_vec[x1,x2,x3...]å’Œweights[w1,w2,w3,...]çš„å†…ç§¯        # ç„¶ååŠ ä¸Šbias        return self.activator(VectorOp.dot(input_vec, self.weights) + self.bias)    def train(self, input_vecs, labels, iteration, rate):        &quot;&quot;&quot;        è¾“å…¥è®­ç»ƒæ•°æ®ï¼šä¸€ç»„å‘é‡ã€ä¸æ¯ä¸ªå‘é‡å¯¹åº”çš„labelï¼›ä»¥åŠè®­ç»ƒè½®æ•°ã€å­¦ä¹ ç‡        &quot;&quot;&quot;        for i in range(iteration):            self._one_iteration(input_vecs, labels, rate)    def _one_iteration(self, input_vecs, labels, rate):        &quot;&quot;&quot;        ä¸€æ¬¡è¿­ä»£ï¼ŒæŠŠæ‰€æœ‰çš„è®­ç»ƒæ•°æ®è¿‡ä¸€é        &quot;&quot;&quot;        # æŠŠè¾“å…¥å’Œè¾“å‡ºæ‰“åŒ…åœ¨ä¸€èµ·ï¼Œæˆä¸ºæ ·æœ¬çš„åˆ—è¡¨[(input_vec, label), ...]        # è€Œæ¯ä¸ªè®­ç»ƒæ ·æœ¬æ˜¯(input_vec, label)        samples = zip(input_vecs, labels)        # å¯¹æ¯ä¸ªæ ·æœ¬ï¼ŒæŒ‰ç…§æ„ŸçŸ¥å™¨è§„åˆ™æ›´æ–°æƒé‡        for (input_vec, label) in samples:            # è®¡ç®—æ„ŸçŸ¥å™¨åœ¨å½“å‰æƒé‡ä¸‹çš„è¾“å‡º            output = self.predict(input_vec)            # æ›´æ–°æƒé‡            self._update_weights(input_vec, output, label, rate)    def _update_weights(self, input_vec, output, label, rate):        &quot;&quot;&quot;        æŒ‰ç…§æ„ŸçŸ¥å™¨è§„åˆ™æ›´æ–°æƒé‡        &quot;&quot;&quot;        # é¦–å…ˆè®¡ç®—æœ¬æ¬¡æ›´æ–°çš„delta        # ç„¶åæŠŠinput_vec[x1,x2,x3,...]å‘é‡ä¸­çš„æ¯ä¸ªå€¼ä¹˜ä¸Šdeltaï¼Œå¾—åˆ°æ¯ä¸ªæƒé‡æ›´æ–°        # æœ€åå†æŠŠæƒé‡æ›´æ–°æŒ‰å…ƒç´ åŠ åˆ°åŸå…ˆçš„weights[w1,w2,w3,...]ä¸Š        delta = label - output        self.weights = VectorOp.element_add(            self.weights, VectorOp.scala_multiply(input_vec, rate * delta))        # æ›´æ–°bias        self.bias += rate * deltadef f(x):    &quot;&quot;&quot;    å®šä¹‰æ¿€æ´»å‡½æ•°f    &quot;&quot;&quot;    return 1 if x &gt; 0 else -1\n\n\n","tags":["NOTE","æœºå™¨å­¦ä¹ "]},{"title":"JAVA|é¢å‘æ¶ˆæ¯ä¸­é—´ä»¶","url":"/2019/06/22/%E4%B8%AD%E9%97%B4%E4%BB%B6/","content":"é¢å‘æ¶ˆæ¯ä¸­é—´ä»¶ï¼ˆMessage Oriented Middlewareï¼‰æä¾›äº†ä¸€ç§åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡ï¼Œä½¿å¾—èŠ‚ç‚¹ä¹‹é—´å¯ä»¥å®ç°åŸºäºæ¶ˆæ¯çš„å½¢å¼çµæ´»çš„å¼‚æ­¥é€šä¿¡ã€‚\nå·¥ä½œåŸç†\nä¸¤ç§é€šä¿¡æ¨¡å¼ç‚¹å¯¹ç‚¹é€šä¿¡æ¨¡å¼ï¼š\nç”¨äºæ¶ˆæ¯ç”Ÿäº§è€…å’Œæ¶ˆæ¯æ¶ˆè´¹è€…ä¹‹é—´ç‚¹ç‚¹å¯¹ç‚¹é€šä¿¡ï¼Œç›¸å½“äºåœ¨ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä¹‹é—´å»ºç«‹äº†ä¸€ä¸ªç‚¹å¯¹ç‚¹æ¶ˆæ¯é˜Ÿåˆ—\næ¯ä¸ªæ¶ˆæ¯åªæœ‰ä¸€ä¸ªæ¶ˆè´¹è€…ï¼Œä¸å¯é‡å¤æ¶ˆè´¹(ä¸€æ—¦è¢«æ¶ˆè´¹ï¼Œæ¶ˆæ¯å°±ä¸å†åœ¨æ¶ˆæ¯é˜Ÿåˆ—ä¸­)\né«˜çº§é˜Ÿåˆ—æ¨¡å¼ï¼šå¸¦ä¼˜å…ˆçº§çš„é˜Ÿåˆ—ï¼›æ”¯æŒæŒä¹…æ€§çš„é˜Ÿåˆ—\n\nå‘å¸ƒ/è®¢é˜…é€šä¿¡æ¨¡å¼ï¼š\næ”¯æŒå‘ä¸€ä¸ªç‰¹å®šçš„æ¶ˆæ¯ä¸»é¢˜å‘å¸ƒæ¶ˆæ¯ã€‚ å¤šä¸ªè®¢é˜…è€…å¯ä»¥åŒæ—¶å…³æ³¨å¹¶æ¥æ”¶æ¥è‡ªç‰¹å®šæ¶ˆæ¯ä¸»é¢˜çš„æ¶ˆæ¯\nå¯ä»¥çµæ´»åœ°å®ç°å¹¿æ’­ã€ç»„æ’­å’Œå¤šå¯¹å¤šç­‰é€šä¿¡æ¨¡å¼\nå¯ä»¥æ”¯æŒæŒä¹…æ€§ã€äº‹åŠ¡æœºåˆ¶ç­‰é«˜çº§åŠŸèƒ½\n\nå¸¸ç”¨çš„MOMä¸­é—´ä»¶ActiveMQï¼š\n\nç”± Apache å‡ºå“ï¼Œå®Œå…¨å…¼å®¹JMSï¼ˆJava Message Serviceï¼‰ä¸ºå¤šç§ç¼–ç¨‹è¯­è¨€æä¾›å®¢æˆ·ç«¯APIå†…éƒ¨æ”¯æŒå¤šç§é€šä¿¡åè®®å¿…é¡»éƒ¨ç½²ä¸­å¿ƒæœåŠ¡å™¨ä½œä¸ºæ¶ˆæ¯è·¯ç”±ä»£ç†ã€‚ä¸­å¿ƒæœåŠ¡å™¨å¯ç”±æœåŠ¡å™¨é›†ç¾¤ä»£æ›¿ã€‚\n\nRabbitMQï¼š\n\né‡‡ç”¨Erlangè¯­è¨€å®ç°çš„AMQPåè®®çš„æ¶ˆæ¯ä¸­é—´ä»¶ï¼Œæœ€åˆèµ·æºäºé‡‘èç³»ç»Ÿã€‚\n\nRocketMQï¼š\n\né˜¿é‡Œ çš„å¼€æºäº§å“ï¼Œç”¨ Java è¯­è¨€å®ç°ï¼›åœ¨é˜¿é‡Œå†…éƒ¨è¢«å¹¿æ³›åº”ç”¨åœ¨è®¢å•ï¼Œäº¤æ˜“ï¼Œå……å€¼ï¼Œæµè®¡ç®—ï¼Œæ¶ˆæ¯æ¨é€ï¼Œæ—¥å¿—æµå¼å¤„ç†ç­‰åœºæ™¯ã€‚\n\nApache Kafkaï¼š\n\næä¾›å®Œå…¨åˆ†å¸ƒå¼æ¶æ„ï¼Œä¸Apacheçš„å…¶ä»–å¹³å°å¦‚Hadoopã€Apache Stormã€Sparkã€Flinkç­‰é›†æˆæ–¹ä¾¿ã€‚\n\nZeroMQï¼š\n\nå·ç§°å²ä¸Šæœ€å¿«çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼ŒåŸºäºCè¯­è¨€å¼€å‘ã€‚\n\nWebsphereMQï¼š\n\nIBMçš„MOMä¸­é—´ä»¶äº§å“\n\nç¼–ç¨‹ç¤ºä¾‹é¢˜ç›®åˆ©ç”¨MOMæ¶ˆæ¯é˜Ÿåˆ—æŠ€æœ¯å®ç°ä¸€ä¸ªåˆ†å¸ƒå¼éšæœºä¿¡å·åˆ†æç³»ç»Ÿï¼Œå…·ä½“è¦æ±‚ï¼š\n\néšæœºä¿¡å·äº§ç”Ÿå™¨æ¯éš”10æ¯«ç§’å·¦å³å°±äº§ç”Ÿä¸€ä¸ªæ­£æ€åˆ†å¸ƒçš„éšæœºæ•°å­—ï¼Œå¹¶ä½œä¸ºä¸€ä¸ªæ¶ˆæ¯å‘å¸ƒã€‚\nå¤šä¸ªéšæœºä¿¡å·åˆ†ææ¨¡å—è®¢é˜…å¹¶æ¥æ”¶è¯¥éšæœºæ•°å­—ï¼Œç„¶åå¯¹ä¿¡å·è¿›è¡Œåˆ†æå¹¶å®æ—¶æ˜¾ç¤ºåˆ†æç»“æœã€‚è‡³å°‘åŒ…å«å¦‚ä¸‹åˆ†ææ¨¡å—ï¼š\nè®¡ç®—éšæœºä¿¡å·çš„å‡å€¼ï¼›\nè®¡ç®—è¿‡å»Nä¸ªéšæœºä¿¡å·çš„æ–¹å·®ï¼ˆNä¸ºå¸¸é‡ï¼Œå¯è®¾ç½®ï¼‰\nå®ç°åŸºäºæ­£æ€åˆ†å¸ƒçš„å¼‚å¸¸ç‚¹æ£€æµ‹$\\mu \\pm 3 \\sigma$\n\n\n\nä»£ç Publisher.javapackage topic;import java.io.IOException;import java.util.Random;import java.util.Scanner;import javax.jms.Connection;import javax.jms.ConnectionFactory;import javax.jms.JMSException;import javax.jms.Message;import javax.jms.MessageProducer;import javax.jms.Session;import javax.jms.Topic;import org.apache.activemq.ActiveMQConnectionFactory;public class Publisher &#123;    private static String brokerURL = &quot;tcp://localhost:61616&quot;;    private static ConnectionFactory factory;    private Connection connection;    private Session session;    private MessageProducer producer;\tprivate Topic topic;\tprivate Random random=new Random();\tprivate String d;\tstatic Scanner in=new Scanner(System.in);        public Publisher(String topicName) throws JMSException &#123;\t\t    \tfactory = new ActiveMQConnectionFactory(brokerURL);    \tconnection = factory.createConnection();                session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);\t\ttopic = session.createTopic(topicName);        producer = session.createProducer(topic);        producer.setTimeToLive(1000);\t\tconnection.start();    &#125;            public void close() throws JMSException &#123;        if (connection != null) &#123;            connection.close();        &#125;    &#125;    \tpublic static void main(String[] args) throws JMSException, InterruptedException, IOException &#123;//    \tSystem.out.println(&quot;Please input u and a&quot;);//    \tint u=in.nextInt();//    \tint a=in.nextInt();    \tint u=0;    \tint a=1;    \tPublisher publisher = new Publisher(&quot;Gaussian&quot;);    \tint i=0;    \tlong t1 = System.currentTimeMillis();    \twhile(true)    \t&#123;    \t\ti++;    \t\tlong t2 = System.currentTimeMillis();    \t\tif(t2-t1&gt;10000)    \t\t&#123;    \t\t\tbreak;    \t\t&#125;    \t\tpublisher.sendMessage(u,a,i);    \t\tThread.sleep(10);\t\t&#125;    \tpublisher.close();\t&#125;\t    public void sendMessage(int a,int b,int i) throws JMSException &#123;    \td = Double.toString(b*random.nextGaussian()+a);        Message message = session.createTextMessage(d);        producer.send(message);        System.out.println(&quot;Sent number &quot;+i+&quot; :&quot;+d);    &#125;\t&#125;\nASyncConsumer_ave.javaï¼ˆè®¡ç®—å‡å€¼ï¼‰package topic;import javax.jms.Connection;import javax.jms.ConnectionFactory;import javax.jms.JMSException;import javax.jms.Message;import javax.jms.MessageConsumer;import javax.jms.MessageListener;import javax.jms.Session;import javax.jms.TextMessage;import javax.jms.Topic;import org.apache.activemq.ActiveMQConnectionFactory;class Average implements MessageListener &#123;\tint num=0;\tdouble sum=0;\tpublic void onMessage(Message message) &#123;\t\ttry &#123;\t\t\tString ss=((TextMessage)message).getText();\t\t\tnum++;\t\t\tsum+=Double.valueOf(ss);\t\t\tSystem.out.println(&quot;number:&quot;+num+&quot; average:&quot;+sum/num);\t\t&#125; catch (Exception e) &#123;\t\t\te.printStackTrace();\t\t&#125;\t&#125;&#125;public class ASyncConsumer_ave &#123;    public static void main(String[] args) throws JMSException &#123;\t\tString brokerURL = &quot;tcp://localhost:61616&quot;;\t\tConnectionFactory factory = null;\t\tConnection connection = null;\t\tSession session = null;\t\tTopic topic = null;\t\tMessageConsumer messageConsumer = null;\t\tAverage average=null;\t\t\t\ttry &#123;\t\t\tfactory = new ActiveMQConnectionFactory(brokerURL);\t\t\tconnection = factory.createConnection();\t\t\tconnection.start();\t\t\t\t\t\tsession = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);\t\t\ttopic = session.createTopic(&quot;Gaussian&quot;);\t\t\tmessageConsumer = session.createConsumer(topic);\t\t\t\t\t\taverage = new Average();\t\t\t\t\t\tmessageConsumer.setMessageListener(average);\t\t\t\t\t\tSystem.out.println(&quot;Press any key to exit.&quot;);\t\t\tSystem.in.read();\t\t&#125; catch (Exception e) &#123;\t\t\te.printStackTrace();\t\t&#125; finally &#123;\t\t\tconnection.close();\t\t&#125;\t&#125;\t&#125;\nASyncConsumer_var.javaï¼ˆè®¡ç®—æ–¹å·®ï¼‰package topic;import java.util.ArrayList;import java.util.Scanner;import javax.jms.Connection;import javax.jms.ConnectionFactory;import javax.jms.JMSException;import javax.jms.Message;import javax.jms.MessageConsumer;import javax.jms.MessageListener;import javax.jms.Session;import javax.jms.TextMessage;import javax.jms.Topic;import org.apache.activemq.ActiveMQConnectionFactory;class Variance implements MessageListener &#123;\tprivate ArrayList&lt;Double&gt; p = new ArrayList&lt;Double&gt;();\tprivate int n=0;\tpublic Variance(int N) &#123;\t\tthis.n=N;\t&#125;\t\tpublic void onMessage(Message message) &#123;\t\ttry &#123;\t\t\tString ss=((TextMessage)message).getText();\t\t\tp.add(Double.valueOf(ss));\t\t\tdouble ave = 0.0;\t\t\tdouble var = 0.0;\t\t\tif(p.size()&gt;=n)\t\t\t&#123;\t\t\t\tfor (int i=0;i&lt;n;i++) &#123;\t\t\t\t\tave += p.get(i);\t\t\t\t&#125;\t\t\t\tave /= n;\t\t\t\tfor (int i=0;i&lt;n;i++) &#123;\t\t\t\t\tvar += (p.get(i) - ave) * (p.get(i) - ave);\t\t\t\t&#125;\t\t\t\tSystem.out.println(&quot;Varianceï¼š&quot;+var/n);\t\t\t&#125;\t\t&#125; catch (Exception e) &#123;\t\t\te.printStackTrace();\t\t&#125;\t&#125;&#125;public class ASyncConsumer_var &#123;\tstatic Scanner in=new Scanner(System.in);    public static void main(String[] args) throws JMSException &#123;\t\tString brokerURL = &quot;tcp://localhost:61616&quot;;\t\tConnectionFactory factory = null;\t\tConnection connection = null;\t\tSession session = null;\t\tTopic topic = null;\t\tMessageConsumer messageConsumer = null;\t\tVariance variance=null;\t\t        \t\ttry &#123;\t\t\tfactory = new ActiveMQConnectionFactory(brokerURL);\t\t\tconnection = factory.createConnection();\t\t\tconnection.start();\t\t\t\t\t\tsession = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);\t\t\ttopic = session.createTopic(&quot;Gaussian&quot;);\t\t\tmessageConsumer = session.createConsumer(topic);\t\t\tSystem.out.println(&quot;Input N:&quot;);\t\t\tint n=in.nextInt();\t\t\t\t\t\tvariance=new Variance(n);\t\t\tmessageConsumer.setMessageListener(variance);\t\t\t\t\t\tSystem.out.println(&quot;Press any key to exit.&quot;);\t\t\tSystem.in.read();\t\t&#125; catch (Exception e) &#123;\t\t\te.printStackTrace();\t\t&#125; finally &#123;\t\t\tconnection.close();\t\t&#125;\t&#125;\t&#125;\nASyncConsumer_err.javaï¼ˆå¼‚å¸¸ç‚¹æ£€æµ‹ï¼‰package topic;import javax.jms.Connection;import javax.jms.ConnectionFactory;import javax.jms.JMSException;import javax.jms.Message;import javax.jms.MessageConsumer;import javax.jms.MessageListener;import javax.jms.Session;import javax.jms.TextMessage;import javax.jms.Topic;import org.apache.activemq.ActiveMQConnectionFactory;class Error implements MessageListener &#123;\tdouble u=0;\tdouble a=0;\tdouble v=0;\tdouble sum=0;\tint num=0;\t\tpublic void onMessage(Message message) &#123;\t\ttry &#123;\t\t\tdouble d = Double.valueOf(((TextMessage)message).getText());\t\t\tsum += d;\t\t\tnum++;\t\t\tif(num&gt;1)\t\t\t&#123;\t\t\t\tu=sum/num;\t\t\t\tv += (d - u) * (d - u);\t\t\t\ta=Math.sqrt(v/num);\t\t\t\tif(d&gt;u-3*a&amp;&amp;d&lt;u+3*a)\t\t\t\t&#123;\t\t\t\t\tSystem.out.println(&quot;TRUE &quot;+d);\t\t\t\t&#125;\t\t\t\telse &#123;\t\t\t\t\tSystem.out.println(&quot;ERROR &quot;+d);\t\t\t\t&#125;\t\t\t&#125;\t\t&#125; catch (Exception e) &#123;\t\t\te.printStackTrace();\t\t&#125;\t&#125;&#125;public class ASyncConsumer_err &#123;    public static void main(String[] args) throws JMSException &#123;\t\tString brokerURL = &quot;tcp://localhost:61616&quot;;\t\tConnectionFactory factory = null;\t\tConnection connection = null;\t\tSession session = null;\t\tTopic topic = null;\t\tMessageConsumer messageConsumer = null;\t\tError error=null;        \t\ttry &#123;\t\t\tfactory = new ActiveMQConnectionFactory(brokerURL);\t\t\tconnection = factory.createConnection();\t\t\tconnection.start();\t\t\t\t\t\tsession = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);\t\t\ttopic = session.createTopic(&quot;Gaussian&quot;);\t\t\tmessageConsumer = session.createConsumer(topic);\t\t\t\t\t\terror=new Error();\t\t\t\t\t\tmessageConsumer.setMessageListener(error);\t\t\t\t\t\tSystem.out.println(&quot;Press any key to exit.&quot;);\t\t\tSystem.in.read();\t\t&#125; catch (Exception e) &#123;\t\t\te.printStackTrace();\t\t&#125; finally &#123;\t\t\tconnection.close();\t\t&#125;\t&#125;\t&#125;\nå®ç°\nå¼€å¯ActiveMQ\nç”¨ä¸‰ä¸ªçª—å£åˆ†åˆ«è¿è¡ŒASyncConsumer_ave.javaï¼ŒASyncConsumer_var.javaå’ŒASyncConsumer_err.javaã€‚\nè¿è¡ŒPublisher.javaè¾“å…¥å‡å€¼å’Œæ–¹å·®\nç»“æœ\n\n","tags":["Java","åˆ†å¸ƒå¼","MOM"]},{"title":"JAVA|Socketç¼–ç¨‹å®ä¾‹","url":"/2019/06/21/Java-Socket/","content":"å¤šçº¿ç¨‹ç‰ˆUDPåŠçº¿ç¨‹æ± ç‰ˆçš„TCP\nTCP/IPç½‘ç»œä½“ç³»TCP/IPå…ˆäºOSIæ¨¡å‹ï¼Œä¸å®Œå…¨ç¬¦åˆOSIæ ‡å‡†\nTCP/IPå››å±‚æ¨¡å‹\nä¹Ÿå¯åˆ†ä¸ºäº”å±‚ï¼Œå°†ç½‘ç»œæ¥å£å±‚åˆ†ä¸ºä¸¤å±‚\n\n\nå„å±‚ç½‘ç»œåè®®çš„å­˜åœ¨ä½ç½®\nè·¯ç”±å™¨ä¸­åªåŒ…å«ç‰©ç†å±‚ã€é“¾è·¯å±‚ã€ç½‘ç»œå±‚åè®®å®ç°æ¨¡å—\nä¸»æœºä¸­åŒ…å«äº”å±‚åè®®å®ç°æ¨¡å—\næ“ä½œç³»ç»Ÿè´Ÿè´£å®ç°ä¼ è¾“å±‚åŠä»¥ä¸‹ç½‘ç»œåè®®çš„å®ç°\n\nSocketå¥—æ¥å­—ä»€ä¹ˆæ˜¯socketï¼Ÿä¼ è¾“å±‚å’Œç½‘ç»œå±‚æä¾›ç»™åº”ç”¨å±‚çš„æ ‡å‡†åŒ–ç¼–ç¨‹æ¥å£ï¼ˆæˆ–ç§°ä¸ºç¼–ç¨‹æ¥å£ï¼‰\nSocketç±»å‹\næµå¼å¥—æ¥å­—\næ•°æ®æŠ¥å¥—æ¥å­—\nåŸå§‹å¥—æ¥å­—\n\nTCPå¥—æ¥å­—ç¼–ç¨‹å…¸å‹æ¨¡å‹\nUDPå¥—æ¥å­—ç¼–ç¨‹å…¸å‹æ¨¡å‹\nå¹¶å‘æœåŠ¡æŠ€æœ¯åŸºäºå¤šçº¿ç¨‹çš„å¹¶å‘æœåŠ¡æŠ€æœ¯\nåŸºäºçº¿ç¨‹æ± çš„å¹¶å‘æœåŠ¡æŠ€æœ¯\nJavaå®ç°å¤šçº¿ç¨‹ç‰ˆUDPUDPClient.javapackage yun_computer;import java.net.*;import java.io.*;public class UDPClient &#123;    public static void main(String[] args) throws IOException &#123;    \t        InetAddress address = InetAddress.getByName(&quot;localhost&quot;);        int port = 8800;        String userInput = null;                byte[] data= new byte[1024];        byte[] reply = new byte[1024];                BufferedReader stdIn = new BufferedReader(new InputStreamReader(System.in));        DatagramSocket socket = new DatagramSocket();        DatagramPacket p1,p2 = null;                while ((userInput=stdIn.readLine())!=null) &#123;        \tdata = userInput.getBytes();            p1 = new DatagramPacket(data, data.length, address, port);            socket.send(p1);                        p2 = new DatagramPacket(reply, reply.length);            socket.receive(p2);                        String info = new String(reply, 0, p2.getLength());            System.out.println(&quot;Serverï¼š&quot; + info);\t\t&#125;        socket.close();    &#125;&#125;\nUDPThread.javapackage yun_computer;import java.net.*;import java.io.*;public class UDPThread implements Runnable &#123;\tDatagramSocket socket = null;    DatagramPacket packet = null;    public UDPThread(DatagramSocket socket, DatagramPacket packet) &#123;        this.socket = socket;        this.packet = packet;    &#125;    public void run() &#123;        String info = null;        byte[] reply = null;        DatagramPacket p = null;        try &#123;        \tInetAddress address = packet.getAddress();            System.out.println(&quot;IPï¼š&quot; + address.getHostAddress());                        info = new String(packet.getData(), 0, packet.getLength());            System.out.println(&quot;Message from Clientï¼š&quot; + info);            reply = &quot;Successful reception&quot;.getBytes();            p = new DatagramPacket(reply, reply.length, packet.getAddress(), packet.getPort());            socket.send(p);                    &#125; catch (IOException e) &#123;            e.printStackTrace();        &#125;    &#125;&#125;\nUDPServer.javapackage yun_computer;import java.net.*;import java.io.*;public class UDPServer &#123;    public static void main(String[] args) throws IOException &#123;    \t    \tbyte[] data = new byte[1024];        DatagramSocket socket = new DatagramSocket(8800);        DatagramPacket packet = new DatagramPacket(data, data.length);                System.out.println(&quot;Server...&quot;);        while (true) &#123;            socket.receive(packet);            UDPThread udp = new UDPThread(socket, packet);            udp.run();        &#125;    &#125;&#125;\nçº¿ç¨‹æ± ç‰ˆçš„TCPTCPClient.javapackage yun_computer;import java.io.*;import java.net.*;public class TCPClient &#123;    public static void main(String[] args) throws Exception &#123;\t\t \t\tString userInput = null;\t\tString echoMessage = null;\t\t\t\tBufferedReader stdIn = new BufferedReader(new InputStreamReader(System.in));\t\t\t\tSocket socket = new Socket(&quot;127.0.0.1&quot;, 8189);\t\tSystem.out.println(&quot;Connected to Server&quot;);\t\t\t\tInputStream inStream = socket.getInputStream();\t\tOutputStream outStream = socket.getOutputStream();\t\tBufferedReader in = new BufferedReader(new InputStreamReader(inStream));\t\tPrintWriter out = new PrintWriter(outStream);\t\t\t\twhile((userInput=stdIn.readLine())!=null)        &#123;            out.println(userInput);\t\t\tout.flush();\t\t\techoMessage = in.readLine();\t\t\tSystem.out.println(&quot;Echo from server: &quot; + echoMessage);\t\t&#125;\t\tsocket.close();\t&#125;&#125;\nTCPThread.javapackage yun_computer;import java.io.*;import java.net.*;public class TCPThread extends Thread &#123;        Socket socket = null;    public TCPThread(Socket socket) &#123;        this.socket = socket;    &#125;    public void run()&#123;        InputStream is=null;        InputStreamReader isr=null;        BufferedReader br=null;        OutputStream os=null;        PrintWriter pw=null;        try &#123;            is = socket.getInputStream();            isr = new InputStreamReader(is);            br = new BufferedReader(isr);\t\t\tos = socket.getOutputStream();            pw = new PrintWriter(os);            String info=null;            while((info=br.readLine())!=null)&#123;            \tInetAddress address = socket.getInetAddress();                System.out.println(&quot;IPï¼š&quot; + address.getHostAddress());                System.out.println(&quot;Message from client:&quot;+info);\t\t\t\tpw.println(info);\t\t\t\tpw.flush();            &#125;        &#125; catch (IOException e) &#123;            e.printStackTrace();        &#125;finally&#123;            try &#123;                if(pw!=null)                    pw.close();                if(os!=null)                    os.close();                if(br!=null)                    br.close();                if(isr!=null)                    isr.close();                if(is!=null)                    is.close();                if(socket!=null)                    socket.close();            &#125; catch (IOException e) &#123;                e.printStackTrace();            &#125;        &#125;    &#125;&#125;\nTCPServer.javapackage yun_computer;import java.net.*;import java.util.concurrent.*;public class TCPServer &#123;\t public static void main(String[] args) throws Exception &#123;\t\t int n=2;\t\t int m=4;\t\t \t\t ThreadPoolExecutor executor = new ThreadPoolExecutor(n, m, 200, TimeUnit.MILLISECONDS,  \t                new ArrayBlockingQueue&lt;Runnable&gt;(n));\t\t \t\t ServerSocket listenSocket = new ServerSocket(8189); \t\t System.out.println(&quot;Server listening at 8189&quot;);\t\t \t\t for(int i=0;i&lt;(n+m);i++) &#123;\t\t\t Socket clientSocket = listenSocket.accept();\t\t\t System.out.println(&quot;Accepted connection from client&quot;);\t\t\t TCPThread tcp=new TCPThread(clientSocket);\t\t\t executor.execute(tcp);\t\t &#125;\t\t executor.shutdown();\t\t listenSocket.close();\t &#125;&#125;\n","tags":["Java","Socket","åˆ†å¸ƒå¼","TCP","UDP"]},{"title":"NOTE|äººå·¥æ™ºèƒ½","url":"/2019/06/19/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/","content":"äººå·¥æ™ºèƒ½ç®€å•çš„ç¬”è®°Ïˆ(ï½€âˆ‡Â´)Ïˆ\nç¬¬ä¸€ç«  ç»ªè®ºä»€ä¹ˆæ˜¯äººå·¥æ™ºèƒ½ï¼Ÿ\næ™ºèƒ½æœºå™¨ï¼šèƒ½å¤Ÿåœ¨å„ç±»ç¯å¢ƒä¸­è‡ªä¸»åœ°æˆ–äº¤äº’åœ°æ‰§è¡Œå„ç§æ‹Ÿäººä»»åŠ¡çš„æœºå™¨ã€‚\näººå·¥æ™ºèƒ½(å­¦ç§‘)ï¼šäººå·¥æ™ºèƒ½(å­¦ç§‘)æ˜¯è®¡ç®—æœºç§‘å­¦ä¸­æ¶‰åŠç ”ç©¶ã€è®¾è®¡å’Œåº”ç”¨æ™ºèƒ½æœºå™¨çš„ä¸€ä¸ªåˆ†æ”¯ã€‚å®ƒçš„è¿‘æœŸä¸»è¦ç›®æ ‡åœ¨äºç ”ç©¶ç”¨æœºå™¨æ¥æ¨¡ä»¿å’Œæ‰§è¡Œäººè„‘çš„æŸäº›æ™ºåŠ›åŠŸèƒ½ï¼Œå¹¶å¼€å‘ç›¸å…³ç†è®ºå’ŒæŠ€æœ¯ã€‚\näººå·¥æ™ºèƒ½(èƒ½åŠ›)ï¼šäººå·¥æ™ºèƒ½(èƒ½åŠ›)æ˜¯æ™ºèƒ½æœºå™¨æ‰€æ‰§è¡Œçš„é€šå¸¸ä¸äººç±»æ™ºèƒ½æœ‰å…³çš„æ™ºèƒ½è¡Œä¸ºï¼Œå¦‚åˆ¤æ–­ã€æ¨ç†ã€è¯æ˜ã€è¯†åˆ«ã€æ„ŸçŸ¥ã€ç†è§£ã€é€šä¿¡ã€è®¾è®¡ã€æ€è€ƒã€è§„åˆ’ã€å­¦ä¹ å’Œé—®é¢˜æ±‚è§£ç­‰æ€ç»´æ´»åŠ¨ã€‚äººå·¥æ™ºèƒ½æœ‰å“ªäº›å­¦æ´¾ï¼Ÿç¬¦å·ä¸»ä¹‰ï¼šä»¥çŸ¥è¯†çš„ç¬¦å·è¡¨è¾¾ä¸ºåŸºç¡€ï¼Œé€šè¿‡æ¨ç†è¿›è¡Œé—®é¢˜æ±‚è§£è¿æ¥ä¸»ä¹‰ï¼šè®¤ä¸ºäººçš„æ€ç»´åŸºå…ƒæ˜¯ç¥ç»å…ƒï¼Œè€Œä¸æ˜¯ç¬¦å·å¤„ç†è¿‡ç¨‹è¡Œä¸ºä¸»ä¹‰ï¼šä¸»å¼ ä»è¡Œä¸ºæ–¹é¢æ¨¡æ‹Ÿã€å»¶ä¼¸ã€æ‰©å±•äººçš„æ™ºèƒ½ï¼Œè®¤ä¸ºâ€œæ™ºèƒ½â€å¯ä»¥ä¸éœ€è¦â€œçŸ¥è¯†â€\n\nç¬¬äºŒç«  çŸ¥è¯†è¡¨ç¤ºæ–¹æ³•ä»€ä¹ˆæ˜¯çŸ¥è¯†\næ•°æ®ä¸ä¿¡æ¯ï¼šæ•°æ®æ˜¯ä¿¡æ¯çš„è½½ä½“å’Œè¡¨ç¤ºï¼›ä¿¡æ¯æ˜¯æ•°æ®çš„è¯­ä¹‰ã€‚\nçŸ¥è¯†ï¼šä¸€èˆ¬æ¥è¯´ï¼ŒæŠŠæœ‰å…³ä¿¡æ¯å…³è”åœ¨ä¸€èµ·æ‰€å½¢æˆçš„ä¿¡æ¯ç»“æ„ç§°ä¸ºçŸ¥è¯†ã€‚ä¸€äº›é‡è¦çš„ç­‰ä»·å¼ä¸€äº›é‡è¦çš„æ°¸çœŸè•´å«å¼çŠ¶æ€ç©ºé—´çš„æœç´¢ç­–ç•¥æœç´¢ç­–ç•¥\n\n\nå¹¿åº¦ä¼˜å…ˆæœç´¢æŒ‰ç…§â€œå…ˆæ‰©å±•å‡ºçš„èŠ‚ç‚¹å…ˆè¢«è€ƒå¯Ÿâ€çš„åŸåˆ™è¿›è¡Œæœç´¢ï¼›\næ·±åº¦ä¼˜å…ˆæœç´¢æŒ‰ç…§â€œåæ‰©å±•å‡ºçš„èŠ‚ç‚¹å…ˆè¢«è€ƒå¯Ÿâ€çš„åŸåˆ™è¿›è¡Œæœç´¢ï¼›\næœ‰ç•Œæ·±åº¦ä¼˜å…ˆæœç´¢çš„åŸåˆ™ä¸æ·±åº¦ä¼˜å…ˆæœç´¢ç›¸åŒï¼Œä½†æ˜¯å®ƒè§„å®šäº†æ·±åº¦é™ç•Œï¼Œä½¿æœç´¢ä¸å¾—æ— é™åˆ¶åœ°å‘çºµæ·±æ–¹å‘å‘å±•ï¼›\nä»£ä»·æ ‘çš„å¹¿åº¦ä¼˜å…ˆæœç´¢æŒ‰ç…§â€œå“ªä¸ªèŠ‚ç‚¹åˆ°æ ¹èŠ‚ç‚¹çš„ä»£ä»·å°å°±å…ˆè€ƒå¯Ÿå“ªä¸ªèŠ‚ç‚¹â€çš„åŸåˆ™è¿›è¡Œæœç´¢ï¼›\nä»£ä»·æ ‘çš„æ·±åº¦ä¼˜å…ˆæœç´¢æŒ‰ç…§â€œå½“å‰èŠ‚ç‚¹çš„å“ªä¸ªå­èŠ‚ç‚¹åˆ°å…¶çˆ¶èŠ‚ç‚¹çš„ä»£ä»·å°å°±å…ˆè€ƒå¯Ÿå“ªä¸ªå­èŠ‚ç‚¹â€çš„åŸåˆ™è¿›è¡Œæœç´¢ï¼›\nå±€éƒ¨æ‹©ä¼˜æœç´¢æŒ‰ç…§â€œå½“å‰èŠ‚ç‚¹çš„å“ªä¸ªå­èŠ‚ç‚¹åˆ°ç›®æ ‡èŠ‚ç‚¹çš„ä¼°è®¡ä»£ä»·å°å°±å…ˆè€ƒå¯Ÿå“ªä¸ªå­èŠ‚ç‚¹â€çš„åŸåˆ™è¿›è¡Œæœç´¢ï¼›\nå…¨å±€æ‹©ä¼˜æœç´¢æŒ‰ç…§â€œå“ªä¸ªèŠ‚ç‚¹åˆ°ç›®æ ‡èŠ‚ç‚¹çš„ä¼°è®¡ä»£ä»·å°å°±å…ˆè€ƒå¯Ÿå“ªä¸ªèŠ‚ç‚¹â€çš„åŸåˆ™è¿›è¡Œæœç´¢\n\nä»¥é‡æ’ä¹å®«ä¸ºä¾‹\nç›²ç›®æœç´¢å¹¿åº¦ä¼˜å…ˆæœç´¢\n\nä¼˜ç‚¹ï¼š    åªè¦é—®é¢˜æœ‰è§£ï¼Œç”¨å¹¿åº¦ä¼˜å…ˆæœç´¢æ€»å¯ä»¥å¾—åˆ°è§£ï¼Œè€Œä¸”å¾—åˆ°çš„æ˜¯è·¯å¾„æœ€çŸ­çš„è§£ã€‚ç¼ºç‚¹ï¼š    å¹¿åº¦ä¼˜å…ˆæœç´¢ç›²ç›®æ€§è¾ƒå¤§ï¼Œå½“ç›®æ ‡èŠ‚ç‚¹è·åˆå§‹èŠ‚ç‚¹è¾ƒè¿œæ—¶å°†ä¼šäº§ç”Ÿè®¸å¤šæ— ç”¨èŠ‚ç‚¹ï¼Œæœç´¢æ•ˆç‡ä½ã€‚\n\næ·±åº¦ä¼˜å…ˆæœç´¢\n\n1.åœ¨æ·±åº¦ä¼˜å…ˆæœç´¢ä¸­ï¼Œæœç´¢ä¸€æ—¦è¿›å…¥æŸä¸ªåˆ†æ”¯ï¼Œå°±å°†æ²¿ç€è¯¥åˆ†æ”¯ä¸€ç›´å‘ä¸‹æœç´¢ã€‚å¦‚æœç›®æ ‡èŠ‚ç‚¹æ°å¥½åœ¨æ­¤åˆ†æ”¯ä¸Šï¼Œåˆ™å¯è¾ƒå¿«åœ°å¾—åˆ°è§£ã€‚ä½†æ˜¯ï¼Œå¦‚æœç›®æ ‡èŠ‚ç‚¹ä¸åœ¨æ­¤åˆ†æ”¯ä¸Šï¼Œè€Œè¯¥åˆ†æ”¯åˆæ˜¯ä¸€ä¸ªæ— ç©·åˆ†æ”¯ï¼Œåˆ™å°±ä¸å¯èƒ½å¾—åˆ°è§£ã€‚æ‰€ä»¥æ·±åº¦ä¼˜å…ˆæœç´¢æ˜¯ä¸å®Œå¤‡çš„ï¼Œå³ä½¿é—®é¢˜æœ‰è§£ï¼Œå®ƒä¹Ÿä¸ä¸€å®šèƒ½æ±‚å¾—è§£ã€‚2.ç”¨æ·±åº¦ä¼˜å…ˆæ±‚å¾—çš„è§£ï¼Œä¸ä¸€å®šæ˜¯è·¯å¾„æœ€çŸ­çš„è§£ã€‚3.æœ¬è´¨ï¼šä»¥åˆå§‹èŠ‚ç‚¹ä¸ºæ ¹èŠ‚ç‚¹ï¼Œåœ¨çŠ¶æ€ç©ºé—´å›¾ä¸­æŒ‰ç…§æ·±åº¦ä¼˜å…ˆçš„åŸåˆ™ï¼Œç”Ÿæˆä¸€æ£µæœç´¢æ ‘ã€‚\n\næœ‰ç•Œæ·±åº¦ä¼˜å…ˆæœç´¢\n\n1.å¦‚æœé—®é¢˜æœ‰è§£ï¼Œä¸”å…¶è·¯å¾„é•¿åº¦â‰¤dmï¼Œåˆ™ä¸Šè¿°æœç´¢è¿‡ç¨‹ä¸€å®šèƒ½æ±‚å¾—è§£ã€‚ä½†æ˜¯ï¼Œè‹¥è§£çš„è·¯å¾„é•¿åº¦&gt;dm,åˆ™ä¸Šè¿°æœç´¢è¿‡ç¨‹å°±å¾—ä¸åˆ°è§£ã€‚è¿™è¯´æ˜åœ¨æœ‰ç•Œæ·±åº¦ä¼˜å…ˆæœç´¢ä¸­ï¼Œæ·±åº¦ç•Œé™çš„é€‰æ‹©æ˜¯å¾ˆé‡è¦çš„ã€‚2.è¦æ°å½“åœ°ç»™å‡ºdmçš„å€¼æ˜¯æ¯”è¾ƒå›°éš¾çš„ã€‚å³ä½¿èƒ½æ±‚å‡ºè§£ï¼Œå®ƒä¹Ÿä¸ä¸€å®šæ˜¯æœ€ä¼˜è§£ã€‚\n\nä»£ä»·æ ‘ä¸Šæ ‡æœ‰ä»£ä»·(æˆ–è´¹ç”¨)çš„æ ‘ç§°ä¸ºä»£ä»·æ ‘ã€‚\nç”¨g(x)è¡¨ç¤ºä»åˆå§‹èŠ‚ç‚¹S0åˆ°èŠ‚ç‚¹xçš„ä»£ä»·ï¼Œç”¨c(x1,x2)è¡¨ç¤ºä»çˆ¶èŠ‚ç‚¹x1åˆ°å­èŠ‚ç‚¹x2çš„ä»£ä»·ï¼Œåˆ™æœ‰ï¼š\ng(x_2)=g(x_1)+c(x_1,x_2)ä»£ä»·æ ‘çš„å¹¿åº¦ä¼˜å…ˆæœç´¢æœç´¢è¿‡ç¨‹\n\næŠŠåˆå§‹èŠ‚ç‚¹S0æ”¾å…¥OPENè¡¨ï¼Œä»¤g(S0)=0ã€‚\nå¦‚æœOPENè¡¨ä¸ºç©ºï¼Œåˆ™é—®é¢˜æ— è§£ï¼Œé€€å‡ºã€‚\næŠŠOPENè¡¨çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆè®°ä¸ºèŠ‚ç‚¹nï¼‰å–å‡ºæ”¾å…¥CLOSEè¡¨ã€‚\nè€ƒå¯ŸèŠ‚ç‚¹næ˜¯å¦ä¸ºç›®æ ‡èŠ‚ç‚¹ã€‚è‹¥æ˜¯ï¼Œåˆ™æ±‚å¾—äº†é—®é¢˜çš„è§£ï¼Œé€€å‡ºã€‚\nè‹¥èŠ‚ç‚¹nä¸å¯æ‰©å±•ï¼Œåˆ™è½¬ç¬¬2æ­¥ã€‚\næ‰©å±•èŠ‚ç‚¹nï¼Œä¸ºæ¯ä¸€ä¸ªå­èŠ‚ç‚¹éƒ½é…ç½®æŒ‡å‘çˆ¶èŠ‚ç‚¹çš„æŒ‡é’ˆï¼Œå¹¶å°†å„å­èŠ‚ç‚¹æ”¾å…¥OPENè¡¨ä¸­ï¼›è®¡ç®—å„å­èŠ‚ç‚¹çš„ä»£ä»·ï¼ŒæŒ‰å„èŠ‚ç‚¹çš„ä»£ä»·å¯¹OPENè¡¨ä¸­çš„å…¨éƒ¨èŠ‚ç‚¹è¿›è¡Œæ’åº(æŒ‰ä»å°åˆ°å¤§çš„é¡ºåº)ï¼Œç„¶åè½¬ç¬¬2æ­¥\n\nä»£ä»·æ ‘çš„æ·±åº¦ä¼˜å…ˆæœç´¢æœç´¢è¿‡ç¨‹\n\næŠŠåˆå§‹èŠ‚ç‚¹S0æ”¾å…¥OPENè¡¨ï¼Œä»¤g(S0)=0ã€‚\nå¦‚æœOPENè¡¨ä¸ºç©ºï¼Œåˆ™é—®é¢˜æ— è§£ï¼Œé€€å‡ºã€‚\næŠŠOPENè¡¨çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆè®°ä¸ºèŠ‚ç‚¹nï¼‰å–å‡ºæ”¾å…¥CLOSEè¡¨ã€‚\nè€ƒå¯ŸèŠ‚ç‚¹næ˜¯å¦ä¸ºç›®æ ‡èŠ‚ç‚¹ã€‚è‹¥æ˜¯ï¼Œåˆ™æ±‚å¾—äº†é—®é¢˜çš„è§£ï¼Œé€€å‡ºã€‚\nè‹¥èŠ‚ç‚¹nä¸å¯æ‰©å±•ï¼Œåˆ™è½¬ç¬¬2æ­¥ã€‚\næ‰©å±•èŠ‚ç‚¹nï¼Œå°†å…¶å­èŠ‚ç‚¹æŒ‰â€œè¾¹â€ä»£ä»·ä»å°åˆ°å¤§çš„é¡ºåºæ”¾åˆ°OPENè¡¨ä¸­çš„é¦–éƒ¨ï¼Œå¹¶ä¸ºæ¯ä¸€ä¸ªå­èŠ‚ç‚¹éƒ½é…ç½®æŒ‡å‘çˆ¶èŠ‚ç‚¹çš„æŒ‡é’ˆï¼Œç„¶åè½¬ç¬¬2æ­¥ã€‚\nä»£ä»·æ ‘çš„æ·±åº¦ä¼˜å…ˆæœç´¢æ˜¯ä¸å®Œå¤‡çš„ã€‚\n\n\n\nå¯å‘å¼æœç´¢ç›²ç›®æœç´¢å…·æœ‰è¾ƒå¤§çš„ç›²ç›®æ€§ï¼Œäº§ç”Ÿçš„æ— ç”¨èŠ‚ç‚¹è¾ƒå¤šï¼Œæ•ˆç‡ä¸é«˜ã€‚\nå¯å‘å¼æœç´¢é‡‡ç”¨é—®é¢˜è‡ªèº«çš„ç‰¹æ€§ä¿¡æ¯ï¼Œä»¥æŒ‡å¯¼æœç´¢æœç€æœ€æœ‰å¸Œæœ›çš„æ–¹å‘å‰è¿›ã€‚è¿™ç§æœç´¢é’ˆå¯¹æ€§è¾ƒå¼ºï¼Œå› è€Œæ•ˆç‡è¾ƒé«˜\nå¯å‘æ€§ä¿¡æ¯ä¸ä¼°ä»·å‡½æ•°å¯ç”¨äºæŒ‡å¯¼æœç´¢è¿‡ç¨‹ï¼Œä¸”ä¸å…·ä½“é—®é¢˜æœ‰å…³çš„ä¿¡æ¯ç§°ä¸ºå¯å‘æ€§ä¿¡æ¯ã€‚ç”¨äºè¯„ä¼°èŠ‚ç‚¹é‡è¦æ€§çš„å‡½æ•°ç§°ä¸ºä¼°ä»·å‡½æ•°ã€‚å…¶ä¸€èˆ¬å½¢å¼ä¸ºï¼š\nf(x) = g(x)+h(x)\nå…¶ä¸­g(x)è¡¨ç¤ºä»åˆå§‹èŠ‚ç‚¹S0åˆ°èŠ‚ç‚¹xçš„ä»£ä»·ï¼›h(x)æ˜¯ä»èŠ‚ç‚¹xåˆ°ç›®æ ‡èŠ‚ç‚¹Sgçš„æœ€ä¼˜è·¯å¾„çš„ä»£ä»·çš„ä¼°è®¡ï¼Œå®ƒä½“ç°äº†é—®é¢˜çš„å¯å‘æ€§ä¿¡æ¯ï¼Œç§°ä¸ºå¯å‘å‡½æ•°ã€‚ f(x) å†³å®šèŠ‚ç‚¹åœ¨OPENè¡¨ä¸­çš„æ¬¡åºã€‚g(x) æŒ‡å‡ºäº†æœç´¢çš„æ¨ªå‘è¶‹åŠ¿ï¼Œæœ‰åˆ©äºæœç´¢çš„å®Œå¤‡æ€§ï¼Œä½†å½±å“æœç´¢çš„æ•ˆç‡ã€‚h(x)æŒ‡å‡ºäº†æœç´¢çš„çºµå‘è¶‹åŠ¿ï¼Œæœ‰åˆ©äºæé«˜æœç´¢çš„æ•ˆç‡ï¼Œä½†å½±å“æœç´¢çš„å®Œå¤‡æ€§ã€‚\n\nå±€éƒ¨æ‹©ä¼˜æœç´¢å±€éƒ¨æ‹©ä¼˜æœç´¢æ˜¯ä¸€ç§å¯å‘å¼æœç´¢æ–¹æ³•ï¼Œæ˜¯å¯¹æ·±åº¦ä¼˜å…ˆæœç´¢æ–¹æ³•çš„ä¸€ç§æ”¹è¿›ã€‚åŸºæœ¬æ€æƒ³ï¼šå½“ä¸€ä¸ªèŠ‚ç‚¹è¢«æ‰©å±•ä»¥åï¼ŒæŒ‰f(x)å¯¹æ¯ä¸€ä¸ªå­èŠ‚ç‚¹è®¡ç®—ä¼°ä»·å€¼ï¼Œå¹¶é€‰æ‹©æœ€å°è€…ä½œä¸ºä¸‹ä¸€ä¸ªè¦è€ƒå¯Ÿçš„èŠ‚ç‚¹ã€‚\næœç´¢è¿‡ç¨‹\n\næŠŠåˆå§‹èŠ‚ç‚¹S0æ”¾å…¥OPENè¡¨ï¼Œè®¡ç®—f(S0)ã€‚\nå¦‚æœOPENè¡¨ä¸ºç©ºï¼Œåˆ™é—®é¢˜æ— è§£ï¼Œé€€å‡ºã€‚\næŠŠOPENè¡¨çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆè®°ä¸ºèŠ‚ç‚¹nï¼‰å–å‡ºæ”¾å…¥CLOSEè¡¨ã€‚\nè€ƒå¯ŸèŠ‚ç‚¹næ˜¯å¦ä¸ºç›®æ ‡èŠ‚ç‚¹ã€‚è‹¥æ˜¯ï¼Œåˆ™æ±‚å¾—äº†é—®é¢˜çš„è§£ï¼Œé€€å‡ºã€‚\nè‹¥èŠ‚ç‚¹nä¸å¯æ‰©å±•ï¼Œåˆ™è½¬ç¬¬2æ­¥ã€‚\næ‰©å±•èŠ‚ç‚¹nï¼Œç”¨ä¼°ä»·å‡½æ•°f(x)è®¡ç®—æ¯ä¸ªå­èŠ‚ç‚¹çš„ä¼°ä»·å€¼ï¼Œå¹¶æŒ‰ä¼°ä»·å€¼ä»å°åˆ°å¤§çš„é¡ºåºæ”¾åˆ°OPENè¡¨ä¸­çš„é¦–éƒ¨ï¼Œå¹¶ä¸ºæ¯ä¸€ä¸ªå­èŠ‚ç‚¹éƒ½é…ç½®æŒ‡å‘çˆ¶èŠ‚ç‚¹çš„æŒ‡é’ˆï¼Œç„¶åè½¬ç¬¬2æ­¥ã€‚\n\n\nåœ¨å±€éƒ¨æ‹©ä¼˜æœç´¢ä¸­ï¼Œè‹¥ä»¤f(x) = g(x)ï¼Œåˆ™å±€éƒ¨æ‹©ä¼˜æœç´¢å°±æˆä¸ºä»£ä»·æ ‘çš„æ·±åº¦ä¼˜å…ˆæœç´¢ã€‚åœ¨å±€éƒ¨æ‹©ä¼˜æœç´¢ä¸­ï¼Œè‹¥ä»¤f(x) =d(x)ï¼Œè¿™é‡Œd(x) è¡¨ç¤ºèŠ‚ç‚¹xçš„æ·±åº¦ï¼Œåˆ™å±€éƒ¨æ‹©ä¼˜æœç´¢å°±æˆä¸ºæ·±åº¦ä¼˜å…ˆæœç´¢ã€‚å› æ­¤ï¼šæ·±åº¦ä¼˜å…ˆæœç´¢ã€ä»£ä»·æ ‘çš„æ·±åº¦ä¼˜å…ˆæœç´¢å‡ä¸ºå±€éƒ¨æ‹©ä¼˜æœç´¢çš„ç‰¹ä¾‹\n\nå…¨å±€æ‹©ä¼˜æœç´¢æ¯å½“è¦é€‰æ‹©ä¸‹ä¸€ä¸ªèŠ‚ç‚¹è¿›è¡Œè€ƒå¯Ÿæ—¶ï¼Œå…¨å±€æ‹©ä¼˜æœç´¢æ¯æ¬¡æ€»æ˜¯ä»OPENè¡¨çš„å…¨ä½“èŠ‚ç‚¹ä¸­é€‰æ‹©ä¸€ä¸ªä¼°ä»·å€¼æœ€å°çš„èŠ‚ç‚¹ã€‚æœç´¢è¿‡ç¨‹\n\næŠŠåˆå§‹èŠ‚ç‚¹S0æ”¾å…¥OPENè¡¨ï¼Œè®¡ç®—f(S0)ã€‚\nå¦‚æœOPENè¡¨ä¸ºç©ºï¼Œåˆ™é—®é¢˜æ— è§£ï¼Œé€€å‡ºã€‚\næŠŠOPENè¡¨çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆè®°ä¸ºèŠ‚ç‚¹nï¼‰å–å‡ºæ”¾å…¥CLOSEè¡¨ã€‚\nè€ƒå¯ŸèŠ‚ç‚¹næ˜¯å¦ä¸ºç›®æ ‡èŠ‚ç‚¹ã€‚è‹¥æ˜¯ï¼Œåˆ™æ±‚å¾—äº†é—®é¢˜çš„è§£ï¼Œé€€å‡ºã€‚\nè‹¥èŠ‚ç‚¹nä¸å¯æ‰©å±•ï¼Œåˆ™è½¬ç¬¬2æ­¥ã€‚\næ‰©å±•èŠ‚ç‚¹nï¼Œç”¨ä¼°ä»·å‡½æ•°f(x)è®¡ç®—æ¯ä¸ªå­èŠ‚ç‚¹çš„ä¼°ä»·å€¼ï¼Œå¹¶ä¸ºæ¯ä¸€ä¸ªå­èŠ‚ç‚¹éƒ½é…ç½®æŒ‡å‘çˆ¶èŠ‚ç‚¹çš„æŒ‡é’ˆã€‚æŠŠè¿™äº›å­èŠ‚ç‚¹éƒ½é€å…¥OPENè¡¨ä¸­ï¼Œç„¶åå¯¹OPENè¡¨ä¸­çš„å…¨éƒ¨èŠ‚ç‚¹æŒ‰ä¼°ä»·å€¼ä»å°è‡³å¤§çš„é¡ºåºè¿›è¡Œæ’åºï¼Œç„¶åè½¬ç¬¬2æ­¥ã€‚\n\n\nåœ¨å…¨å±€æ‹©ä¼˜æœç´¢ä¸­ï¼Œè‹¥ä»¤f(x) = g(x)ï¼Œåˆ™å®ƒå°±æˆä¸ºä»£ä»·æ ‘çš„å¹¿åº¦ä¼˜å…ˆæœç´¢ã€‚åœ¨å…¨å±€æ‹©ä¼˜æœç´¢ä¸­ï¼Œè‹¥ä»¤f(x) =d(x)ï¼Œè¿™é‡Œd(x) è¡¨ç¤ºèŠ‚ç‚¹xçš„æ·±åº¦ï¼Œåˆ™å®ƒå°±æˆä¸ºå¹¿åº¦ä¼˜å…ˆæœç´¢ã€‚å› æ­¤ï¼šå¹¿åº¦ä¼˜å…ˆæœç´¢ã€ä»£ä»·æ ‘çš„å¹¿åº¦ä¼˜å…ˆæœç´¢æ˜¯å…¨å±€æ‹©ä¼˜æœç´¢çš„ä¸¤ä¸ªç‰¹ä¾‹ã€‚\n\nä¾‹å­è®¾ä¼°ä»·å‡½æ•°ä¸º f(x)=d(x)+h(x)ï¼Œå…¶ä¸­ï¼Œd(x)è¡¨ç¤ºèŠ‚ç‚¹xçš„æ·±åº¦ï¼Œh(x)è¡¨ç¤ºèŠ‚ç‚¹xçš„æ ¼å±€ä¸ç›®æ ‡èŠ‚ç‚¹æ ¼å±€ä¸ç›¸åŒçš„ç‰Œæ•°ã€‚\nç¬¬ä¸‰ç« å˜é‡ä»£æ¢ä»£æ¢æ˜¯ä¸€ä¸ªå½¢å¦‚${t_1/x_1,t_2/x_2,â€¦,t_n/x_n}$çš„æœ‰é™é›†åˆã€‚å…¶ä¸­$t_1,t_2,â€¦,t_n$æ˜¯é¡¹ï¼ˆå¸¸é‡ã€å˜é‡ã€å‡½æ•°ï¼‰;$x_1,x_2,â€¦,x_n$æ˜¯ï¼ˆæŸä¸€å…¬å¼ä¸­ï¼‰äº’ä¸ç›¸åŒçš„å˜å…ƒï¼›$t_i/x_i$è¡¨ç¤ºç”¨$t_i$ä»£æ¢$x_i$ä¸å…è®¸$t_i$ä¸$x_i$ç›¸åŒï¼Œä¹Ÿä¸å…è®¸å˜å…ƒ$x_i$å¾ªç¯åœ°å‡ºç°åœ¨å¦ä¸€ä¸ª$t_j$ä¸­ã€‚\n\nä¾‹å¦‚ï¼š{a/x,f(b)/y,w/z}æ˜¯ä¸€ä¸ªä»£æ¢{g(y)/x,f(x)/y}ä¸æ˜¯ä»£æ¢{g(a)/x,f(x)/y}æ˜¯ä»£æ¢\n\nä»£æ¢çš„å¤åˆå®šä¹‰ è®¾$\\theta={t_1/x_1,t_2/x_2,\\cdots,t_n/x_n}$$\\lambda={u_1/y_1,u_2/y_2,\\cdots,u_m/y_m}$æ˜¯ä¸¤ä¸ªä»£æ¢åˆ™è¿™ä¸¤ä¸ªä»£æ¢çš„å¤åˆä¹Ÿæ˜¯ä¸€ä¸ªä»£æ¢ï¼Œå®ƒæ˜¯ä»\n\\{t_1\\lambda/x_1,t_2\\lambda/x_2,\\cdots,t_n\\lambda/x_n,u_1/y_1,u_2/y_2,\\cdots,u_m/y_m\\}ä¸­åˆ å»å¦‚ä¸‹ä¸¤ç§å…ƒç´ ï¼š$t_i\\lambda/x_i \\quad å½“t_i\\lambda=x_i$$u_i/y_i \\quad å½“y_i\\in{x_1,x_2,\\cdots,x_n}$åå‰©ä¸‹çš„å…ƒç´ æ‰€æ„æˆçš„é›†åˆï¼Œè®°ä¸ºÎ¸Â°Î»\n\n(1) $t_i\\lambda$è¡¨ç¤ºå¯¹$t_i$è¿ç”¨Î»è¿›è¡Œä»£æ¢ã€‚(2)Î¸Â°Î»å°±æ˜¯å¯¹ä¸€ä¸ªå…¬å¼Få…ˆè¿ç”¨Î¸è¿›è¡Œä»£æ¢ï¼Œç„¶åå†è¿ç”¨Î»è¿›è¡Œä»£æ¢ï¼šF(Î¸Â°Î»)=ï¼ˆF Î¸ï¼‰Î»\n\næœ€ä¸€èˆ¬åˆä¸€\nF={P(a,x,f(g(y))),P(z,f(z),f(u))}\næ±‚å…¶æœ€ä¸€èˆ¬åˆä¸€çš„è¿‡ç¨‹ï¼š\nä»¤F0=F, Ïƒ0=Îµã€‚ F0ä¸­æœ‰ä¸¤ä¸ªè¡¨è¾¾å¼ï¼Œæ‰€ä»¥Ïƒ0ä¸æ˜¯æœ€ä¸€èˆ¬åˆä¸€ã€‚å·®å¼‚é›†ï¼šD0={a,z}ã€‚ä»£æ¢ï¼š$ {a/z}F1= F0 {a/z}={P(a,x,f(g(y))),P(a,f(a),f(u))} ã€‚Ïƒ1=Ïƒ0Â°{a/z}={a/z}D1={x,f(a)} ã€‚ä»£æ¢ï¼š {f(a)/x}F2=F1{f(a)/x}={P(a,f(a),f(g(y))),P(a,f(a),f(u))} ã€‚Ïƒ2=Ïƒ1Â°{f(a)/x}={a/z,f(a)/x}D2={g(y),u} ã€‚ä»£æ¢ï¼š {g(y)/u}F3=F2{g(y)/u}={P(a,f(a),f(g(y))),P(a,f(a),f(g(y)))} ã€‚Ïƒ3=Ïƒ2Â°{g(y)/u}={a/z,f(a)/x,g(y)/u} $\n\nå­å¥é›†å®šä¹‰ï¼š ä»»ä½•æ–‡å­—çš„æå–å¼ç§°ä¸ºå­å¥(1) åˆå–èŒƒå¼ï¼šC1 âˆ§C2 âˆ§C3â€¦ âˆ§Cn(2) å­å¥é›†:     S= {C1 ,C2 ,C3â€¦ ,Cn}(3)ä»»ä½•è°“è¯å…¬å¼Féƒ½å¯é€šè¿‡ç­‰ä»·å…³ç³»åŠæ¨ç†è§„åˆ™åŒ–ä¸ºç›¸åº”çš„å­å¥é›†S\næŠŠè°“è¯å…¬å¼åŒ–æˆå­å¥é›†\nåˆ©ç”¨ç­‰ä»·å…³ç³»æ¶ˆå»â€œâ†’â€å’Œâ€œâ†”â€ä¾‹å¦‚å…¬å¼$(\\forall x)((\\forall y) P(x, y) \\rightarrow \\neg(\\forall y)(Q(x, y) \\rightarrow R(x, y)))$å¯ç­‰ä»·å˜æ¢æˆ$(\\forall x)(\\neg(\\forall y) P(x, y) \\vee \\neg(\\forall y)(\\neg Q(x, y) \\vee R(x, y)))$\nåˆ©ç”¨ç­‰ä»·å…³ç³»æŠŠâ€œÂ¬â€ç§»åˆ°ç´§é è°“è¯çš„ä½ç½®ä¸Šä¸Šå¼ç»ç­‰ä»·å˜æ¢å$(\\forall x)((\\exists y) \\neg P(x, y) \\vee(\\exists y)(Q(x, y) \\wedge \\neg R(x, y)))$\né‡æ–°å‘½åå˜å…ƒï¼Œä½¿ä¸åŒé‡è¯çº¦æŸçš„å˜å…ƒæœ‰ä¸åŒçš„åå­—ä¸Šå¼ç»å˜æ¢å$(\\forall x)((\\exists y) \\neg P(x, y) \\vee(\\exists z)(Q(x, z) \\wedge \\neg R(x, z)))$\næ¶ˆå»å­˜åœ¨é‡è¯a.å­˜åœ¨é‡è¯å‰é¢æ²¡æœ‰å…¨ç§°é‡è¯æ—¶ï¼Œåˆ™åªè¦ç”¨ä¸€ä¸ªæ–°çš„ä¸ªä½“å¸¸é‡æ›¿æ¢å—è¯¥é‡è¯çº¦æŸçš„å˜å…ƒã€‚b.å­˜åœ¨é‡è¯å‰é¢æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªå…¨ç§°é‡è¯æ—¶ï¼Œè¦ç”¨å‡½æ•°f(x1,x2,â€¦,xn)æ›¿æ¢å—è¯¥å­˜åœ¨é‡è¯çº¦æŸçš„å˜å…ƒã€‚ä¸Šå¼ä¸­å­˜åœ¨é‡è¯($\\exists y$)åŠ($\\exists z$)éƒ½ä½äº($\\forall x$)çš„åé¢ï¼Œæ‰€ä»¥éœ€è¦ç”¨å‡½æ•°æ›¿æ¢ï¼Œè®¾æ›¿æ¢yå’Œzçš„å‡½æ•°åˆ†åˆ«æ˜¯f(x)å’Œg(x)ï¼Œåˆ™æ›¿æ¢åå¾—åˆ°$(\\forall x)(\\neg P(x, f(x)) \\vee(Q(x, g(x)) \\wedge \\neg R(x, g(x))))$\næŠŠå…¨ç§°é‡è¯å…¨éƒ¨ç§»åˆ°å…¬å¼çš„å·¦è¾¹$(\\forall x)(\\neg P(x, f(x)) \\vee(Q(x, g(x)) \\wedge \\neg R(x, g(x))))$\nåˆ©ç”¨ç­‰ä»·å…³ç³»æŠŠå…¬å¼åŒ–ä¸ºSkolemæ ‡å‡†å½¢$P \\vee(Q \\wedge R) \\Leftrightarrow(P \\vee Q) \\wedge(P \\vee R)$Skolemæ ‡å‡†å½¢çš„ä¸€èˆ¬å½¢å¼æ˜¯$\\left(\\forall x{1}\\right)\\left(\\forall x{2}\\right) \\cdots\\left(\\forall x_{n}\\right) M$å…¶ä¸­ï¼ŒMæ˜¯å­å¥çš„åˆå–å¼ï¼Œç§°ä¸ºSkolemæ ‡å‡†å½¢çš„æ¯å¼ã€‚ä¸Šå¼åŒ–ä¸ºSkolemæ ‡å‡†å½¢åå¾—åˆ°$(\\forall x)((\\neg P(x, f(x)) \\vee Q(x, g(x))) \\wedge(\\neg P(x, f(x)) \\vee \\neg R(x, g(x))))$\næ¶ˆå»å…¨ç§°é‡è¯\nå¯¹å˜å…ƒæ›´åï¼Œä½¿ä¸åŒå­å¥ä¸­çš„å˜å…ƒä¸åŒå$(\\neg P(x, f(x)) \\vee Q(x, g(x))) \\wedge(\\neg P(y, f(y)) \\vee \\neg R(y, g(y)))$\næ¶ˆå»åˆå–è¯ï¼Œå°±å¾—åˆ°å­å¥é›†$\\neg P(x, f(x)) \\vee Q(x, g(x))$$\\neg P(y, f(y)) \\vee \\neg R(y, g(y))$\n\næµ·ä¼¯ä¼¦ç†è®ºï¼ˆHerbrandï¼‰ä¸ºäº†åˆ¤æ–­å­å¥é›†çš„ä¸å¯æ»¡è¶³æ€§ï¼Œéœ€è¦å¯¹æ‰€æœ‰å¯èƒ½è®ºåŸŸä¸Šçš„æ‰€æœ‰è§£é‡Šè¿›è¡Œåˆ¤å®šã€‚åªæœ‰å½“å­å¥é›†å¯¹ä»»ä½•éç©ºä¸ªä½“åŸŸä¸Šçš„ä»»ä½•ä¸€ä¸ªè§£é‡Šéƒ½æ˜¯ä¸å¯æ»¡è¶³çš„æ—¶å€™ï¼Œæ‰å¯æ–­å®šè¯¥å­å¥é›†æ˜¯ä¸å¯æ»¡è¶³çš„ã€‚\né²æ»¨é€Šå½’ç»“åŸç†å­å¥é›†Sçš„ä¸å¯æ»¡è¶³æ€§ï¼šå¯¹äºä»»æ„è®ºåŸŸä¸­çš„ä»»æ„ä¸€ä¸ªè§£é‡Šï¼ŒSä¸­çš„å­å¥ä¸èƒ½åŒæ—¶å–å¾—çœŸå€¼Tã€‚ä¸€æ—¦Sä¸­åŒ…å«ç©ºå­å¥ï¼Œåˆ™Så¿…ä¸å¯æ»¡è¶³ã€‚    \nåŸºæœ¬æ€æƒ³ï¼šæ£€æŸ¥å­å¥é›†Sä¸­æ˜¯å¦åŒ…å«ç©ºå­å¥ã€‚è‹¥åŒ…å«ï¼Œåˆ™Sä¸å¯æ»¡è¶³ï¼›è‹¥ä¸åŒ…å«ï¼Œå°±åœ¨å­å¥é›†ä¸­é€‰æ‹©åˆé€‚çš„å­å¥è¿›è¡Œå½’ç»“ï¼Œä¸€æ—¦é€šè¿‡å½’ç»“èƒ½æ¨å‡ºç©ºå­å¥ï¼Œå°±è¯´æ˜å­å¥é›†Sæ˜¯ä¸å¯æ»¡è¶³çš„ã€‚\nå½’ç»“åæ¼”çš„æ­¥éª¤è®¾Fä¸ºå·²çŸ¥å‰æçš„å…¬å¼é›†ï¼ŒQä¸ºç›®æ ‡å…¬å¼(ç»“è®º)ï¼Œç”¨å½’ç»“åæ¼”è¯æ˜Qä¸ºçœŸçš„æ­¥éª¤æ˜¯ï¼š\n\nå¦å®šQï¼Œå¾—åˆ°Â¬Qï¼›\næŠŠÂ¬Qå¹¶å…¥åˆ°å…¬å¼é›†Fä¸­ï¼Œå¾—åˆ°{F, Â¬Q};\næŠŠå…¬å¼é›†{F, Â¬Q}åŒ–ä¸ºå­å¥é›†Sï¼›\nåº”ç”¨å½’ç»“åŸç†å¯¹å­å¥é›†Sä¸­çš„å­å¥è¿›è¡Œå½’ç»“ï¼Œå¹¶æŠŠæ¯æ¬¡å½’ç»“å¾—åˆ°çš„å½’ç»“å¼éƒ½å¹¶å…¥Sä¸­ã€‚å¦‚æ­¤åå¤è¿›è¡Œï¼Œè‹¥å‡ºç°äº†ç©ºå­å¥ï¼Œåˆ™åœæ­¢å½’ç»“ï¼Œæ­¤æ—¶å°±è¯æ˜äº†Qä¸ºçœŸã€‚\n\nåº”ç”¨å½’ç»“åŸç†æ±‚å–é—®é¢˜çš„ç­”æ¡ˆæ±‚è§£çš„æ­¥éª¤ï¼š\næŠŠå·²çŸ¥å‰æç”¨è°“è¯å…¬å¼è¡¨ç¤ºå‡ºæ¥ï¼Œå¹¶ä¸”åŒ–ä¸ºç›¸åº”çš„å­å¥é›†ã€‚è®¾è¯¥å­å¥é›†çš„åå­—ä¸ºSã€‚\næŠŠå¾…æ±‚è§£çš„é—®é¢˜ä¹Ÿç”¨è°“è¯å…¬å¼è¡¨ç¤ºå‡ºæ¥ï¼Œç„¶åæŠŠå®ƒå¦å®šå¹¶ä¸è°“è¯Answeræ„æˆæå–å¼ã€‚Answeræ˜¯ä¸€ä¸ªä¸ºäº†æ±‚è§£é—®é¢˜è€Œä¸“è®¾çš„è°“è¯ï¼Œå…¶å˜å…ƒé¡»ä¸é—®é¢˜å…¬å¼çš„å˜å…ƒå®Œå…¨ä¸€è‡´ã€‚\næŠŠæ­¤æå–å¼åŒ–ä¸ºå­å¥é›†ï¼Œå¹¶ä¸”æŠŠè¯¥å­å¥é›†å¹¶å…¥åˆ°å­å¥é›†Sä¸­ï¼Œå¾—åˆ°å­å¥é›†Sâ€™ã€‚\nå¯¹Sâ€™åº”ç”¨å½’ç»“åŸç†è¿›è¡Œå½’ç»“ã€‚\nè‹¥å¾—åˆ°å½’ç»“å¼Answerï¼Œåˆ™ç­”æ¡ˆå°±åœ¨Answerä¸­ã€‚\n\nç¬¬å››ç« å¯ä¿¡åº¦æ–¹æ³•æ¦‚å¿µ\n\næ ¹æ®ç»éªŒå¯¹ä¸€ä¸ªäº‹ç‰©å’Œç°è±¡ä¸ºçœŸçš„ç›¸ä¿¡ç¨‹åº¦ç§°ä¸ºå¯ä¿¡åº¦ã€‚\nåœ¨å¯ä¿¡åº¦æ–¹æ³•ä¸­ï¼Œç”±ä¸“å®¶ç»™å‡ºè§„åˆ™æˆ–çŸ¥è¯†çš„å¯ä¿¡åº¦ï¼Œä»è€Œå¯é¿å…å¯¹å…ˆéªŒæ¦‚ç‡ã€æ¡ä»¶æ¦‚ç‡çš„è¦æ±‚ã€‚\nå¯ä¿¡åº¦æ–¹æ³•é¦–å…ˆåœ¨ä¸“å®¶ç³»ç»ŸMYCINä¸­å¾—åˆ°äº†æˆåŠŸçš„åº”ç”¨ã€‚\n\nC-Fæ¨¡å‹ç»„åˆè¯æ®ä¸ç¡®å®šæ€§çš„ç®—æ³•å¯é‡‡ç”¨æœ€å¤§æœ€å°æ³•ã€‚è‹¥$\\mathrm{E}=\\mathrm{E}{1} \\text { AND } \\mathrm{E}{2} \\text { AND } \\ldots \\text { AND } \\mathrm{E}_{\\mathrm{n}}$ï¼Œåˆ™\n\\mathrm{CF}(\\mathrm{E})=\\min \\left\\{\\mathrm{CF}\\left(\\mathrm{E}_{1}\\right), \\mathrm{CF}\\left(\\mathrm{E}_{2}\\right), \\ldots, \\mathrm{CF}\\left(\\mathrm{E}_{n}\\right)\\right\\}è‹¥$\\mathrm{E}=\\mathrm{E}{1} \\text { OR } \\mathrm{E}{2} \\text { OR } \\ldots \\text { OR } \\mathrm{E}_{\\mathrm{n}}$ï¼Œåˆ™\n\\mathrm{CF}(\\mathrm{E})=\\max \\left\\{\\mathrm{CF}\\left(\\mathrm{E}_{1}\\right), \\mathrm{CF}\\left(\\mathrm{E}_{2}\\right), \\ldots, \\mathrm{CF}\\left(\\mathrm{E}_{\\mathrm{n}}\\right)\\right\\}ç»“è®ºä¸ç¡®å®šæ€§çš„åˆæˆç®—æ³•è‹¥ç”±å¤šæ¡ä¸åŒçŸ¥è¯†æ¨å‡ºäº†ç›¸åŒçš„ç»“è®ºï¼Œä½†å¯ä¿¡åº¦ä¸åŒï¼Œåˆ™ç”¨åˆæˆç®—æ³•æ±‚å‡ºç»¼åˆå¯ä¿¡åº¦ã€‚è®¾æœ‰å¦‚ä¸‹çŸ¥è¯†ï¼šIF $\\quad \\mathrm{E}{1} \\quad$ THEN $\\quad \\mathrm{H} \\quad\\left(\\mathrm{CF}\\left(\\mathrm{H}, \\mathrm{E}{1}\\right)\\right)$IF $\\quad \\mathrm{E}{2} \\quad$ THEN $\\quad \\mathrm{H} \\quad\\left(\\mathrm{CF}\\left(\\mathrm{H}, \\mathrm{E}{2}\\right)\\right)$åˆ™ç»“è®ºHçš„ç»¼åˆå¯ä¿¡åº¦åˆ†å¦‚ä¸‹ä¸¤æ­¥ç®—å‡ºï¼šé¦–å…ˆåˆ†åˆ«å¯¹æ¯ä¸€æ¡çŸ¥è¯†æ±‚å‡º$CF(H)$: è®¡ç®—$CF1(H)$,$CF_2(H)$ç„¶åç”¨ä¸‹è¿°å…¬å¼æ±‚å‡ºE1ä¸E2å¯¹Hçš„ç»¼åˆå¯ä¿¡åº¦$CF{12}(H)$:\nP(H | S)=\\left\\{\\begin{array}{ll}{C F_{1}(H)+C F_{2}(H)-C F_{1}(H) \\times C F_{2}(H), C F_{1}(H) \\geq 0, C F_{2}(H) \\geq 0}\\\\ {C F_{1}(H)+C F_{2}(H)+C F_{1}(H) \\times C F_{2}(H), C F_{1}(H)","tags":["NOTE"]},{"title":"Windows|linuxå­ç³»ç»Ÿå®‰è£…åŠä½¿ç”¨","url":"/2019/06/19/linux%E5%AD%90%E7%B3%BB%E7%BB%9F/","content":"Windows 10 ä¸“ä¸šç‰ˆ\næœ€è¿‘ç”¨cè¯­è¨€å†™socketå¥—æ¥å­—ï¼Œéœ€è¦åœ¨Linuxä¸Šç¼–è¯‘è¿è¡Œã€‚ä½†ç”¨è™šæ‹Ÿæœºä¸ä»…å å†…å­˜å¤§è€Œä¸”è€—ç”µä¹ŸæŒºå¤šçš„ï¼Œçªç„¶æƒ³èµ·æ¥æœ‰ä¸ªLinuxå­ç³»ç»Ÿã€‚äºæ˜¯å°±å†³å®šæ”¾å¼ƒvboxï¼Œè¯•è¯•ç³»ç»Ÿè‡ªå¸¦çš„ã€‚\nå®‰è£…é¦–å…ˆåœ¨windowsåŠŸèƒ½ä¸­å¯åŠ¨â€é€‚ç”¨äºLinuxçš„windowså­ç³»ç»Ÿâ€œ\n\nç„¶ååœ¨Microsoft storeé‡Œæœç´¢ubuntu\n\nåœ¨å‰ä¸‰ä¸ªé‡Œé€‰ä¸€ä¸ªä¸‹è½½(æˆ‘é€‰çš„æ˜¯18.04çš„)ï¼Œä¸‹è½½å®Œåå¯åŠ¨å¹¶æ ¹æ®æç¤ºè®¾ç½®ç”¨æˆ·åå’Œå¯†ç ï¼Œæœ€åç»“æœå¦‚ä¸‹å›¾\n\næœ€åå®‰è£…ç¼–è¯‘ç¯å¢ƒï¼Œç”±äºç›®å‰åªç”¨Cå’ŒC++,æ‰€ä»¥æˆ‘åªå®‰è£…äº†gccå’Œg++\nsudo apt-get install build-essential\n\nä½¿ç”¨ç»è¿‡ä¸Šé¢çš„æ­¥éª¤å®‰è£…æˆåŠŸåï¼Œæ‰“å¼€å‘½ä»¤è¡Œï¼Œæ‰“å¼€ä½ è¦ç¼–è¯‘çš„æ–‡ä»¶çš„æ–‡ä»¶å¤¹ä¸‹ï¼Œè¾“å…¥bashï¼Œå¯åŠ¨å­ç³»ç»Ÿã€‚ä¸‹æ¥çš„æ“ä½œå°±å’ŒLinuxä¸­ä¸€æ ·äº†ã€‚\nLinuxå­ç³»ç»Ÿçš„ä½ç½®ä»¥æˆ‘çš„ç³»ç»Ÿä¸ºä¾‹ï¼ŒWSLçš„rootç›®å½•å¯¹åº”windowsçš„ï¼šC:\\Users\\name\\AppData\\Local\\Packages\\CanonicalGroupLimited.Ubuntu18.04onWindows_79rhkp1fndgsc\\LocalState\\rootfsä½†å®é™…ä¸Šå¾®è½¯ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªé»˜è®¤çš„å˜é‡å¯ä»¥ç›´æ¥æŒ‡å‘WSLçš„ç›®å½•ï¼Œä½ å¯ä»¥åœ¨è¿è¡Œ(win+R)æˆ–èµ„æºç®¡ç†å™¨çš„è·¯å¾„é‡Œç›´æ¥è¾“å…¥\\\\wsl$è¿›å…¥Ubuntuçš„ç›®å½•\n\nä»¥ä¸Šå°±æ˜¯Linuxå­ç³»ç»Ÿçš„ç®€å•ä½¿ç”¨ï¼Œå¦‚æœæœ‰æ–°çš„å‘ç°å°†ä¼šç»§ç»­æ›´æ–°ã€‚åŒæ—¶æ¬¢è¿ç•™è¨€åˆ†äº«ï¼ãƒ¾(â€¢Ï‰â€¢`)o\nWSLå®‰è£…è½¯ä»¶æŠ¥é”™/sbin/ldconfig.real: /usr/lib/wsl/lib/libcuda.so.1 is not a symbolic linkè§£å†³cd /usr/lib/wslsudo mkdir lib2sudo ln -s lib/* lib2\næ›´æ”¹wslé…ç½®æ–‡ä»¶sudo vim /etc/ld.so.conf.d/ld.wsl.confå°† /usr/lib/wsl/lib æ”¹ä¸º /usr/lib/wsl/lib2æµ‹è¯•ä¿®æ”¹æ˜¯å¦ç”Ÿæ•ˆsudo ldconfig\næ°¸ä¹…ä¿®æ”¹sudo cat &gt;&gt; /etc/wsl.conf &lt;&lt; EOF[automount]ldconfig = fasleEOF\n","tags":["Windows","Linux"]},{"title":"NOTE|ç½‘ç»œç¨‹åºè®¾è®¡","url":"/2019/06/14/%E7%BD%91%E7%BB%9C%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/","content":"ç½‘ç»œç¨‹åºè®¾è®¡ç®€å•çš„æ€»ç»“Ïˆ(ï½€âˆ‡Â´)Ïˆ\nLinux ç¼–ç¨‹åŸºç¡€Cè¯­è¨€ç¼–è¯‘gcc hello.c â€“o hello \nLinuxå¸¸ç”¨ç½‘ç»œè°ƒè¯•å‘½ä»¤æŸ¥çœ‹ç½‘ç»œé…ç½®ï¼ˆç½‘å¡ï¼‰ifconfigæŸ¥çœ‹æ‰€æœ‰ç½‘ç»œè¿æ¥çŠ¶æ€nestat â€“ aæŸ¥çœ‹TCPåè®®ç½‘ç»œè¿æ¥çŠ¶æ€netstat â€“tæŸ¥çœ‹ç½‘ç»œè¿æ¥æ‰€å±è¿›ç¨‹PIDnetstat -pæ£€æŸ¥ç½‘ç»œæ˜¯å¦å¯è¾¾ping 127.0.0.1 \nLinuxæ“ä½œåŸºç¡€ls æ˜¾ç¤ºå½“å‰ç›®å½•ä¸­çš„å†…å®¹ ls ï¼l\ncd åˆ‡æ¢ç›®å½•cd /mnt/usbcd ..\nmkdir åˆ›å»ºç›®å½•mkdir workrmdir åˆ é™¤ç›®å½•rmdir work\ncp å¤åˆ¶æ–‡ä»¶cp prog1.c prog2.ccp prog1.c /mnt/usb\nrm åˆ é™¤æ–‡ä»¶æˆ–ç›®å½•rm prog1.crm *.*\nmv ç§»åŠ¨æˆ–æ”¹å˜æ–‡ä»¶åç§°mv prog1.c ..mv pro1.c prog2.c\nmoreå‘½ä»¤ls â€“l|more æ˜¾ç¤ºç”»é¢æš‚åœmore prog1.c æ˜¾ç¤ºæ–‡æœ¬æ–‡ä»¶å†…å®¹pwd æ˜¾ç¤ºå½“å‰æ‰€åœ¨ç›®å½•\nåŸºæœ¬socketå‡½æ•°å¿…é¡»çš„å¤´æ–‡ä»¶#include &lt;sys/types.h&gt;#include &lt;sys/socket.h&gt;#include &lt;netinet/in.h&gt;#include &lt;errno.h&gt;#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;\nåˆ›å»ºç½‘ç»œç«¯ç‚¹int sock;if((sock=socket(AF_INET,SOCK_STREAM,0))&lt;0)    exit(1);\n\nint socket (int family, int type, int protocol)åŠŸèƒ½ï¼šåˆ›å»ºsocketæè¿°ç¬¦å‚æ•°ï¼šï¼ˆP34è¡¨2ï¼1æè¿°äº†å¯èƒ½çš„å‚æ•°å€¼ï¼‰familyï¼ˆåè®®ç°‡ï¼‰ï¼šAF_INETã€AF_UNIXtypeï¼ˆç±»å‹ï¼‰ï¼šSOCK_STREAMã€SOCK_DGRAMã€SOCK_RAWprotocolï¼ˆåè®®ï¼‰ï¼šé»˜è®¤ä¸º0è¿”å›å€¼ï¼š&gt;0ï¼socketæè¿°ç¬¦ï¼Œ -1ï¼å¤±è´¥ï¼Œ ç³»ç»Ÿå…¨å±€å˜é‡errnoä¸ºé”™è¯¯ä»£ç \nè®¾ç½®åœ°å€struct sockaddr_in addr;bzero(&amp;srvaddr,sizeof(srvaddr));addr.sin_family=AF_INET;addr.sin_port=htons(1234);if(inet_aton(&quot;127.0.0.1&quot;,srvaddr.sin_addr.s_addr)==-1)&#123;\tprintf(&quot;addr convert error\\n&quot;);\texit(1);\t&#125;\nTCP/IPåè®®çš„socketåœ°å€å¸¸ç”¨åœ°å€å½¢å¼ï¼ˆå­—ç¬¦ä¸²ï¼‰ï¼šâ€œ127.0.0.1â€åœ°å€è½¬æ¢å‡½æ•°:inet_aton(const char *cp,struct in_addr *inp);char* inet_ntoa(struct in_addr in);\n\nç»‘å®šæœåŠ¡å™¨åœ°å€å’Œç«¯å£if( bind(sockfd,(struct sockaddr *)&amp;addr,sizeof(struct sockaddr))==-1)&#123;\t\t\tprintf(&quot;bind error\\n&quot;);\t\t\texit(1);\t&#125;\n\nint bind(int sockfd,struct sockaddr *myaddr,int addrlen);åŠŸèƒ½ï¼šç»‘å®šæœ¬åœ°åœ°å€å’Œç«¯å£å‚æ•°ï¼šsockfdï¼socketæè¿°ç¬¦myaddrï¼è‡ªå·±çš„åœ°å€addrlenï¼åœ°å€ç»“æ„é•¿åº¦è¿”å›å€¼ï¼š0ï¼æˆåŠŸï¼Œ-1ï¼å¤±è´¥ï¼Œerrnoä¸ºé”™è¯¯ä»£ç  \n\nç›‘å¬ç«¯å£if( listen(sockfd,BACKLOG) ==-1)&#123;\t\tprintf(&quot;listen error\\n&quot;);\t\texit(1);\t&#125;\n\nint listen(int sockfd,int backlog)åŠŸèƒ½ï¼šç›‘å¬æœ¬åœ°åœ°å€å’Œç«¯å£å‚æ•°ï¼šsockfdï¼å·²ç»‘å®šçš„socketæè¿°ç¬¦backlogï¼ä»¥å®Œæˆè¿æ¥ï¼Œç­‰å¾…æ¥å—çš„é˜Ÿåˆ—é•¿åº¦è¿”å›å€¼0ï¼æˆåŠŸï¼Œ-1ï¼å¤±è´¥ï¼Œerrnoä¸ºé”™è¯¯ä»£ç \n\næ¥å—å®¢æˆ·ç«¯è¿æ¥int sin_size=sizeof(struct sockaddr_in);\tint new_fd= accept(sockfd,(struct sockaddr *)&amp;clientaddr,&amp;sin_size);if(( new_fd==-1)&#123;\t\t\tprintf(&quot;accept errot\\n&quot;);\t\tcontinue;\t&#125;\n\nint accept(int sockfd,struct sockaddr *clientaddr,int addrlen);åŠŸèƒ½ï¼šæ¥å—è¿æ¥å‚æ•°ï¼šsockfdï¼socketæè¿°ç¬¦clientaddrï¼å®¢æˆ·ç«¯åœ°å€addrlenï¼åœ°å€ç»“æ„é•¿åº¦è¿”å›å€¼:0ï¼æˆåŠŸï¼Œè¿”å›æ–°çš„socketæè¿°ç¬¦æ ‡è¯†å·²æ¥å—çš„è¿æ¥-1ï¼å¤±è´¥ï¼Œerrnoä¸ºé”™è¯¯ä»£ç \n\næ¥æ”¶æ•°æ®\nint read(int fd,char *buf,int len);åŠŸèƒ½ï¼šä»socketè¯»å–æ•°æ®å‚æ•°ï¼šfdï¼socketæè¿°ç¬¦bufï¼æ¥æ”¶æ•°æ®ç¼“å†²åŒºlenï¼è¦è¯»å–æ•°æ®å¤§å°è¿”å›å€¼â‰¥0ï¼æˆåŠŸï¼Œ-1ï¼å¤±è´¥ï¼Œerrnoä¸ºé”™è¯¯ä»£ç \n\nå‘é€æ•°æ®\nint write(int fd,char *buf,int len);åŠŸèƒ½ï¼šä»socketè¯»å–æ•°æ®å‚æ•°ï¼šfdï¼socketæè¿°ç¬¦bufï¼å‘é€æ•°æ®ç¼“å†²åŒºlenï¼è¦å‘é€æ•°æ®å¤§å°è¿”å›å€¼â‰¥0ï¼æˆåŠŸï¼Œ-1ï¼å¤±è´¥ï¼Œerrnoä¸ºé”™è¯¯ä»£ç \n\nå…³é—­socket\nint close(int sockfd)åŠŸèƒ½ï¼šå…³é—­socketå‚æ•°ï¼šsockfdï¼socketæè¿°ç¬¦è¿”å›å€¼0ï¼æˆåŠŸï¼Œ-1ï¼å¤±è´¥ï¼Œerrnoä¸ºé”™è¯¯ä»£ç è¯´æ˜è°ƒç”¨closeåªæ˜¯å°†å¯¹sockfdçš„å¼•ç”¨å‡1ï¼Œç›´åˆ°å¯¹sockfdçš„å¼•ç”¨ä¸º0æ—¶æ‰æ¸…é™¤sockfd ï¼ŒTCPåè®®å°†ç»§ç»­ä½¿ç”¨sockfdï¼Œç›´åˆ°æ‰€æœ‰æ•°æ®å‘é€å®Œæˆ \n\nè¿æ¥æœåŠ¡å™¨if( connect(sockfd,(struct sockaddr *)&amp;srvaddr,sizeof(struct sockaddr) )==-1)&#123;\tprintf(&quot;connect error\\n&quot;);\texit(1);\t&#125;\n\nint connect(int sockfd,struct sockaddr *servaddr,int addrlen)åŠŸèƒ½ï¼šè¿æ¥æœåŠ¡å™¨å‚æ•°ï¼šsockfdï¼socketæè¿°ç¬¦servaddrï¼æœåŠ¡å™¨åœ°å€addrlenï¼åœ°å€ç»“æ„é•¿åº¦è¿”å›å€¼ï¼š0ï¼æˆåŠŸï¼Œ-1ï¼å¤±è´¥ï¼Œerrnoä¸ºé”™è¯¯ä»£ç \n\né«˜çº§socketå‡½æ•°åŸŸåè®¿é—®struct hostent *he=gethostbyname(â€œwww.sina.com.cnâ€);if(he!=NULL)&#123;\tprintf(&quot;h_name:%s\\n&quot;,he-&gt;h_name);\tprintf(&quot;h_length:%d\\n&quot;,he-&gt;h_length);\tprintf(&quot;h_addrtype:%d&quot;,he-&gt;h_addrtype;\tfor(i=0;he-&gt;h_aliases[i] !=NULL;i++)\t\tprintf(&quot;h_aliases%d:%s\\n&quot;,i+1,he-&gt;h_aliases[i]); \t//åˆ—å‡ºæ‰€æœ‰åœ°å€\tfor(i=0;he-&gt;h_addr_list[i]!=NULL;i++)&#123;\t\tstruct in_addr *addr;\t\taddr=(struct in_addr *)he-&gt;h_addr_list[i];\t\tprintf(&quot;ip%d:%s\\n&quot;,(i+1),inet_ntoa(*addr));\t&#125;&#125;else\tprintf(&quot;gethostbyname error:%s\\n&quot;,hstrerror(h_errno));\n\nåŸŸååˆ°IPçš„è½¬æ¢å‡½æ•°struct hostent gethostbyname(const char name)åŠŸèƒ½ï¼šæŸ¥è¯¢åŸŸåå¯¹åº”çš„IPstruct hostent&#123;\tchar\t h_name;\t/*ä¸»æœºæ­£å¼åç§°*/\tchar\t**h_aliases;\t/*åˆ«ååˆ—è¡¨ï¼Œä»¥NULLç»“æŸ*/\tint \th_addrtype;\t/*ä¸»æœºåœ°å€ç±»å‹ï¼šAF_INET*/\tint \th_length;\t/*ä¸»æœºåœ°å€é•¿åº¦ï¼š4å­—èŠ‚32ä½*/\tchar \t**h_addr_list;\t/*ä¸»æœºç½‘ç»œåœ°å€åˆ—è¡¨ï¼Œä»¥NULLç»“æŸ*/&#125;#define \th_addr \th_addr_list[0]; //ä¸»æœºçš„ç¬¬ä¸€ä¸ªç½‘ç»œåœ°å€\nrecvå’Œsendint recv(int sockfd,void* buf,int len, int flags);int send(int sockfd,void* buf,int len,int flags);\nåŠŸèƒ½ï¼šé€šè¿‡å‚æ•°æ§åˆ¶è¯»å†™æ•°æ®å‚æ•°ï¼šsockfdï¼socketæè¿°ç¬¦bufï¼å‘é€æˆ–æ¥æ”¶æ•°æ®ç¼“å†²åŒºlenï¼å‘é€æˆ–æ¥æ”¶æ•°æ®é•¿åº¦flagsï¼å‘é€æˆ–æ¥æ”¶æ•°æ®çš„æ§åˆ¶å‚æ•°è¿”å›å€¼ï¼šâ‰¥0ï¼æˆåŠŸï¼Œ-1å¤±è´¥\n\næ§åˆ¶å‚æ•°è¯´æ˜\n\nflags=0ï¼Œç›¸å½“äºreadå’Œwriteå‡½æ•°flags=MSG_DONTROUTEï¼Œå‘é€æ•°æ®ä¸æŸ¥æ‰¾è·¯ç”±è¡¨ï¼Œé€‚ç”¨äºå±€åŸŸç½‘ï¼Œæˆ–åŒä¸€ç½‘æ®µflags=MSG_OOBï¼Œå‘é€å’Œæ¥æ”¶å¸¦å¤–æ•°æ®flags=MSG_PEEKï¼Œæ¥æ”¶æ•°æ®æ—¶ä¸ä»ç¼“å†²åŒºç§»èµ°æ•°æ®ï¼Œå…¶ä»–è¿›ç¨‹è°ƒç”¨readæˆ–recvä»ç„¶å¯ä»¥è¯»åˆ°æ•°æ®flags=MSG_WAITALLï¼Œæ•°æ®é‡ä¸å¤Ÿæ—¶ï¼Œè¯»æ“ä½œç­‰å¾…ï¼Œä¸è¿”å›ï¼Œä½†åœ¨æ”¶åˆ°ã€æ–‡ä»¶ç»“æŸç¬¦ã€ä¿¡å·ä»¥åŠå‡ºé”™æ—¶ï¼Œä»ç„¶ä¼šç»“æŸã€‚\né«˜çº§socketå‡½æ•°\nå¤šè·¯å¤ç”¨å¤šè·¯å¤ç”¨å‡½æ•°selectint select(int maxfd,fd_set rdset,fd_set wrest,fd_set exset,struct timeval timeout);åŠŸèƒ½ï¼šæ£€æŸ¥å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼ˆsocketæè¿°ç¬¦ï¼‰æ˜¯å¦å°±ç»ªï¼Œå½“æŸä¸€ä¸ªæè¿°ç¬¦å°±ç»ªï¼ˆå¯è¯»ã€å¯å†™æˆ–å‘ç”Ÿå¼‚å¸¸ï¼‰æ—¶å‡½æ•°è¿”å›ã€‚å¯ä»¥å®ç°è¾“å…¥è¾“å‡ºå¤šè·¯å¤ç”¨è¿”å›å€¼ï¼šæœ‰æè¿°ç¬¦å°±ç»ªåˆ™è¿”å›å°±ç»ªçš„æè¿°ç¬¦ä¸ªæ•°ï¼›è¶…æ—¶æ—¶é—´å†…æ²¡æœ‰æè¿°ç¬¦å°±ç»ªè¿”å›0ï¼›æ‰§è¡Œå¤±è´¥è¿”å›-1ã€‚\n\nå‚æ•°ï¼š\n\nmaxfdï¼éœ€è¦æµ‹è¯•çš„æè¿°ç¬¦çš„æœ€å¤§å€¼ï¼Œå®é™…æµ‹è¯•çš„æè¿°ç¬¦ä»0ï¼maxfd-1rdsetï¼éœ€è¦æµ‹è¯•æ˜¯å¦å¯è¯»çš„æè¿°ç¬¦é›†åˆï¼ˆåŒ…æ‹¬å¤„äºlistençŠ¶æ€çš„socketæ¥æ”¶åˆ°è¿æ¥è¯·æ±‚ï¼‰wrsetï¼éœ€è¦æµ‹è¯•æ˜¯å¦å¯å†™çš„æè¿°ç¬¦é›†åˆï¼ˆåŒ…æ‹¬ä»¥éé˜»å¡æ–¹å¼è°ƒç”¨connectæ˜¯å¦æˆåŠŸï¼‰exsetï¼éœ€è¦æµ‹è¯•æ˜¯å¦å¼‚å¸¸çš„æè¿°ç¬¦é›†åˆï¼ˆåŒ…æ‹¬æ¥æ”¶å¸¦å¤–æ•°æ®çš„socketæœ‰å¸¦å¤–æ•°æ®åˆ°è¾¾ï¼‰timeoutï¼æŒ‡å®šæµ‹è¯•è¶…æ—¶çš„æ—¶é—´ \n\ntimeoutå‚æ•°\n\ntimevalç»“æ„timeout=NULLï¼Œselectå°†æ°¸è¿œé˜»å¡ç›´åˆ°æœ‰ä¸€ä¸ªæè¿°ç¬¦å°±ç»ªï¼Œæˆ–è€…å‡ºç°é”™è¯¯ï¼ˆæ¥æ”¶åˆ°ä¿¡å·ï¼‰ã€‚timeout&gt;0ï¼Œåœ¨timeoutæ—¶é—´å†…å¦‚æœæœ‰æè¿°ç¬¦å°±ç»ªåˆ™è¿”å›ï¼Œå¦åˆ™åœ¨timeoutæ—¶é—´åè¿”å›0ï¼›å¦‚æœå°†3ä¸ªæè¿°ç¬¦é›†åˆéƒ½è®¾å®šä¸ºNULLåˆ™selectç›¸å½“äºsleepå‡½æ•°ï¼Œåªæ˜¯æ—¶é—´å¯ä»¥ç²¾ç¡®åˆ°æ¯«ç§’timeout=0ï¼Œselectæ£€æŸ¥å®Œæè¿°ç¬¦é›†åˆåç«‹å³è¿”å› \n\nè®¾ç½®æè¿°ç¬¦é›†åˆ\n\nFD_ZERO(fd_set fdset)ï¼æ¸…ç©ºæè¿°ç¬¦é›†åˆFD_SET(int fd,fd_set fdset)ï¼å°†ä¸€ä¸ªæè¿°ç¬¦æ·»åŠ åˆ°æè¿°ç¬¦é›†åˆFD_CLR(int fd,fd_set fdset)ï¼å°†ä¸€ä¸ªæè¿°ç¬¦ä»æè¿°ç¬¦é›†åˆä¸­æ¸…é™¤FD_ISSET(int fd,fd_set fdset)ï¼æ£€æµ‹ä¸€ä¸ªæè¿°ç¬¦æ˜¯å¦å°±ç»ªåœ¨è®¾ç½®æè¿°ç¬¦é›†åˆå‰åº”è¯¥å…ˆè°ƒç”¨FD_ZEROå°†é›†åˆæ¸…ç©ºï¼Œæ¯æ¬¡è°ƒç”¨selectå‡½æ•°å‰åº”è¯¥é‡æ–°è®¾ç½®è¿™3ä¸ªé›†åˆä¸‰ä¸ªé›†åˆä¸­çš„æè¿°ç¬¦å¯ä»¥äº¤å‰ \n\nsocketé€‰é¡¹è®¾ç½®/è·å–socketé€‰é¡¹å‡½æ•°int getsockopt(int sockfd,int level,int optname,void *optval,sock_len *optlen);int setsockopt(int sockfd,int level,int optname,void *optval,sock_len optlen);\n\nåŠŸèƒ½ï¼šè·å–æˆ–è®¾ç½®socketé€‰é¡¹è¿”å›å€¼ï¼š 0ï¼æˆåŠŸï¼Œï¼1å¤±è´¥\n\nå‚æ•°ï¼š\n\nsockfdï¼socketæè¿°ç¬¦levelï¼é€‰é¡¹çº§åˆ«SOL_SOCKET â€”é€šç”¨socketé€‰é¡¹IPPROTO_IPâ€”IPé€‰é¡¹IPPROTO_TCPâ€”TCPé€‰é¡¹optnameâ€”é€‰é¡¹åç§°optvalâ€”é€‰é¡¹å€¼optlenâ€”é€‰é¡¹å€¼çš„é•¿åº¦/å­˜æ”¾é€‰é¡¹å€¼é•¿åº¦çš„æŒ‡é’ˆ  \n\né€šç”¨socketé€‰é¡¹\n\nSO_KEEPALIVEè®¾ç½®è¯¥é€‰é¡¹åï¼Œ2å°æ—¶å†…æ²¡æœ‰æ•°æ®äº¤æ¢æ—¶ï¼ŒTCPåè®®å°†è‡ªåŠ¨å‘é€æ¢æµ‹æ•°æ®åŒ…ï¼Œæ£€æŸ¥ç½‘ç»œè¿æ¥SO_RCVBUFå’ŒSO_SNDBUFè®¾ç½®å‘é€å’Œæ¥æ”¶æ•°æ®ç¼“å†²åŒºçš„å¤§å°ï¼ˆåœ¨è¿æ¥å»ºç«‹ä»¥å‰è®¾ç½®ï¼‰SO_RCVTIMEOå’ŒSO_SNDTIMEOè®¾ç½®å‘é€å’Œæ¥æ”¶è¶…æ—¶ï¼Œå½“æŒ‡å®šæ—¶é—´å†…æ•°æ®æ²¡æœ‰æˆåŠŸæ¥æ”¶æˆ–å‘é€ï¼Œå‘é€å’Œæ¥æ”¶å‡½æ•°å°†è¿”å›ã€‚SO_REUSEADDRå¿«é€Ÿé‡å¯æœåŠ¡å™¨ç¨‹åºå¯åŠ¨æœåŠ¡å™¨ç¨‹åºçš„å¤šä¸ªå®ä¾‹ï¼ˆç»‘å®šæœ¬åœ°IPåœ°å€çš„å¤šä¸ªåˆ«åï¼‰\n\né˜»å¡/éé˜»å¡æ¨¡å¼int fcntl(int fd,int cmd,â€¦)\n\nåŠŸèƒ½ï¼šè®¾ç½®socketä¸ºé˜»å¡/éé˜»å¡æ¨¡å¼è®¾ç½®/è·å–socketçš„æ‰€æœ‰è€…å‚æ•°ï¼šfdï¼æ–‡ä»¶ï¼ˆsocketï¼‰æè¿°ç¬¦cmdï¼æ‰§è¡Œçš„æ“ä½œå…¶ä»–å‚æ•°ï¼æ ¹æ®cmdé€‰æ‹©é€‚å½“å‚æ•°è¿”å›å€¼ï¼šâ‰¥0ï¼æˆåŠŸï¼Œ-1ï¼å¤±è´¥\n\n\n\n\n\næ“ä½œç±»å‹\nå‚æ•°\nè¿”å›å€¼\nè¯´æ˜\n\n\n\n\nF_GETFL\n0\næè¿°ç¬¦æ ‡å¿—\nè·å¾—æè¿°ç¬¦æ ‡å¿—\n\n\nF_SETFL\nO_NONBLOCK\næˆåŠŸ0ï¼Œå¦åˆ™-1\nè®¾ç½®socketä¸ºéé˜»å¡æ–¹å¼\n\n\nF_GETOWN\nint *\næˆåŠŸ0ï¼Œå¦åˆ™-1\nè·å¾—socketçš„æ‰€æœ‰è€…\n\n\nF_SETOWN\nint *\næˆåŠŸ0ï¼Œå¦åˆ™-1\nè®¾ç½®socketçš„æ‰€æœ‰è€…\n\n\n\n\néé˜»å¡æ–¹å¼fcntl(socket_fd,F_SETFL,fcntl(socket_fd,F_GETFL,0)|O_NONBLOCK);é˜»å¡æ–¹å¼fcntl(socket_fd,F_SETFL,fcntl(socket_fd,F_GETFL,0)&amp;^O_NONBLOCK);\næ§åˆ¶è¾“å…¥è¾“å‡ºint ioctl(int fd,int req,â€¦);\n\nåŠŸèƒ½ï¼šæ§åˆ¶è¾“å…¥è¾“å‡ºå‚æ•°ï¼šfdï¼æ–‡ä»¶ï¼ˆsocketï¼‰æè¿°ç¬¦reqï¼æ‰§è¡Œçš„æ“ä½œç±»å‹ç¬¬ä¸‰ä¸ªå‚æ•°ï¼æ€»æ˜¯æŒ‡é’ˆç±»å‹ï¼Œå­˜å‚¨æ“ä½œè¿”å›çš„æ•°æ®æˆ–æ“ä½œæ‰€éœ€çš„æ•°æ®è¿”å›å€¼ï¼š0ï¼æˆåŠŸï¼Œ-1ï¼å¤±è´¥\n\n\n\n\n\næ“ä½œç±»å‹\nå‚æ•°ç±»å‹\nè¯´æ˜\n\n\n\n\nSIOCATMARK\nint*\næ˜¯å¦åˆ°è¾¾å¸¦å¤–æ ‡å¿—\n\n\nFIOASYNC\nint*\nå¼‚æ­¥è¾“å…¥/è¾“å‡ºæ ‡å¿—\n\n\nFIONREAD\nint*\nç¼“å†²åŒºä¸­æœ‰å¤šå°‘å­—èŠ‚æ•°æ®å¯è¯»\n\n\n\n\nUDP Socketç¼–ç¨‹#include &lt;stdio.h&gt;#include &lt;unistd.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/socket.h&gt;#include &lt;string.h&gt;#include &lt;arpa/inet.h&gt;typedef struct sockaddr* saddrp;int main(int argc, char const *argv[])&#123;     //åˆ›å»ºsocket     int sockfd = socket(AF_INET,SOCK_DGRAM,0);     if (0 &gt; sockfd)     &#123;          perror(&quot;sockfd&quot;);          return -1;     &#125;     //å‡†å¤‡åœ°å€     struct sockaddr_in addr = &#123;&#125;;     addr.sin_family = AF_INET;//ipv4     addr.sin_port = htons(5577);//ç«¯å£å·     addr.sin_addr.s_addr = inet_addr(&quot;192.168.2.177&quot;);//æˆ‘çš„ipåœ°å€     //ç»‘å®š     int ret = bind(sockfd,(saddrp)&amp;addr,sizeof(addr));     if (0 &gt; ret)     &#123;          perror(&quot;bind&quot;);          return -1;     &#125;     struct sockaddr_in src_addr =&#123;&#125;;     socklen_t addr_len = sizeof(struct sockaddr_in);     while(1)     &#123;          char buf[255] = &#123;&#125;;          //æ¥æ”¶æ•°æ®å’Œæ¥æºçš„ipåœ°å€          recvfrom(sockfd,buf,sizeof(buf),0,(saddrp)&amp;src_addr,&amp;addr_len);          printf(&quot;Recv:%s\\n&quot;,buf);          if (0 == strcmp(buf,&quot;q&quot;)) break;          //å‘é€æ•°æ®ç»™ç›®æ ‡åœ°å€          printf(&quot;Please input the return value:&quot;);          gets(buf);          sendto(sockfd,buf,strlen(buf)+1,0,(saddrp)&amp;src_addr,addr_len);          if (0 == strcmp(buf,&quot;q&quot;)) break;     &#125;       //å…³é—­socketå¯¹è±¡     close(sockfd);     return 0;&#125;\nåŸå§‹socketç¼–ç¨‹åˆ›å»ºåŸå§‹socketint socket (int family, int type, int protocol)\n\nå‚æ•°ï¼šfamilyï¼AF_INETtypeï¼SOCK_RAWprotocolIPPROTO_ICMPï¼ICMPæ•°æ®åŒ…IPPROTO_IGMPï¼IGMPæ•°æ®åŒ…IPPROTO_IPï¼IPæ•°æ®åŒ…void send_icmp(int sockfd,sockaddr_in send_addr)&#123;     static short int seq=0;     char buf[8+8];     struct icmphdr *icmp=(struct icmphdr *)buf;     icmp-&gt;type=ICMP_ECHO;     icmp-&gt;code=0;     icmp-&gt;checksum=CHECK_SUM;     icmp-&gt;un.echo.id=getpid();     icmp-&gt;un.echo.sequence=seq++;     int len=send(sockfd,buf,buflen);&#125;void recv_icmp(int sockfd,sockaddr_in send_addr)&#123;     char buf[256];     struct icmphdr *icmp;     struct ip *ip;     int ipheadlen;     int icmplen;     int n=recvfrom(sockfd,buf,sizeof(buf),0,NULL,NULL);     if(n&lt;=0)&#123;          cout&lt;&lt;&quot;recv error&quot;&lt;&lt;endl;          return;     &#125;     ip=(struct ip *)buf;\t     ipheadlen=ip-&gt;ip_hl&lt;&lt;2;     icmplen=n-ipheadlen;     icmp=(struct icmphdr *)(buf+ipheadlen);     if(icmp-&gt;type==ICMP_ECHOREPLY)          cout&lt;&lt;&quot;recv from &quot;&lt;&lt;inet_ntoa(send_addr.sin_addr);&#125;\n\n","tags":["Socket","Linux","NOTE","C"]},{"title":"JAVA|RPC/RMI-ä¹¦ç±ä¿¡æ¯ç®¡ç†ç³»ç»Ÿ","url":"/2019/06/10/%E8%BF%9C%E7%A8%8B%E7%B1%BB%E8%B0%83%E7%94%A8/","content":"ä½¿ç”¨RPC/RMIå®ç°ä¹¦ç±ä¿¡æ¯ç®¡ç†ç³»ç»ŸåŠWeb Serviceæ”¹å†™\nåŸºæœ¬åŸç†RPCè¿œç¨‹è¿‡ç¨‹è°ƒç”¨(Remote Procedure Call): ä½¿åº”ç”¨ç¨‹åºå¯ä»¥åƒè°ƒç”¨æœ¬åœ°èŠ‚ç‚¹ä¸Šçš„è¿‡ç¨‹(å­ç¨‹åº) é‚£æ ·å»è°ƒç”¨ä¸€ä¸ªè¿œç¨‹èŠ‚ç‚¹ä¸Šçš„å­ç¨‹åºã€‚\n\nå¯¹äºè¢«è°ƒç”¨è€…è€Œè¨€ä¹Ÿæ— æ³•åŒºåˆ†è°ƒç”¨è€…æ¥è‡ªäºæœ¬åœ°è¿˜æ˜¯è¿œç¨‹\nRPCå°†é¢å‘è¿‡ç¨‹çš„é€šç”¨ç¼–ç¨‹æ¨¡å‹æ‰©å±•åˆ°äº†åˆ†å¸ƒå¼ç¯å¢ƒã€‚\nå®ç°äº†è·¨è¿›ç¨‹ã€è·¨è¯­è¨€ã€è·¨ç½‘ç»œã€è·¨å¹³å°çš„è¿‡ç¨‹è°ƒç”¨\nå¼ºåŒ–äº†é¢å‘æ¥å£ç¼–ç¨‹çš„ç¼–ç¨‹é£æ ¼\nå®ç°RPCå¿…é¡»è¦æœ‰RPCä¸­é—´ä»¶çš„æ”¯æŒã€‚\n\nRPCä¸€èˆ¬é‡‡ç”¨åŒæ­¥è°ƒç”¨æ–¹å¼\nRMIè¿œç¨‹æ–¹æ³•è°ƒç”¨(Remote Method Invocation): å°†é¢å‘å¯¹è±¡çš„ç¼–ç¨‹æ¨¡å‹æ‰©å±•åˆ°äº†åˆ†å¸ƒå¼ç¯å¢ƒã€‚\n\nRMIä½¿åº”ç”¨ç¨‹åºå¯ä»¥åƒè°ƒç”¨æœ¬æœºä¸Šå¯¹è±¡çš„æ–¹æ³•ä¸€æ ·è°ƒç”¨è¿œç¨‹ä¸»æœºä¸­å¯¹è±¡çš„æ–¹æ³•ã€‚\nåˆ©ç”¨RMIè°ƒç”¨ä¸€ä¸ªè¿œç¨‹å¯¹è±¡æ–¹æ³•æ—¶ï¼Œå‚æ•°å¯ä»¥æ˜¯ä¸€ä¸ªæœ¬åœ°å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ˜¯å¦å¤–ä¸€ä¸ªè¿œç¨‹å¯¹è±¡(å¯èƒ½å­˜åœ¨äºç¬¬ä¸‰ä¸ªèŠ‚ç‚¹)ã€‚\nåœ¨æ•´ä¸ªç³»ç»ŸèŒƒå›´å†…æ”¯æŒåƒåœ¾å›æ”¶ã€‚\nå®ç°RMIä¹Ÿå¿…é¡»è¦æœ‰ä¸­é—´ä»¶çš„æ”¯æŒã€‚\n\nä¸­é—´ä»¶å®ç°åŸç†\nRPC/RMIä¸­é—´ä»¶åœ¨è°ƒç”¨è€…è¿›ç¨‹ä¸­æ¤å…¥stubæ¨¡å—ï¼Œstubæ¨¡å—ä½œä¸ºè¿œç¨‹è¿‡ç¨‹çš„æœ¬åœ°ä»£ç†ï¼Œå¹¶ä¸”æš´éœ²ä¸è¿œç¨‹è¿‡ç¨‹ç›¸åŒçš„æ¥å£ã€‚\nRPC/RMIä¸­é—´ä»¶åœ¨è¢«è°ƒç”¨è€…è¿›ç¨‹ä¸­æ¤å…¥skeletonæ¨¡å—ï¼Œskeletonä½œä¸ºè°ƒç”¨è€…åœ¨è¿œç¨‹ä¸»æœºä¸­çš„ä»£ç†ã€‚\nstubæ¨¡å—ä¸skeletonæ¨¡å—åˆ©ç”¨Socketè¿›è¡Œé€šä¿¡ã€‚\nskeletonæ¨¡å—ç›¸å½“äºClient-Serveré€šä¿¡æ¨¡å¼ä¸­çš„æœåŠ¡å™¨ç«¯ï¼Œè¦å…ˆäºå®¢æˆ·ç«¯è¿è¡Œï¼Œå¹¶ä¸”åœ¨æŸä¸ªSocketç«¯å£è¿›è¡Œç›‘å¬ã€‚\n\nä½œç”¨\nå®šä¹‰å¹¶åˆ©ç”¨SocketæœåŠ¡æ¥å£å®ç°äº†ä¸€å¥—è°ƒç”¨è€…å’Œè¢«è°ƒç”¨è€…ä¹‹é—´çš„é€šä¿¡åè®®ã€‚(è¿œç¨‹è¿‡ç¨‹è°ƒç”¨åè®®)ã€‚ä¾‹å¦‚Java RMIçš„Java Remote Method Protocol (JRMP)\nå®ç°äº†è¿‡ç¨‹å‚æ•°çš„åºåˆ—åŒ–ã€ååºåˆ—åŒ–ï¼›è¿‡ç¨‹è¿ç®—ç»“æœçš„åºåˆ—åŒ–ã€ååºåˆ—åŒ–ã€‚\né€šä¿¡è¿‡ç¨‹ä¸­çš„é”™è¯¯å¤„ç†\nè¿‡ç¨‹æœåŠ¡è¿›ç¨‹(æˆ–è¿œç¨‹å¯¹è±¡)çš„é›†ä¸­æ³¨å†Œä¸å‘ç°ï¼ˆç›®å½•æœåŠ¡ï¼‰\nè¿œç¨‹å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†\nåœ¨æœåŠ¡ç«¯æ”¯æŒå¹¶å‘è®¿é—®ã€‚ï¼ˆå¤šé‡‡ç”¨å¤šçº¿ç¨‹æŠ€æœ¯ï¼‰\n\nå¸¸ç”¨çš„RPC/RMIä¸­é—´ä»¶æœ‰å¾ˆå¤šç§ï¼Œæœ¬æ–‡ç« ä½¿ç”¨çš„æ˜¯Java RMIï¼Œå…¶ä»–çš„æ¬¢è¿å°è¯•å’Œåˆ†äº«ã€‚\n\nå¸¸ç”¨çš„RPC/RMIä¸­é—´ä»¶ï¼šJava RMIï¼šJavaçš„è‡ªå¨±è‡ªä¹Microsoft .NET Remotingï¼š.Netçš„è‡ªå¨±è‡ªä¹CORBAï¼šé‡é‡çº§åˆ†å¸ƒå¼å¯¹è±¡ä¸­é—´ä»¶ï¼Œè·¨è¯­è¨€gRPCï¼šGoogleçš„RPCä¸­é—´ä»¶ï¼Œé«˜æ•ˆï¼Œå¼€æºï¼Œè·¨è¯­è¨€Thriftï¼šFacebookã€Apacheçš„RPCä¸­é—´ä»¶ï¼Œé«˜æ•ˆï¼Œå¼€æºï¼Œè·¨è¯­è¨€Hessianï¼šåŸºäºHTTP+äºŒè¿›åˆ¶ï¼Œè·¨è¯­è¨€Dubboï¼šæ·˜å®å¼€æºä¸­é—´ä»¶ï¼ŒJavaMotanï¼šæ–°æµªå¼€æºä¸­é—´ä»¶ï¼ŒJavaWebServiceï¼šåŸºäºHTTP + SOAP/XML/JSONGoogle Protocol Buffersï¼šä¸€ç§å¯¹è±¡åºåˆ—åŒ–æ ‡å‡†å’Œå¼€å‘åº“\n\nä¾‹å­å®ç°ä¸€ä¸ªä¹¦ç±ä¿¡æ¯ç®¡ç†ç³»ç»Ÿï¼Œå…·ä½“è¦æ±‚ï¼š\n\nå®¢æˆ·ç«¯å®ç°ç”¨æˆ·äº¤äº’ï¼ŒæœåŠ¡å™¨ç«¯å®ç°ä¹¦ç±ä¿¡æ¯å­˜å‚¨å’Œç®¡ç†ã€‚\næœåŠ¡å™¨ç«¯è‡³å°‘æš´éœ²å¦‚ä¸‹æ¥å£ï¼š\n\n\nbool add(Book b) æ·»åŠ ä¸€ä¸ªä¹¦ç±å¯¹è±¡ã€‚\nBook queryByID(int bookID) æŸ¥è¯¢æŒ‡å®šIDå·çš„ä¹¦ç±å¯¹è±¡ã€‚\nBookList queryByName(String name) æŒ‰ä¹¦åæŸ¥è¯¢ç¬¦åˆæ¡ä»¶çš„ä¹¦ç±å¯¹è±¡åˆ—è¡¨ï¼Œæ”¯æŒæ¨¡ç³ŠæŸ¥è¯¢ã€‚\nbool delete(int bookID) åˆ é™¤æŒ‡å®šIDå·çš„ä¹¦ç±å¯¹è±¡\n\nRPC/RMIå®ç°åˆ›å»ºbookç±»ï¼ŒåŒ…å«å›¾ä¹¦IDå’Œåç§°ï¼Œæ„å»ºgetid()å’Œgetname()æ–¹æ³•ï¼Œèƒ½å¤Ÿåœ¨ç±»å¤–è®¿é—®ã€‚å¹¶ç»§æ‰¿åºåˆ—åŒ–æ¥å£Serializableã€‚Book.javapackage RMI;import java.io.Serializable;public class Book implements Serializable &#123;\tprivate int id;\tprivate String name=null;\t\tpublic Book(int id,String name) &#123;\t\tthis.id=id;\t\tthis.name=name;\t&#125;\t\tpublic int getID() &#123;\t\treturn id;\t&#125;\tpublic String getname() &#123;\t\treturn name;\t&#125;&#125;æ–°å»ºä¸€ä¸ªtxtæ–‡ä»¶ï¼Œä½¿ç”¨IOçš„æ–¹å¼è¯»å–ä¹¦ç±ä¿¡æ¯book.txt1001 åˆ†å¸ƒå¼è®¡ç®—1002 å¤§æ•°æ®1003 æœºå™¨å­¦ä¹ 1004 è®¡ç®—æœºç³»ç»Ÿ1005 è®¡ç®—æœºç»„æˆ1006 Java1007 æ•°æ®ç»“æ„1008 è®¡ç®—æœºç½‘ç»œ1009 è™šæ‹Ÿç°å®å£°æ˜æ¥å£ï¼Œç»§æ‰¿äº Remoteç±»ï¼Œå£°æ˜è¦å®ç°çš„æ–¹æ³•ã€‚ComputingService.javaimport java.rmi.Remote;import java.rmi.RemoteException;import java.util.ArrayList;public interface ComputingService extends Remote &#123;\t\tboolean add(Book b) throws RemoteException;\tBook queryByID(int bookID) throws RemoteException;\tArrayList&lt;Book&gt; BookList(String name) throws RemoteException;\tboolean delete(int bookID) throws RemoteException;\tArrayList&lt;Book&gt; showAll() throws RemoteException;\tvoid end() throws RemoteException;&#125;å®ç°æ¥å£ä¸­å®ç°çš„æ–¹æ³•ã€‚å…¶ä¸­BookFliesç±»ç”¨äºè¯»å–å’Œä¿å­˜æ–‡ä»¶ComputingServiceImpl.javaimport java.rmi.RemoteException;import java.rmi.server.UnicastRemoteObject;import java.util.ArrayList;import java.util.regex.Matcher;import java.util.regex.Pattern;import java.io.*;public class ComputingServiceImpl extends UnicastRemoteObject implements ComputingService &#123;\t\tBookFlies bookFlies=new BookFlies();\tArrayList&lt;Book&gt; booklist = new ArrayList&lt;Book&gt;();\t    ComputingServiceImpl() throws RemoteException &#123;    \tsuper();\t\tbookFlies.load(booklist);\t&#125;        public boolean add(Book b) throws RemoteException &#123;    \tif(queryByID(b.getID())==null) &#123;    \t\tbooklist.add(b);    \t\treturn true;    \t&#125;\t\treturn false;    &#125;    \tpublic Book queryByID(int bookID) throws RemoteException &#123;\t\tfor(Book b:booklist) &#123;\t\t\tif(b.getID()==bookID) &#123;\t\t\t\treturn b;\t\t\t&#125;\t\t&#125;\t\treturn null;\t&#125;\t\tpublic ArrayList&lt;Book&gt; BookList(String name) throws RemoteException &#123;\t\tArrayList&lt;Book&gt; books=new ArrayList&lt;Book&gt;();\t\tPattern pattern = Pattern.compile(name);\t\tfor(Book b:booklist) &#123;\t\t\tMatcher matcher = pattern.matcher(b.getname());\t\t\tif(matcher.find())&#123;\t\t\t\tbooks.add(b);\t\t\t&#125;\t\t&#125;\t\treturn books;\t&#125;\t\tpublic boolean delete(int bookID)  throws RemoteException &#123;\t\tfor(Book b:booklist) &#123;\t\t\tif(b.getID()==bookID) &#123;\t\t\t\tbooklist.remove(b);\t\t\t\treturn true;\t\t\t&#125;\t\t&#125;\t\treturn false;\t&#125;\t\tpublic ArrayList&lt;Book&gt; showAll() throws RemoteException &#123;\t\treturn booklist;\t&#125;\tpublic void end() throws RemoteException &#123;\t\tbookFlies.save(booklist);\t&#125;&#125;class BookFlies&#123;\tpublic void load(ArrayList&lt;Book&gt; booklist)//è¯»å–æ–‡ä»¶\t&#123;\t\ttry &#123;\t\t\tString filename = &quot;book.txt&quot;;\t\t\tFile file = new File(filename);\t\t\tBufferedReader reader = new BufferedReader(new FileReader(file));\t\t\tString temp;\t\t\twhile((temp = reader.readLine()) != null)\t\t\t&#123;\t\t\t\tString[] a=temp.split(&quot; &quot;);\t\t\t\tString idstr = a[0];\t\t\t\tString name = a[1];\t\t\t\tint id =Integer.parseInt(idstr);\t\t\t\tBook book = new Book(id,name);\t\t\t\tbooklist.add(book);\t\t\t&#125;\t\t\treader.close();\t\t&#125; catch (FileNotFoundException e) &#123;\t\t\t// TODO Auto-generated catch block\t\t\te.printStackTrace();\t\t&#125; catch (NumberFormatException e) &#123;\t\t\t// TODO Auto-generated catch block\t\t\te.printStackTrace();\t\t&#125; catch (IOException e) &#123;\t\t\t// TODO Auto-generated catch block\t\t\te.printStackTrace();\t\t&#125;\t&#125;\t\tpublic void save(ArrayList&lt;Book&gt; booklist)//å†™å…¥æ–‡ä»¶\t&#123;\t\tString fileName = &quot;book.txt&quot;;\t\tString allbook=&quot;&quot;;\t\tfor(int i = 0; i &lt; booklist.size()-1; i++)\t\t&#123;\t\t\tBook book = booklist.get(i);\t\t\tString temp = book.getID() + &quot; &quot; + book.getname()+&quot;\\n&quot;;\t\t\tallbook += temp;\t\t&#125;\t\tBook book=booklist.get(booklist.size()-1);\t\tallbook += book.getID()+ &quot; &quot; + book.getname();\t\ttry &#123;\t\t\tFileWriter fileWriter = new FileWriter(new File(fileName));\t\t\tfileWriter.write(allbook);\t\t\tfileWriter.close();\t\t&#125; catch (IOException e) &#123;\t\t\t// TODO Auto-generated catch block\t\t\te.printStackTrace();\t\t&#125;\t\t\t&#125;&#125;åˆ›å»ºæœåŠ¡ç«¯ã€‚åœ¨ç«¯å£8196å£°æ˜äº†ä¸€ä¸ªæ³¨å†Œè¡¨ï¼Œç”¨Naming.bindå°†åœ°å€ä¿¡æ¯å’Œç±»ComputingServiceImplçš„ä¸€ä¸ªå¯¹è±¡computingServanç»‘å®šåœ¨ä¸€èµ·å¹¶æ”¾å…¥æ³¨å†Œè¡¨ã€‚RMIServer.javaimport java.net.MalformedURLException;import java.rmi.AlreadyBoundException;import java.rmi.Naming;import java.rmi.RemoteException;import java.rmi.registry.LocateRegistry;public class RMIServer &#123;    public static void main(String[] args) throws RemoteException, AlreadyBoundException, MalformedURLException &#123;    \tLocateRegistry.createRegistry(8196);        ComputingService computingServant = new ComputingServiceImpl();        Naming.bind(&quot;rmi://192.168.43.204:8196/ComputingService&quot;,computingServant);        System.out.println(&quot;ComputingService is online.&quot;);    &#125;&#125;åˆ›å»ºå®¢æˆ·ç«¯ã€‚é€šè¿‡åœ¨æ³¨å†Œè¡¨ä¸­æŸ¥æ‰¾åå­—ï¼Œè·å¾—ä¸€ä¸ªè¿œç¨‹å¯¹è±¡ã€‚è®¾ç½®æç¤ºä¿¡æ¯ï¼Œæ ¹æ®ç”¨æˆ·è¾“å…¥ï¼Œè°ƒç”¨æ‰€éœ€æ–¹æ³•ã€‚(æœ‰å…´è¶£çš„è¯å¯ä»¥åŠ ä¸€ä¸ªUI)RMIClient.javaimport java.net.MalformedURLException;import java.rmi.Naming;import java.rmi.NotBoundException;import java.rmi.RemoteException;import java.util.ArrayList;import java.util.Scanner;public class RMIClient &#123;\tstatic Scanner s = new Scanner(System.in);    public static void main(String[] args) throws RemoteException, NotBoundException, MalformedURLException &#123;                ComputingService c =(ComputingService)Naming.lookup(&quot;rmi://localhost:8196/ComputingService&quot;);        int chose;        int bookID;        String name;        Book b=null;        System.out.println(&quot;æ¬¢è¿ä½¿ç”¨!&quot;);        printMenu();        while((chose=s.nextInt())!=6) &#123;        \tSystem.out.println(&quot;-------------------------&quot;);        \tswitch (chose) &#123;\t\t\tcase 1:\t\t\t\tSystem.out.println(&quot;è¯·è¾“å…¥å›¾ä¹¦IDï¼š&quot;);\t\t\t\tbookID=s.nextInt();\t\t\t\tSystem.out.println(&quot;è¯·è¾“å…¥å›¾ä¹¦åç§°ï¼š&quot;);\t\t\t\tname=s.next();\t\t\t\tb=new Book(bookID, name);\t\t\t\tif(c.add(b)) &#123;\t\t\t\t\tSystem.out.println(&quot;å¢åŠ æˆåŠŸ!&quot;);\t\t\t\t\tSystem.out.println(&quot;ID   åç§°&quot;);\t\t\t\t\tfor(Book book:c.showAll()) &#123;\t\t\t\t\t\tSystem.out.println(book.getID() + &quot; &quot; + book.getname());\t\t\t\t\t&#125;\t\t\t\t&#125;\t\t\t\telse &#123;\t\t\t\t\tSystem.out.println(&quot;å¢åŠ å¤±è´¥,IDé‡å¤!&quot;);\t\t\t\t&#125;\t\t\t\tbreak;\t\t\tcase 2:\t\t\t\tSystem.out.println(&quot;è¯·è¾“å…¥å›¾ä¹¦ID:&quot;);\t\t\t\tbookID=s.nextInt();\t\t\t\tb=c.queryByID(bookID);\t\t\t\tif(b==null) &#123;\t\t\t\t\tSystem.out.println(&quot;å›¾ä¹¦ä¿¡æ¯ä¸å­˜åœ¨&quot;);\t\t\t\t&#125;\t\t\t\telse &#123;\t\t\t\t\tSystem.out.println(&quot;ID   åç§°&quot;);\t\t\t\t\tSystem.out.println(b.getID() + &quot; &quot; + b.getname());\t\t\t\t\tSystem.out.println(&quot;ç¡®è®¤åˆ é™¤?&lt;Y/n&gt;&quot;);\t\t\t\t\tString order=s.next();\t\t\t\t\tif(order.equalsIgnoreCase(&quot;Y&quot;)) &#123;\t\t\t\t\t\tif(c.delete(bookID)) &#123;\t\t\t\t\t\t\tSystem.out.println(&quot;åˆ é™¤æˆåŠŸ!&quot;);\t\t\t\t\t\t&#125;\t\t\t\t\t\telse&#123;\t\t\t\t\t\t\tSystem.out.println(&quot;åˆ é™¤å¤±è´¥!&quot;);\t\t\t\t\t\t&#125;\t\t\t\t\t&#125;\t\t\t\t&#125;\t\t\t\tbreak;\t\t\tcase 3:\t\t\t\tSystem.out.println(&quot;è¯·è¾“å…¥å›¾ä¹¦ID:&quot;);\t\t\t\tbookID=s.nextInt();\t\t\t\tb=c.queryByID(bookID);\t\t\t\tif(b==null) &#123;\t\t\t\t\tSystem.out.println(&quot;æŸ¥è¯¢IDä¸å­˜åœ¨&quot;);\t\t\t\t&#125;\t\t\t\telse &#123;\t\t\t\t\tSystem.out.println(&quot;ID   åç§°&quot;);\t\t\t\t\tSystem.out.println(b.getID() + &quot; &quot; + b.getname());\t\t\t\t&#125;\t\t\t\tbreak;\t\t\tcase 4:\t\t\t\tSystem.out.println(&quot;è¯·è¾“å…¥å›¾ä¹¦åç§°ï¼š&quot;);\t\t\t\tname=s.next();\t\t\t\tArrayList&lt;Book&gt; books=c.BookList(name);\t\t\t\tif(books.size()==0) &#123;\t\t\t\t\tSystem.out.println(&quot;æŸ¥è¯¢å›¾ä¹¦ä¸å­˜åœ¨&quot;);\t\t\t\t&#125;\t\t\t\telse &#123;\t\t\t\t\tSystem.out.println(&quot;ID   åç§°&quot;);\t\t\t\t\tfor(Book book:books) &#123;\t\t\t\t\t\tSystem.out.println(book.getID() + &quot; &quot; + book.getname());\t\t\t\t\t&#125;\t\t\t\t&#125;\t\t\t\tbreak;\t\t\tcase 5:\t\t\t\tSystem.out.println(&quot;ID   åç§°&quot;);\t\t\t\tfor(Book book:c.showAll()) &#123;\t\t\t\t\tSystem.out.println(book.getID() + &quot; &quot; + book.getname());\t\t\t\t&#125;\t\t\t\tbreak;\t\t\tdefault:\t\t\t\tSystem.out.println(&quot;è¾“å…¥é”™è¯¯!!!&quot;);\t\t\t\tbreak;\t\t\t&#125;        \tSystem.out.println(&quot;-------------------------&quot;);        \tprintMenu();        &#125;\t\tSystem.out.println(&quot;æ„Ÿè°¢ä½¿ç”¨!&quot;);        c.end();    &#125;    static void printMenu()&#123;\t\tSystem.out.println(&quot;å¢åŠ å›¾ä¹¦...1&quot;);\t\tSystem.out.println(&quot;åˆ é™¤å›¾ä¹¦...2&quot;);\t\tSystem.out.println(&quot;ä¹¦å·æŸ¥è¯¢...3&quot;);\t\tSystem.out.println(&quot;ä¹¦åæŸ¥è¯¢...4&quot;);\t\tSystem.out.println(&quot;æŸ¥çœ‹ç›®å½•...5&quot;);\t\tSystem.out.println(&quot;é€€å‡ºç³»ç»Ÿ...6&quot;);\t\tSystem.out.print(&quot;è¯·è¾“å…¥é€‰é¡¹ï¼š&quot;);\t&#125;&#125;\nè¿è¡Œç»“æœç”±äºæˆ‘çš„Eclipseå‡ºäº†é—®é¢˜ï¼Œæ‰€ä»¥ä½¿ç”¨çš„æ˜¯å‘½ä»¤è¡Œç¼–è¯‘è¿è¡Œçš„ã€‚javac *.javarmic ComputingServiceImpljava RMIServerjava RMIClient\nWeb Serviceæ”¹å†™\nå‰é¢å‡ ç¯‡åšå®¢ç®€å•è®²äº†Web Serviceçš„ä½¿ç”¨ï¼Œä¸çŸ¥é“å„ä½æœ‰æ²¡æœ‰å‘ç°Webçš„å®ç°è¿‡ç¨‹ä»¥åŠç»“æœéƒ½å’ŒRPC/RMIçš„ååˆ†ç›¸ä¼¼ã€‚é‚£ä¹ˆèƒ½ä¸èƒ½æŠŠæˆ‘ä»¬å†™çš„æ–¹æ³•å‘å¸ƒå‡ºå»ï¼Œä»è€Œå®ç°è¿œç¨‹è°ƒç”¨ã€‚è®©æˆ‘ä»¬è¯•ä¸€è¯•å§ã€‚\n\næ”¹å†™ä¸»è¦å˜åŠ¨åœ¨Book.java,Pulisher.javaå’ŒClient.javaã€‚Bookéœ€è¦è°ƒç”¨javax.xml.bind.annotationè¿™ä¸ªåŒ…è½¬åŒ–ä¸ºxml; Pulisherä¸­ä½¿ç”¨Webseviceçš„æ–¹æ³•å‘å¸ƒæ¥å£ï¼›Clientä¸­è¯·æ±‚å¹¶è°ƒç”¨æ–¹æ³•ã€‚\nå…ˆåˆ›å»ºä¸¤ä¸ªä¸ªæ–‡ä»¶å¤¹ï¼Œåˆ†åˆ«æ”¾æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ä»£ç \næœåŠ¡ç«¯åœ¨wsserveræ–‡ä»¶å¤¹é‡Œåˆ›å»ºbookç±»Book.javapackage wsserver;import java.io.Serializable;import javax.xml.bind.annotation.XmlRootElement;import javax.xml.bind.annotation.XmlAccessType;import javax.xml.bind.annotation.XmlAccessorType;import javax.xml.bind.annotation.XmlElement;import javax.xml.bind.annotation.XmlType;@XmlRootElement(name=&quot;book&quot;, namespace=&quot;http://localhost:9999/ws/books&quot;)@XmlAccessorType(XmlAccessType.FIELD)@XmlType(name=&quot;book&quot;, namespace=&quot;http://localhost:9999/ws/books&quot;)public class Book implements Serializable &#123;\tprivate static final long serialVersionUID = 1L;\t@XmlElement(name = &quot;id&quot;, namespace = &quot;&quot;)\tprivate int id;\t@XmlElement(name = &quot;name&quot;, namespace = &quot;&quot;)\tprivate String name;\t\tpublic void set(int id,String name) &#123;\t\tthis.id=id;\t\tthis.name=name;\t&#125;\t\tpublic int getID() &#123;\t\treturn this.id;\t&#125;\tpublic String getname() &#123;\t\treturn this.name;\t&#125;&#125;book.txt1001 åˆ†å¸ƒå¼è®¡ç®—1002 å¤§æ•°æ®1003 æœºå™¨å­¦ä¹ 1004 è®¡ç®—æœºç³»ç»Ÿ1005 è®¡ç®—æœºç»„æˆ1006 Java1007 æ•°æ®ç»“æ„1008 è®¡ç®—æœºç½‘ç»œ1009 è™šæ‹Ÿç°å®å®šä¹‰WebæœåŠ¡æ¥å£Bookstore.javapackage wsserver;import wsserver.Book;import java.util.ArrayList;import javax.jws.WebService;import javax.jws.soap.SOAPBinding;import javax.jws.soap.SOAPBinding.Style;@WebService(targetNamespace=&quot;http://localhost:9999/ws/books&quot;)@SOAPBinding(style = Style.RPC)public interface Bookstore &#123;\tpublic boolean add(Book b);\tpublic Book queryByID(int bookID);\tpublic ArrayList&lt;Book&gt; BookList(String name);\tpublic boolean delete(int bookID);\tpublic ArrayList&lt;Book&gt; showAll();\tpublic void end();&#125;å®šä¹‰å®ç°æ¥å£çš„WebæœåŠ¡å®ç°ç±»BookstoreImpl.javapackage wsserver;import java.io.BufferedReader;import java.io.File;import java.io.FileNotFoundException;import java.io.FileReader;import java.io.FileWriter;import java.io.IOException;import java.util.ArrayList;import java.util.regex.Matcher;import java.util.regex.Pattern;import javax.jws.WebService;@WebServicepublic class BookstoreImpl implements Bookstore&#123;\tBookFlies bookFlies=new BookFlies();\tArrayList&lt;Book&gt; booklist = new ArrayList&lt;Book&gt;();\t\tBookstoreImpl()&#123;\t\tbookFlies.load(booklist);\t&#125;    @Override    public boolean add(Book b)&#123;    \tif(queryByID(b.getID())==null) &#123;    \t\tbooklist.add(b);    \t\treturn true;    \t&#125;\t\treturn false;    &#125;    @Override\tpublic Book queryByID(int bookID) &#123;\t\tfor(Book b:booklist) &#123;\t\t\tif(b.getID()==bookID) &#123;\t\t\t\treturn b;\t\t\t&#125;\t\t&#125;\t\treturn null;\t&#125;\t@Override\tpublic ArrayList&lt;Book&gt; BookList(String name)&#123;\t\tArrayList&lt;Book&gt; books=new ArrayList&lt;Book&gt;();\t\tPattern pattern = Pattern.compile(name);\t\tfor(Book b:booklist) &#123;\t\t\tMatcher matcher = pattern.matcher(b.getname());\t\t\tif(matcher.find())&#123;\t\t\t\tbooks.add(b);\t\t\t&#125;\t\t&#125;\t\treturn books;\t&#125;\t@Override\tpublic boolean delete(int bookID)&#123;\t\tfor(Book b:booklist) &#123;\t\t\tif(b.getID()==bookID) &#123;\t\t\t\tbooklist.remove(b);\t\t\t\treturn true;\t\t\t&#125;\t\t&#125;\t\treturn false;\t&#125;\t@Override\tpublic ArrayList&lt;Book&gt; showAll()&#123;\t\treturn booklist;\t&#125;\t@Override\tpublic void end()&#123;\t\tbookFlies.save(booklist);\t&#125;&#125;class BookFlies&#123;\tpublic void load(ArrayList&lt;Book&gt; booklist)//è¯»å–æ–‡ä»¶\t&#123;\t\ttry &#123;\t\t\tString filename = &quot;wsserver\\\\book.txt&quot;;\t\t\tFile file = new File(filename);\t\t\tBufferedReader reader = new BufferedReader(new FileReader(file));\t\t\tString temp;\t\t\twhile((temp = reader.readLine()) != null)\t\t\t&#123;\t\t\t\tString[] a=temp.split(&quot; &quot;);\t\t\t\tString idstr = a[0];\t\t\t\tString name = a[1];\t\t\t\tint id =Integer.parseInt(idstr);\t\t\t\tBook book = new Book();\t\t\t\tbook.set(id,name);\t\t\t\tbooklist.add(book);\t\t\t&#125;\t\t\treader.close();\t\t&#125; catch (FileNotFoundException e) &#123;\t\t\t// TODO Auto-generated catch block\t\t\te.printStackTrace();\t\t&#125; catch (NumberFormatException e) &#123;\t\t\t// TODO Auto-generated catch block\t\t\te.printStackTrace();\t\t&#125; catch (IOException e) &#123;\t\t\t// TODO Auto-generated catch block\t\t\te.printStackTrace();\t\t&#125;\t&#125;\t\tpublic void save(ArrayList&lt;Book&gt; booklist)//å†™å…¥æ–‡ä»¶\t&#123;\t\tString fileName = &quot;wsserver\\\\book.txt&quot;;\t\tString allbook=&quot;&quot;;\t\tfor(int i = 0; i &lt; booklist.size()-1; i++)\t\t&#123;\t\t\tBook book = booklist.get(i);\t\t\tString temp = book.getID() + &quot; &quot; + book.getname()+&quot;\\n&quot;;\t\t\tallbook += temp;\t\t&#125;\t\tBook book=booklist.get(booklist.size()-1);\t\tallbook += book.getID()+ &quot; &quot; + book.getname();\t\ttry &#123;\t\t\tFileWriter fileWriter = new FileWriter(new File(fileName));\t\t\tfileWriter.write(allbook);\t\t\tfileWriter.close();\t\t&#125; catch (IOException e) &#123;\t\t\t// TODO Auto-generated catch block\t\t\te.printStackTrace();\t\t&#125;\t\t\t&#125;&#125;å°†WebæœåŠ¡å®ç°ç±»ç»‘å®šåˆ°WebæœåŠ¡å™¨Publisher.javapackage wsserver;import javax.xml.ws.Endpoint;public class Publisher&#123;\tpublic static void main(String[] args) &#123;\t   BookstoreImpl b = new BookstoreImpl();\t   Endpoint.publish(&quot;http://localhost:9999/ws/books&quot;, b);\t   System.out.println(&quot;Web service is online.&quot;);  &#125;&#125;\nå®¢æˆ·ç«¯åœ¨wsclientæ–‡ä»¶å¤¹é‡Œæ ¹æ®WSDLç”ŸæˆWebæœåŠ¡ä»£ç†ç±»ï¼Œåˆ©ç”¨WebæœåŠ¡ä»£ç†ç±»è°ƒç”¨WebæœåŠ¡æ¥å£ä¸­å®šä¹‰çš„å…·ä½“æ–¹æ³•ã€‚Client.javapackage wsclient;import wsproxy.*;import java.util.ArrayList;import java.util.Scanner;public class Client &#123;\tstatic Scanner s = new Scanner(System.in);\tpublic static void main(String[] args) &#123;\t\tBookstoreImplService service = new BookstoreImplService();\t\tBookstoreImpl pService = service.getBookstoreImplPort();        int chose;        int bookID;        String name;        Book b=new Book();        System.out.println(&quot;Welcome!!!&quot;);        printMenu();        while((chose=s.nextInt())!=6) &#123;        \tSystem.out.println(&quot;-------------------------&quot;);        \tswitch (chose) &#123;\t\t\tcase 1:\t\t\t\tSystem.out.println(&quot;Input book ID:&quot;);\t\t\t\tbookID=s.nextInt();\t\t\t\tSystem.out.println(&quot;Input book Name:&quot;);\t\t\t\tname=s.next();\t\t\t\tb.setId(bookID);b.setName(name);\t\t\t\tif(pService.add(b)) &#123;\t\t\t\t\tSystem.out.println(&quot;Added successfully!&quot;);\t\t\t\t\tSystem.out.println(&quot;ID   Name&quot;);\t\t\t\t\tfor(Book book:pService.showAll()) &#123;\t\t\t\t\t\tSystem.out.println(book.getId() + &quot; &quot; + book.getName());\t\t\t\t\t&#125;\t\t\t\t&#125;\t\t\t\telse &#123;\t\t\t\t\tSystem.out.println(&quot;Failure, ID duplication&quot;);\t\t\t\t&#125;\t\t\t\tbreak;\t\t\tcase 2:\t\t\t\tSystem.out.println(&quot;Input book ID:&quot;);\t\t\t\tbookID=s.nextInt();\t\t\t\tb=pService.queryByID(bookID);\t\t\t\tif(b==null) &#123;\t\t\t\t\tSystem.out.println(&quot;Not exist&quot;);\t\t\t\t&#125;\t\t\t\telse &#123;\t\t\t\t\tSystem.out.println(&quot;ID   Name&quot;);\t\t\t\t\tSystem.out.println(b.getId() + &quot; &quot; + b.getName());\t\t\t\t\tSystem.out.println(&quot;Confirm?&lt;Y/n&gt;&quot;);\t\t\t\t\tString order=s.next();\t\t\t\t\tif(order.equalsIgnoreCase(&quot;Y&quot;)) &#123;\t\t\t\t\t\tif(pService.delete(bookID)) &#123;\t\t\t\t\t\t\tSystem.out.println(&quot;Successfully deleted!&quot;);\t\t\t\t\t\t&#125;\t\t\t\t\t\telse&#123;\t\t\t\t\t\t\tSystem.out.println(&quot;Failed to delete!&quot;);\t\t\t\t\t\t&#125;\t\t\t\t\t&#125;\t\t\t\t&#125;\t\t\t\tbreak;\t\t\tcase 3:\t\t\t\tSystem.out.println(&quot;Input book ID:&quot;);\t\t\t\tbookID=s.nextInt();\t\t\t\tb=pService.queryByID(bookID);\t\t\t\tif(b==null) &#123;\t\t\t\t\tSystem.out.println(&quot;Not exist&quot;);\t\t\t\t&#125;\t\t\t\telse &#123;\t\t\t\t\tSystem.out.println(&quot;ID   Name&quot;);\t\t\t\t\tSystem.out.println(b.getId() + &quot; &quot; + b.getName());\t\t\t\t&#125;\t\t\t\tbreak;\t\t\tcase 4:\t\t\t\tSystem.out.println(&quot;Input book Name:&quot;);\t\t\t\tname=s.next();\t\t\t\tArrayList&lt;Book&gt; books=(ArrayList&lt;Book&gt;) pService.bookList(name);\t\t\t\tif(books.size()==0) &#123;\t\t\t\t\tSystem.out.println(&quot;Not exist&quot;);\t\t\t\t&#125;\t\t\t\telse &#123;\t\t\t\t\tSystem.out.println(&quot;ID   Name&quot;);\t\t\t\t\tfor(Book book:books) &#123;\t\t\t\t\t\tSystem.out.println(book.getId() + &quot; &quot; + book.getName());\t\t\t\t\t&#125;\t\t\t\t&#125;\t\t\t\tbreak;\t\t\tcase 5:\t\t\t\tSystem.out.println(&quot;ID   Name&quot;);\t\t\t\tfor(Book book:pService.showAll()) &#123;\t\t\t\t\tSystem.out.println(book.getId() + &quot; &quot; + book.getName());\t\t\t\t&#125;\t\t\t\tbreak;\t\t\tdefault:\t\t\t\tSystem.out.println(&quot;Error!!!&quot;);\t\t\t\tbreak;\t\t\t&#125;        \tSystem.out.println(&quot;-------------------------&quot;);        \tprintMenu();        &#125;\t\tSystem.out.println(&quot;Thanks for using!&quot;);\t\tpService.end();\t&#125;    static void printMenu()&#123;\t\tSystem.out.println(&quot;Add books ......1&quot;);\t\tSystem.out.println(&quot;Delete books ...2&quot;);\t\tSystem.out.println(&quot;Query By ID ....3&quot;);\t\tSystem.out.println(&quot;Query By Name ..4&quot;);\t\tSystem.out.println(&quot;Show All .......5&quot;);\t\tSystem.out.println(&quot;Exit ...........6&quot;);\t\tSystem.out.print(&quot;Please enter the option:&quot;);\t&#125;&#125;\nè¿è¡Œç»“æœç¼–è¯‘å¹¶å¯åŠ¨æœåŠ¡å•†javac .\\wsserver\\*.javajava wsserver.Publisher\næµè§ˆå™¨æ‰“å¼€http://localhost:9999/ws/books?wsdlçœ‹åˆ°å¦‚ä¸‹ç•Œé¢ï¼Œå³wsdlæ–‡ä»¶\nä½¿ç”¨wsimportå‘½ä»¤ï¼Œå°†wsdlæ–‡ä»¶ç”Ÿæˆæœ¬åœ°ä»£ç†wsimport -keep -p wsproxy http://localhost:9999/ws/books?wsdl\nç¼–è¯‘å¹¶å¯åŠ¨å®¢æˆ·ç«¯javac .\\wsclient\\*.javajava wsclient.Client\n\næœ€åï¼Œæ€»ç®—åœ†æ»¡å®Œæˆã€‚è™½ç„¶çœ‹èµ·æ¥å¹¶ä¸å›°éš¾ï¼Œåˆšå¼€å§‹æˆ‘å°±æ˜¯è¿™ä¹ˆæƒ³çš„ï¼Œä½†æ˜¯ä»å¤´å¼€å§‹å†™çœŸçš„ä¼šé‡åˆ°å¾ˆå¤šæƒ³ä¸åˆ°çš„é—®é¢˜ï¼Œæ¯”å¦‚ä¸çŸ¥é“Bookç±»éœ€è¦è½¬åŒ–ä¸ºxmlï¼Œå°±æŸ¥äº†å¥½å‡ å¤©çš„èµ„æ–™ã€‚æ€»ä¹‹ï¼Œå­¦çŸ¥è¯†è¿˜éœ€è¦å¤šåŠ¨æ‰‹å•Šã€‚\n","tags":["Java","åˆ†å¸ƒå¼","Web","RMI"]},{"title":"Python|SIFTç®—æ³•","url":"/2019/06/08/SIFT/","content":"å°ºåº¦ä¸å˜ç‰¹å¾å˜æ¢ï¼ˆScale-invariant feature transformï¼ŒSIFTï¼‰ï¼Œæ˜¯ç”¨äºå›¾åƒå¤„ç†é¢†åŸŸçš„ä¸€ç§æè¿°ã€‚\nç®€ä»‹SIFTç®—æ³•æ˜¯ä¸€ç§æå–å±€éƒ¨ç‰¹å¾çš„ç®—æ³•ï¼ŒåŸºäºç‰©ä½“ä¸Šçš„ä¸€äº›å±€éƒ¨å¤–è§‚çš„å…´è¶£ç‚¹è€Œä¸å½±åƒçš„å¤§å°å’Œæ—‹è½¬æ— å…³ã€‚å¯¹äºå…‰çº¿ã€å™ªå£°ã€å¾®è§†è§’æ”¹å˜çš„å®¹å¿åº¦ä¹Ÿç›¸å½“é«˜ã€‚åŸºäºè¿™äº›ç‰¹æ€§ï¼Œå®ƒä»¬æ˜¯é«˜åº¦æ˜¾è‘—è€Œä¸”ç›¸å¯¹å®¹æ˜“æ’·å–ï¼Œåœ¨æ¯æ•°åºå¤§çš„ç‰¹å¾æ•°æ®åº“ä¸­ï¼Œå¾ˆå®¹æ˜“è¾¨è¯†ç‰©ä½“è€Œä¸”é²œæœ‰è¯¯è®¤ã€‚ä½¿ç”¨SIFTç‰¹å¾æè¿°å¯¹äºéƒ¨åˆ†ç‰©ä½“é®è”½çš„ä¾¦æµ‹ç‡ä¹Ÿç›¸å½“é«˜ï¼Œç”šè‡³åªéœ€è¦3ä¸ªä»¥ä¸Šçš„SIFTç‰©ä½“ç‰¹å¾å°±è¶³ä»¥è®¡ç®—å‡ºä½ç½®ä¸æ–¹ä½ã€‚åœ¨ç°ä»Šçš„ç”µè„‘ç¡¬ä»¶é€Ÿåº¦ä¸‹å’Œå°å‹çš„ç‰¹å¾æ•°æ®åº“æ¡ä»¶ä¸‹ï¼Œè¾¨è¯†é€Ÿåº¦å¯æ¥è¿‘å³æ—¶è¿ç®—ã€‚SIFTç‰¹å¾çš„ä¿¡æ¯é‡å¤§ï¼Œé€‚åˆåœ¨æµ·é‡æ•°æ®åº“ä¸­å¿«é€Ÿå‡†ç¡®åŒ¹é…ã€‚åŒ¹é…çš„è¿‡ç¨‹å°±æ˜¯å¯¹æ¯”è¿™äº›ç‰¹å¾ç‚¹çš„è¿‡ç¨‹ï¼Œè¿™ä¸ªæµç¨‹å¯ä»¥ç”¨ä¸‹å›¾è¡¨è¿°ï¼š\nç‰¹ç‚¹\nSIFTç‰¹å¾æ˜¯å›¾åƒçš„å±€éƒ¨ç‰¹å¾ï¼Œå…¶å¯¹æ—‹è½¬ã€å°ºåº¦ç¼©æ”¾ã€äº®åº¦å˜åŒ–ä¿æŒä¸å˜æ€§ï¼Œå¯¹è§†è§’å˜åŒ–ã€ä»¿å°„å˜æ¢ã€å™ªå£°ä¹Ÿä¿æŒä¸€å®šç¨‹åº¦çš„ç¨³å®šæ€§ã€‚ \nç‹¬ç‰¹æ€§å¥½ï¼Œä¿¡æ¯é‡ä¸°å¯Œï¼Œé€‚ç”¨äºåœ¨æµ·é‡ç‰¹å¾æ•°æ®åº“ä¸­è¿›è¡Œå¿«é€Ÿã€å‡†ç¡®åŒ¹é…ã€‚ \nå¤šé‡æ€§ï¼Œå³ä½¿å°‘æ•°çš„å‡ ä¸ªç‰©ä½“ä¹Ÿå¯ä»¥äº§ç”Ÿå¤§é‡SIFTç‰¹å¾å‘é‡ã€‚ \né«˜é€Ÿæ€§ï¼Œç»ä¼˜åŒ–çš„SIFTåŒ¹é…ç®—æ³•ç”šè‡³å¯ä»¥è¾¾åˆ°å®æ—¶çš„è¦æ±‚ã€‚ \nå¯æ‰©å±•æ€§ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„ä¸å…¶ä»–å½¢å¼çš„ç‰¹å¾å‘é‡è¿›è¡Œè”åˆã€‚\n\nç®—æ³•æ­¥éª¤\næ£€æµ‹å°ºåº¦ç©ºé—´æå€¼ç‚¹\nç²¾ç¡®å®šä½æå€¼ç‚¹\nä¸ºæ¯ä¸ªå…³é”®ç‚¹æŒ‡å®šæ–¹å‘å‚æ•°\nå…³é”®ç‚¹æè¿°å­çš„ç”Ÿæˆ\n\nåº”ç”¨OpenCVä¸­å¸¦æœ‰SIFTç®—æ³•ã€‚å¯ä»¥ç›´æ¥è°ƒç”¨import cv2img= cv2.imread(&#x27;C:/Code/Picture/apple.jpg&#x27;)gray=cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)sift=cv2.xfeatures2d.SIFT_create()keypoints,descriptor=sift.detectAndCompute(gray,None)img=cv2.drawKeypoints(image=img,outImage=img,keypoints=keypoints,flags=cv2.DRAW_MATCHES_FLAGS_DRAW_RICH_KEYPOINTS,color=(51,163,236))cv2.imshow(&#x27;sift_keypoints&#x27;,img)cv2.waitKey(0)cv2.destroyAllWindows()\n\nOpenCVä½¿ç”¨SIFTæ—¶æŠ¥é”™,å»ºè®®å¸è½½åå®‰è£…opencv-contrib-python,åŒæ—¶3.4.3.18ä»¥ä¸Šçš„ç‰ˆæœ¬ä¼šå‡ºç°ä¸“åˆ©é—®é¢˜è€Œæ— æ³•ä½¿ç”¨ã€‚å®‰è£…å‰è®°å¾—å¸è½½åŸæ¥çš„ã€‚pip install opencv-contrib-python==3.4.2.17\n\n\n\nå‚è€ƒæ–‡çŒ®Siftç®—å­ç‰¹å¾ç‚¹æå–ã€æè¿°åŠåŒ¹é…å…¨æµç¨‹è§£æSiftä¸­å°ºåº¦ç©ºé—´ã€é«˜æ–¯é‡‘å­—å¡”ã€å·®åˆ†é‡‘å­—å¡”ï¼ˆDOGé‡‘å­—å¡”ï¼‰ã€å›¾åƒé‡‘å­—å¡”\n\n","tags":["Python","OpenCV","SIFT"]},{"title":"JAVA|MapReduce-è‡ªè¿æ¥ç®—æ³•","url":"/2019/06/04/hadoop2/","content":"ç¯å¢ƒ: Hadoop 3.0.0+Win10å®ç°åŠŸèƒ½ï¼šæ‰¾å‡ºæ‰€æœ‰å…·æœ‰grandchild-grandparentå…³ç³»çš„äººåç»„ã€‚è¾“å…¥æ–‡ä»¶çš„æ¯ä¸€è¡Œä¸ºå…·æœ‰child-parentå…³ç³»çš„ä¸€å¯¹äººåInput2.txt(æå–ç :2vd7)é¦–å…ˆå¯åŠ¨hadoopï¼ˆè®°å¾—ä»¥ç®¡ç†å‘˜æ¨¡å¼å¯åŠ¨ï¼‰ï¼Œæ–°å»ºä¸€ä¸ªinput2æ–‡ä»¶å¤¹ï¼ŒæŠŠè¾“å…¥æ–‡ä»¶ä¸Šä¼ åˆ°æ–‡ä»¶å¤¹ä¸­hadoop fs -mkdir /input2hadoop fs -put input2.txt /input2æŒ‰ç…§ä¸Šä¸€ä¸ªåšå®¢é‡Œï¼Œå¯åŠ¨setcpã€‚å‡†å¤‡å·¥ä½œå®Œæˆã€‚\nè®¾è®¡æ€è·¯æ•°æ®é‡å¾ˆå¤§ï¼Œæˆ‘ä»¬å…ˆä»ä¸€ä¸ªå°æ ·æœ¬å¼€å§‹a,b #aæ˜¯bçš„å„¿å­b,c #bæ˜¯cçš„å„¿å­å¾ˆæ˜æ˜¾aæ˜¯cçš„å­™å­ï¼Œæœ€åè¾“å‡ºçš„è‚¯å®šå°±æ˜¯a,c çˆ·çˆ·å°±æ˜¯çˆ¸çˆ¸çš„çˆ¸çˆ¸ï¼Œå¦‚ä½•è¯†åˆ«å‡ºè°æ˜¯å­å¥³ï¼Œè°æ˜¯çˆ¶æ¯å‘¢ï¼Ÿå¾ˆå®¹æ˜“æƒ³åˆ°åŠ æ ‡ç­¾ã€‚åœ¨çˆ¶æ¯å‰åŠ ä¸ªâ€œ0â€ï¼Œåœ¨å­å¥³å‰åŠ ä¸ªâ€œ1â€ï¼Œç»“æœå¦‚ä¸‹ï¼š#&lt;key,value&gt;&lt;a,0_b&gt;&lt;b,1_a&gt;&lt;b,0_c&gt;&lt;c,1_b&gt;åœ¨åŒæ ·çš„keyä¸­ï¼Œå‰ç¼€ä¸º0çš„å°±æ˜¯å‰ç¼€ä¸º1çš„grandparent\nä»£ç import java.io.IOException;import java.util.*;import org.apache.hadoop.conf.Configuration;import org.apache.hadoop.fs.Path;import org.apache.hadoop.io.Text;import org.apache.hadoop.mapreduce.Job;import org.apache.hadoop.mapreduce.Mapper;import org.apache.hadoop.mapreduce.Reducer;import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;import org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;import org.apache.hadoop.util.GenericOptionsParser;public class Grand &#123;\tpublic static class GrandMap extends Mapper&lt;Object, Text, Text, Text&gt; &#123;\t\tpublic void map(Object key, Text value, Context context) throws IOException, InterruptedException &#123;\t\t\tString[] array = value.toString().split(&quot;,&quot;);            context.write(new Text(array[0]),new Text(&quot;0_&quot;+array[1]));            context.write(new Text(array[1]),new Text(&quot;1_&quot;+array[0]));\t\t&#125;\t&#125;\tpublic static class GrandReducer extends Reducer&lt;Text,Text,Text,Text&gt; &#123;\t\tpublic void reduce(Text key, Iterable&lt;Text&gt; values, Context context) throws IOException, InterruptedException &#123;\t\t\tIterator&lt;Text&gt; iterator = values.iterator();\t\t\tArrayList&lt;String&gt; grandChildList = new ArrayList&lt;String&gt;();            ArrayList&lt;String&gt; grandParentList = new ArrayList&lt;String&gt;();            while (iterator.hasNext())&#123;                String[] splited = iterator.next().toString().split(&quot;_&quot;);                if (splited[0].equals(&quot;1&quot;))&#123;                    grandChildList.add(splited[1]);                &#125;else &#123;                    grandParentList.add(splited[1]);                &#125;            &#125;            if (grandChildList.size() &gt;0 &amp;&amp; grandParentList.size()&gt;0)&#123;                for(String grandChild:grandChildList)&#123;                    for (String grandParent:grandParentList)&#123;                        context.write(new Text(grandChild),new Text(grandParent));                    &#125;                &#125;            &#125;\t\t&#125;\t&#125;\tpublic static void main(String[] args) throws Exception &#123;\t\tConfiguration conf = new Configuration();\t\tString[] otherArgs = new GenericOptionsParser(conf, args).getRemainingArgs();\t\tif (otherArgs.length &lt; 2) &#123;\t\t  System.err.println(&quot;Usage: Grand&lt;in&gt; [&lt;in&gt;...] &lt;out&gt;&quot;);\t\t  System.exit(2);\t\t&#125;\t\tJob job = Job.getInstance(conf, &quot;grand&quot;);\t\tjob.setJarByClass(Grand.class);\t\tjob.setMapperClass(GrandMap.class);\t\tjob.setReducerClass(GrandReducer.class);\t\tjob.setOutputKeyClass(Text.class);\t\tjob.setOutputValueClass(Text.class);\t\tfor (int i = 0; i &lt; otherArgs.length - 1; ++i) &#123;\t\t\tFileInputFormat.addInputPath(job, new Path(otherArgs[i]));\t\t&#125;\t\tFileOutputFormat.setOutputPath(job,new Path(otherArgs[otherArgs.length - 1]));\t\tSystem.exit(job.waitForCompletion(true) ? 0 : 1);\t&#125;&#125;\nç¼–è¯‘å¹¶æ‰“åŒ…javac Grand.javajar cvf Grand.jar *.classè¿è¡Œå¹¶æŸ¥çœ‹ç»“æœhadoop jar Grand.jar Grand /input2 /output3hadoop fs -cat /output3/part-r-00000\n","tags":["Java","åˆ†å¸ƒå¼","Hadoop","MapReduce"]},{"title":"Python|é—ä¼ ç®—æ³•å®ç°","url":"/2019/06/02/ga/","content":"é—ä¼ ç®—æ³•ï¼ˆgenetic algorithmï¼‰æ˜¯è®¡ç®—æ•°å­¦ä¸­ç”¨äºè§£å†³æœ€ä¼˜åŒ–çš„æœç´¢ç®—æ³•ï¼Œæ˜¯è¿›åŒ–ç®—æ³•çš„ä¸€ç§ã€‚\nåŸç†ç®€è¿°\nå‚ç…§ç»´åŸºç™¾ç§‘\n\nåœ¨é—ä¼ ç®—æ³•é‡Œï¼Œä¼˜åŒ–é—®é¢˜çš„è§£è¢«ç§°ä¸ºä¸ªä½“ï¼Œå®ƒè¡¨ç¤ºä¸ºä¸€ä¸ªå˜é‡åºåˆ—ï¼Œå«åšæŸ“è‰²ä½“æˆ–è€…åŸºå› ä¸²ã€‚æŸ“è‰²ä½“ä¸€èˆ¬è¢«è¡¨è¾¾ä¸ºç®€å•çš„å­—ç¬¦ä¸²æˆ–æ•°å­—ç¬¦ä¸²ï¼Œä¸è¿‡ä¹Ÿæœ‰å…¶ä»–çš„ä¾èµ–äºç‰¹æ®Šé—®é¢˜çš„è¡¨ç¤ºæ–¹æ³•é€‚ç”¨ï¼Œè¿™ä¸€è¿‡ç¨‹ç§°ä¸ºç¼–ç ã€‚é¦–å…ˆï¼Œç®—æ³•éšæœºç”Ÿæˆä¸€å®šæ•°é‡çš„ä¸ªä½“ï¼Œæœ‰æ—¶å€™æ“ä½œè€…ä¹Ÿå¯ä»¥å¹²é¢„è¿™ä¸ªéšæœºäº§ç”Ÿè¿‡ç¨‹ï¼Œä»¥æé«˜åˆå§‹ç§ç¾¤çš„è´¨é‡ã€‚åœ¨æ¯ä¸€ä»£ä¸­ï¼Œéƒ½ä¼šè¯„ä»·æ¯ä¸€ä¸ªä½“ï¼Œå¹¶é€šè¿‡è®¡ç®—é€‚åº”åº¦å‡½æ•°å¾—åˆ°é€‚åº”åº¦æ•°å€¼ã€‚æŒ‰ç…§é€‚åº”åº¦æ’åºç§ç¾¤ä¸ªä½“ï¼Œé€‚åº”åº¦é«˜çš„åœ¨å‰é¢ã€‚è¿™é‡Œçš„â€œé«˜â€æ˜¯ç›¸å¯¹äºåˆå§‹çš„ç§ç¾¤çš„ä½é€‚åº”åº¦è€Œè¨€ã€‚\nä¸‹ä¸€æ­¥æ˜¯äº§ç”Ÿä¸‹ä¸€ä»£ä¸ªä½“å¹¶ç»„æˆç§ç¾¤ã€‚è¿™ä¸ªè¿‡ç¨‹æ˜¯é€šè¿‡é€‰æ‹©å’Œç¹æ®–å®Œæˆï¼Œå…¶ä¸­ç¹æ®–åŒ…æ‹¬äº¤é…ï¼ˆcrossoverï¼Œåœ¨ç®—æ³•ç ”ç©¶é¢†åŸŸä¸­æˆ‘ä»¬ç§°ä¹‹ä¸ºäº¤å‰æ“ä½œï¼‰å’Œçªå˜ï¼ˆmutationï¼‰ã€‚é€‰æ‹©åˆ™æ˜¯æ ¹æ®æ–°ä¸ªä½“çš„é€‚åº”åº¦è¿›è¡Œï¼Œä½†åŒæ—¶ä¸æ„å‘³ç€å®Œå…¨ä»¥é€‚åº”åº¦é«˜ä½ä¸ºå¯¼å‘ï¼Œå› ä¸ºå•çº¯é€‰æ‹©é€‚åº”åº¦é«˜çš„ä¸ªä½“å°†å¯èƒ½å¯¼è‡´ç®—æ³•å¿«é€Ÿæ”¶æ•›åˆ°å±€éƒ¨æœ€ä¼˜è§£è€Œéå…¨å±€æœ€ä¼˜è§£ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºæ—©ç†Ÿã€‚ä½œä¸ºæŠ˜ä¸­ï¼Œé—ä¼ ç®—æ³•ä¾æ®åŸåˆ™ï¼šé€‚åº”åº¦è¶Šé«˜ï¼Œè¢«é€‰æ‹©çš„æœºä¼šè¶Šé«˜ï¼Œè€Œé€‚åº”åº¦ä½çš„ï¼Œè¢«é€‰æ‹©çš„æœºä¼šå°±ä½ã€‚åˆå§‹çš„æ•°æ®å¯ä»¥é€šè¿‡è¿™æ ·çš„é€‰æ‹©è¿‡ç¨‹ç»„æˆä¸€ä¸ªç›¸å¯¹ä¼˜åŒ–çš„ç¾¤ä½“ã€‚ä¹‹åï¼Œè¢«é€‰æ‹©çš„ä¸ªä½“è¿›å…¥äº¤é…è¿‡ç¨‹ã€‚ä¸€èˆ¬çš„é—ä¼ ç®—æ³•éƒ½æœ‰ä¸€ä¸ªäº¤é…æ¦‚ç‡ï¼ˆåˆç§°ä¸ºäº¤å‰æ¦‚ç‡ï¼‰ï¼ŒèŒƒå›´ä¸€èˆ¬æ˜¯0.6~1ï¼Œè¿™ä¸ªäº¤é…æ¦‚ç‡åæ˜ ä¸¤ä¸ªè¢«é€‰ä¸­çš„ä¸ªä½“è¿›è¡Œäº¤é…çš„æ¦‚ç‡ã€‚ä¾‹å¦‚ï¼Œäº¤é…æ¦‚ç‡ä¸º0.8ï¼Œåˆ™80%çš„â€œå¤«å¦»â€ä¼šç”Ÿè‚²åä»£ã€‚æ¯ä¸¤ä¸ªä¸ªä½“é€šè¿‡äº¤é…äº§ç”Ÿä¸¤ä¸ªæ–°ä¸ªä½“ï¼Œä»£æ›¿åŸæ¥çš„â€œè€â€ä¸ªä½“ï¼Œè€Œä¸äº¤é…çš„ä¸ªä½“åˆ™ä¿æŒä¸å˜ã€‚äº¤é…çˆ¶æ¯çš„æŸ“è‰²ä½“ç›¸äº’äº¤æ¢ï¼Œä»è€Œäº§ç”Ÿä¸¤ä¸ªæ–°çš„æŸ“è‰²ä½“ï¼Œç¬¬ä¸€ä¸ªä¸ªä½“å‰åŠæ®µæ˜¯çˆ¶äº²çš„æŸ“è‰²ä½“ï¼ŒååŠæ®µæ˜¯æ¯äº²çš„ï¼Œç¬¬äºŒä¸ªä¸ªä½“åˆ™æ­£å¥½ç›¸åã€‚ä¸è¿‡è¿™é‡Œçš„åŠæ®µå¹¶ä¸æ˜¯çœŸæ­£çš„ä¸€åŠï¼Œè¿™ä¸ªä½ç½®å«åšäº¤é…ç‚¹ï¼Œä¹Ÿæ˜¯éšæœºäº§ç”Ÿçš„ï¼Œå¯ä»¥æ˜¯æŸ“è‰²ä½“çš„ä»»æ„ä½ç½®ã€‚å†ä¸‹ä¸€æ­¥æ˜¯çªå˜ï¼Œé€šè¿‡çªå˜äº§ç”Ÿæ–°çš„â€œå­â€ä¸ªä½“ã€‚ä¸€èˆ¬é—ä¼ ç®—æ³•éƒ½æœ‰ä¸€ä¸ªå›ºå®šçš„çªå˜å¸¸æ•°ï¼ˆåˆç§°ä¸ºå˜å¼‚æ¦‚ç‡ï¼‰ï¼Œé€šå¸¸æ˜¯0.1æˆ–è€…æ›´å°ï¼Œè¿™ä»£è¡¨å˜å¼‚å‘ç”Ÿçš„æ¦‚ç‡ã€‚æ ¹æ®è¿™ä¸ªæ¦‚ç‡ï¼Œæ–°ä¸ªä½“çš„æŸ“è‰²ä½“éšæœºçš„çªå˜ï¼Œé€šå¸¸å°±æ˜¯æ”¹å˜æŸ“è‰²ä½“çš„ä¸€ä¸ªå­—èŠ‚ï¼ˆ0å˜åˆ°1ï¼Œæˆ–è€…1å˜åˆ°0ï¼‰ã€‚\nç»è¿‡è¿™ä¸€ç³»åˆ—çš„è¿‡ç¨‹ï¼ˆé€‰æ‹©ã€äº¤é…å’Œçªå˜ï¼‰ï¼Œäº§ç”Ÿçš„æ–°ä¸€ä»£ä¸ªä½“ä¸åŒäºåˆå§‹çš„ä¸€ä»£ï¼Œå¹¶ä¸€ä»£ä¸€ä»£å‘å¢åŠ æ•´ä½“é€‚åº”åº¦çš„æ–¹å‘å‘å±•ï¼Œå› ä¸ºæ€»æ˜¯æ›´å¸¸é€‰æ‹©æœ€å¥½çš„ä¸ªä½“äº§ç”Ÿä¸‹ä¸€ä»£ï¼Œè€Œé€‚åº”åº¦ä½çš„ä¸ªä½“é€æ¸è¢«æ·˜æ±°æ‰ã€‚è¿™æ ·çš„è¿‡ç¨‹ä¸æ–­çš„é‡å¤ï¼šè¯„ä»·æ¯ä¸ªä¸ªä½“ï¼Œè®¡ç®—é€‚åº”åº¦ï¼Œä¸¤ä¸¤äº¤é…ï¼Œç„¶åçªå˜ï¼Œäº§ç”Ÿç¬¬ä¸‰ä»£ã€‚å‘¨è€Œå¤å§‹ï¼Œç›´åˆ°ç»ˆæ­¢æ¡ä»¶æ»¡è¶³ä¸ºæ­¢ã€‚ä¸€èˆ¬ç»ˆæ­¢æ¡ä»¶æœ‰ä»¥ä¸‹å‡ ç§ï¼š\nè®¡ç®—è€—è´¹çš„èµ„æºé™åˆ¶ï¼ˆä¾‹å¦‚è®¡ç®—æ—¶é—´ã€è®¡ç®—å ç”¨çš„å†…å­˜ç­‰ï¼‰ï¼›\nä¸€ä¸ªä¸ªä½“å·²ç»æ»¡è¶³æœ€ä¼˜å€¼çš„æ¡ä»¶ï¼Œå³æœ€ä¼˜å€¼å·²ç»æ‰¾åˆ°ï¼›\né€‚åº”åº¦å·²ç»è¾¾åˆ°é¥±å’Œï¼Œç»§ç»­è¿›åŒ–ä¸ä¼šäº§ç”Ÿé€‚åº”åº¦æ›´å¥½çš„ä¸ªä½“ï¼›\näººä¸ºå¹²é¢„ï¼›ä»¥åŠä»¥ä¸Šä¸¤ç§æˆ–æ›´å¤šç§çš„ç»„åˆã€‚\nåŸºæœ¬æ€æƒ³\né¦–å…ˆå¯¹é—®é¢˜è¿›è¡Œç¼–ç ï¼Œäº§ç”Ÿåˆå§‹ç§ç¾¤ã€‚\nç„¶åå¯¹ä¸ªä½“è¿›è¡Œäº¤å‰ã€å˜å¼‚ç­‰é—ä¼ æ“ä½œï¼Œäº§ç”Ÿå‡ºæ–°çš„ä¸ªä½“ã€‚\nå†æŒ‰ç…§ä¼˜èƒœåŠ£æ±°çš„åŸåˆ™å¯¹ä¸ªä½“è¿›è¡Œé€‰æ‹©ã€‚\nå¦‚æ­¤å¾€å¤ï¼Œé€ä»£æ¼”åŒ–äº§ç”Ÿå‡ºè¶Šæ¥è¶Šå¥½çš„ä¸ªä½“ã€‚\n\nç¼–ç å°†é—®é¢˜çš„è§£å˜æ¢ä¸ºä½ä¸²å½¢å¼ç¼–ç è¡¨ç¤ºçš„è¿‡ç¨‹å«ç¼–ç \n\nç¼–ç æ˜¯è¿›åŒ–è®¡ç®—è§£å†³é—®é¢˜çš„å…ˆå†³æ¡ä»¶ç¼–ç çš„é‡è¦æ€§ä¸»è¦ä½“ç°åœ¨ä¸‰æ–¹é¢ï¼šï¼ˆ1ï¼‰ ç¼–ç å†³å®šäº†ä¸ªä½“åŸºå› çš„æ’åˆ—å½¢å¼ï¼Œä»è€Œå†³å®šäº†é€‰æ‹©ã€äº¤å‰åŠå˜å¼‚çš„æ–¹å¼ã€‚ï¼ˆ2ï¼‰ ç¼–ç å†³å®šäº†æœç´¢çš„å›°éš¾åº¦ä¸å¤æ‚æ€§ã€‚ï¼ˆ3ï¼‰ ç¼–ç å†³å®šäº†é—®é¢˜çš„æ±‚è§£ç²¾åº¦ã€‚\n\näº¤å‰å•ç‚¹äº¤å‰ä¸¤ç‚¹äº¤å‰éƒ¨åˆ†åŒ¹é…äº¤å‰é¡ºåºäº¤å‰\nå˜å¼‚\né€‰æ‹©è½®ç›˜èµŒé€‰æ‹©å¯èƒ½å‡ºç°çš„é—®é¢˜ä¸¤ä¸¤ç«äº‰æ³•é€‰æ‹©é”¦æ ‡èµ›é€‰æ‹©ç²¾è‹±ä¿ç•™\nç®—æ³•æµç¨‹\n[åˆå§‹åŒ–] ç¡®å®šç§ç¾¤è§„æ¨¡$N$ï¼Œäº¤å‰æ¦‚ç‡$p_c$ï¼Œå˜å¼‚æ¦‚ç‡$p_m$å’Œç»ˆæ­¢æ¡ä»¶ã€‚éšæœºç”Ÿæˆ$N$ä¸ªä¸ªä½“ä½œä¸ºåˆå§‹ç§ç¾¤$P(0)$ï¼Œè®¾ç§ç¾¤ä»£æ•°$t$=0.\n[ä¸ªä½“è¯„ä»·] è®¡ç®—ç§ç¾¤$P(t)$ä¸­æ¯ä¸ªä¸ªä½“çš„é€‚åº”åº¦å€¼.\n[ç§ç¾¤è¿›åŒ–]\n(é€‰æ‹©çˆ¶ä»£) è¿ç”¨é€‰æ‹©ç®—å­ä»$P(t)$ä¸­é€‰æ‹©å‡º$N/2$å¯¹çˆ¶ä»£ï¼›\n(äº¤å‰) å¯¹é€‰æ‹©çš„$N/2$å¯¹çˆ¶ä»£ï¼Œä¾æ¦‚ç‡$p_c$è¿›è¡Œäº¤å‰ï¼Œç”Ÿæˆçš„å­ä»£ä¸ªä½“è®°ä¸ºé›†åˆ$O_1$ï¼›\n(å˜å¼‚) å¯¹é›†åˆ$O_1$ä¸­çš„ä¸ªä½“ä¾æ¦‚ç‡$p_m$è¿›è¡Œå˜å¼‚ï¼Œç”Ÿæˆçš„å­ä»£ä¸ªä½“è®°ä¸ºé›†åˆ$O_2$ï¼›\n(é€‰æ‹©å­ä»£) ä»é›†åˆ$P(t)\\cup O_1\\cup O_2$ä¸­ä¾æ®é€‰æ‹©ç®—å­é€‰å‡º$N$ä¸ªä¸ªä½“ç»„æˆä¸‹ä»£ç§ç¾¤$P(t+1)$ï¼›\n\n\n[ç»ˆæ­¢æ£€éªŒ] å¦‚ç®—æ³•æ»¡è¶³ç»ˆæ­¢æ¡ä»¶ï¼Œåˆ™è¾“å‡º$P(t+1)$ä¸­å…·æœ‰æœ€å¤§é€‚åº”åº¦å€¼çš„ä¸ªä½“ä½œä¸ºæœ€ä¼˜è§£ï¼Œç»ˆæ­¢ç®—æ³•ï¼Œå¦åˆ™ä»¤$t=t+1$è½¬å…¥æ­¥éª¤2\n\nç®—æ³•å®ç°\næ•¬è¯·æœŸå¾…\n\n","tags":["Python","GA"]},{"title":"JAVA|MapReduce-è®¡ç®—å¹³å‡æˆç»©","url":"/2019/06/02/hadoop1/","content":"ç¯å¢ƒ: Hadoop 3.0.0+Win10å®ç°åŠŸèƒ½ï¼š1 æ¯ä¸ªåŒå­¦å¿…ä¿®è¯¾çš„å¹³å‡æˆç»©2 æŒ‰ç§‘ç›®ç»Ÿè®¡æ¯ä¸ªç­çš„å¹³å‡æˆç»©\né…ç½®æ•°æ®å’Œç¯å¢ƒå˜é‡è¾“å…¥æ–‡ä»¶ä¸ºå­¦ç”Ÿæˆç»©ä¿¡æ¯ï¼ŒåŒ…å«äº†å¿…ä¿®è¯¾ä¸é€‰ä¿®è¯¾æˆç»©ï¼šInput1.txt(æå–ç :xrq7)\né¦–å…ˆå¯åŠ¨hadoopï¼ˆè®°å¾—ä»¥ç®¡ç†å‘˜æ¨¡å¼å¯åŠ¨ï¼‰ï¼Œæ–°å»ºä¸€ä¸ªinput1æ–‡ä»¶å¤¹ï¼ŒæŠŠè¾“å…¥æ–‡ä»¶ä¸Šä¼ åˆ°æ–‡ä»¶å¤¹ä¸­hadoop fs -mkdir /input1hadoop fs -put input1.txt /input1ç”±äºç¨‹åºé‡Œä¼šç”¨åˆ°hadoopçš„jaråŒ…ï¼Œæ‰€ä»¥è¦æŠŠè·¯å¾„é…ç½®åˆ°ç¯å¢ƒä¸­ï¼Œä¸€ç§æ˜¯ç›´æ¥åœ¨ç³»ç»Ÿå˜é‡ä¸­ä¿®æ”¹classpathï¼Œä½†æ˜¯ä¼šå½±å“ä»¥åçš„ç¼–è¯‘ï¼Œä¸æ¨èï¼›ç¬¬äºŒç§æ˜¯æ–°å»ºä¸€ä¸ª.batæ–‡ä»¶ï¼Œåœ¨ç¼–è¯‘å‰å¯åŠ¨å°±è¡Œäº†ã€‚æŸ¥çœ‹è‡ªå·±hadoopé‡ŒjaråŒ…çš„è·¯å¾„hadoop classpathæ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹Map,é‡Œé¢æ–°å»ºä¸€ä¸ªsetcp.batï¼Œå†…å®¹å¦‚ä¸‹set classpath=%classpath%;ä¸Šä¸€æ­¥æŸ¥çœ‹çš„å†…å®¹åœ¨Mapæ–‡ä»¶ä¸‹ï¼Œå¯åŠ¨setcpåˆ°æ­¤å‡†å¤‡å·¥ä½œå°±åšå®Œäº†ã€‚\nç¨‹åºæ„æˆ\nå…·ä½“å®ç°é—®é¢˜ä¸€é—®é¢˜æ˜¯æ±‚æ¯ä¸ªåŒå­¦å¿…ä¿®è¯¾çš„å¹³å‡æˆç»©ï¼Œæ€è·¯å¾ˆç®€å•ã€‚ä»¥åŒå­¦çš„åå­—ä¸ºä¸»é”®ï¼Œå¦‚æœæ˜¯å¿…ä¿®è¯¾æˆç»©å°±è¯»å–ï¼Œæœ€åè®¡ç®—æ€»åˆ†æ•°å’Œä¸ªæ•°ï¼Œæ±‚å–å¹³å‡æ•°ã€‚\n\nè¿™é‡Œè¦æ³¨æ„ä¸€ä¸‹ä¸­æ–‡ç¼–ç é—®é¢˜ï¼Œè¾“å…¥æ•°æ®ä¸ºutf-8çš„æ ¼å¼ï¼Œè€Œhadoopè¯»å–æ—¶ä¼šè½¬ä¸ºGBKï¼Œåœ¨åˆ¤æ–­å¿…ä¿®çš„æ—¶å€™æ³¨æ„ç¼–ç ã€‚\n\nScore.javaimport java.io.IOException;import java.util.StringTokenizer;import org.apache.hadoop.conf.Configuration;import org.apache.hadoop.fs.Path;import org.apache.hadoop.io.DoubleWritable;import org.apache.hadoop.io.IntWritable;import org.apache.hadoop.io.Text;import org.apache.hadoop.mapreduce.Job;import org.apache.hadoop.mapreduce.Mapper;import org.apache.hadoop.mapreduce.Reducer;import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;import org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;import org.apache.hadoop.util.GenericOptionsParser;public class Score &#123;\tpublic static class SMap extends Mapper&lt;Object, Text, Text, DoubleWritable&gt; &#123;\t\tpublic void map(Object key, Text value, Context context) throws IOException, InterruptedException &#123;\t\t\tString[] split=value.toString().split(&quot;,&quot;);\t\t\tString Name=split[1];\t\t\tString t=split[3];\t\t\tif(t.equals(&quot;â–’Ğ¿Ğ»Ñ&quot;))\t\t\t&#123;\t\t\t\tDoubleWritable Score = new DoubleWritable(Integer.parseInt(split[4]));\t\t\t\tcontext.write(new Text(Name),Score);\t\t\t&#125;\t\t&#125;\t&#125;\tpublic static class SReducer extends Reducer&lt;Text,DoubleWritable,Text,DoubleWritable&gt; &#123;\t\tpublic void reduce(Text key, Iterable&lt;DoubleWritable&gt; values, Context context) throws IOException, InterruptedException &#123;\t\t\tint sum = 0;\t\t\tint count=0;\t\t\tfor (DoubleWritable val : values) &#123;\t\t\t\tsum += val.get();\t\t\t\tcount++;\t\t\t&#125;\t\t\tdouble average=sum/(double)count;\t\t\tcontext.write(key,new DoubleWritable(average));\t\t&#125;\t&#125;\tpublic static void main(String[] args) throws Exception &#123;\t\tConfiguration conf = new Configuration();\t\tString[] otherArgs = new GenericOptionsParser(conf, args).getRemainingArgs();\t\tif (otherArgs.length &lt; 2) &#123;\t\t  System.err.println(&quot;Usage: Score&lt;in&gt; [&lt;in&gt;...] &lt;out&gt;&quot;);\t\t  System.exit(2);\t\t&#125;\t\tJob job = Job.getInstance(conf, &quot;score&quot;);\t\tjob.setJarByClass(Score.class);\t\tjob.setMapperClass(SMap.class);\t\tjob.setReducerClass(SReducer.class);\t\tjob.setOutputKeyClass(Text.class);\t\tjob.setOutputValueClass(DoubleWritable.class);\t\tfor (int i = 0; i &lt; otherArgs.length - 1; ++i) &#123;\t\t\tFileInputFormat.addInputPath(job, new Path(otherArgs[i]));\t\t&#125;\t\tFileOutputFormat.setOutputPath(job,new Path(otherArgs[otherArgs.length - 1]));\t\tSystem.exit(job.waitForCompletion(true) ? 0 : 1);\t&#125;&#125;ç¼–è¯‘å†™å¥½çš„ç¨‹åºï¼Œå¹¶æ‰“åŒ…ã€‚æ²¡é—®é¢˜çš„è¯ï¼Œä¼šåœ¨æ–‡ä»¶å¤¹é‡Œçœ‹åˆ°ç”Ÿæˆçš„Score.jarjavac Score.javajar cvf Score.jar *.classæ‰§è¡Œç¨‹åºï¼Œhadoopä¼šè¯»å–input1çš„æ•°æ®ï¼Œå°†è¾“å‡ºæ–‡ä»¶æ”¾åˆ°output1ä¸­ã€‚\n\nåœ¨æ‰§è¡Œè¿™æ­¥æ—¶ï¼Œå¯èƒ½ä¼šé‡åˆ°å„ç§å„æ ·çš„é—®é¢˜ï¼Œå¤šæŸ¥ä¸€æŸ¥ï¼Œç½‘ä¸Šéƒ½ä¼šæœ‰è§£å†³æ–¹æ³•çš„ã€‚å½“ç„¶ï¼Œé‡è£…å¯ä»¥è§£å†³ç™¾åˆ†ä¹‹äº”åçš„é—®é¢˜:yum:hadoop jar Score.jar Score /input1 /output1æœ€åï¼Œèƒ½åœ¨output1é‡Œçœ‹åˆ°ä¸¤ä¸ªæ–‡ä»¶ï¼Œpart-r-00000æ˜¯æœ€ç»ˆç»“æœã€‚å¦‚æœè¦å¤šæ¬¡è¿è¡Œï¼Œè®°å¾—æ¯æ¬¡è¿è¡Œå‰æŠŠoutputæ–‡ä»¶å¤¹åˆ äº†ï¼Œå¦åˆ™ä¼šç”±äºæ–‡ä»¶å¤¹å­˜åœ¨æŠ¥é”™ã€‚hadoop fs -ls /output1hadoop fs -cat /output1/part-r-00000åœ¨å‘½ä»¤è¡Œæ‰“å¼€åº”è¯¥ä¼šä¹±ç ï¼Œæ‰“å¼€http://localhost:9870/explorer.html#/output1ä¸‹è½½ä¸‹æ¥ã€‚æœ€ç»ˆç»“æœ\n\né—®é¢˜äºŒæ€è·¯å’Œé—®é¢˜ä¸€ç›´ï¼ŒæŠŠå­¦ç”Ÿå§“åæ¢æˆè¯¾ç¨‹åç§°+ç­çº§å°±è¡Œäº†cScore.javaimport java.io.IOException;import java.util.StringTokenizer;import org.apache.hadoop.conf.Configuration;import org.apache.hadoop.fs.Path;import org.apache.hadoop.io.FloatWritable;import org.apache.hadoop.io.IntWritable;import org.apache.hadoop.io.Text;import org.apache.hadoop.mapreduce.Job;import org.apache.hadoop.mapreduce.Mapper;import org.apache.hadoop.mapreduce.Reducer;import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;import org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;import org.apache.hadoop.util.GenericOptionsParser;public class cScore &#123;\tpublic static class cSMap extends Mapper&lt;Object, Text, Text, IntWritable&gt; &#123;\t\tpublic void map(Object key, Text value, Context context) throws IOException, InterruptedException &#123;\t\t\tString[] split=value.toString().split(&quot;,&quot;);\t\t\tString room=split[0];\t\t\tString course=split[2];\t\t\tString Name=course+&quot; &quot;+room;\t\t\tint Score=Integer.parseInt(split[4]);\t\t\tcontext.write(new Text(Name),new IntWritable(Score));\t\t&#125;\t&#125;\tpublic static class cSReducer extends Reducer&lt;Text,IntWritable,Text,FloatWritable&gt; &#123;\t\tpublic void reduce(Text key, Iterable&lt;IntWritable&gt; values, Context context) throws IOException, InterruptedException &#123;\t\t\tint sum = 0;\t\t\tint count=0;\t\t\tfor (IntWritable val : values) &#123;\t\t\t\tsum += val.get();\t\t\t\tcount++;\t\t\t&#125;\t\t\tfloat average=sum/(float)count;\t\t\tcontext.write(key,new FloatWritable(average));\t\t&#125;\t&#125;\tpublic static void main(String[] args) throws Exception &#123;\t\tConfiguration conf = new Configuration();\t\tString[] otherArgs = new GenericOptionsParser(conf, args).getRemainingArgs();\t\tif (otherArgs.length &lt; 2) &#123;\t\t  System.err.println(&quot;Usage: cScore&lt;in&gt; [&lt;in&gt;...] &lt;out&gt;&quot;);\t\t  System.exit(2);\t\t&#125;\t\tJob job = Job.getInstance(conf, &quot;cscore&quot;);\t\tjob.setJarByClass(cScore.class);\t\tjob.setMapperClass(cSMap.class);\t\tjob.setReducerClass(cSReducer.class);\t\tjob.setOutputKeyClass(Text.class);\t\tjob.setOutputValueClass(IntWritable.class);\t\tfor (int i = 0; i &lt; otherArgs.length - 1; ++i) &#123;\t\t\tFileInputFormat.addInputPath(job, new Path(otherArgs[i]));\t\t&#125;\t\tFileOutputFormat.setOutputPath(job,new Path(otherArgs[otherArgs.length - 1]));\t\tSystem.exit(job.waitForCompletion(true) ? 0 : 1);\t&#125;&#125;è¿è¡Œæ–¹æ³•å’Œä¸Šé¢ä¸€ç›´javac cScore.javajar cvf cScore.jar *.classhadoop fs -mkdir /input1hadoop fs -put input1.txt /input1hadoop jar cScore.jar cScore /input1 /output2æœ€åï¼Œèƒ½åœ¨output2é‡Œæ‰¾åˆ°æœ€ç»ˆç»“æœpart-r-00000ã€‚æ‰“å¼€http://localhost:9870/explorer.html#/output2ä¸‹è½½ä¸‹æ¥ã€‚æœ€ç»ˆç»“æœ\n","tags":["Java","åˆ†å¸ƒå¼","Hadoop","MapReduce"]},{"title":"Hadoop|åœ¨Windowsä¸Šå®‰è£…HadoopåŠWordCountç¤ºä¾‹","url":"/2019/05/27/hadoop/","content":"Hadoopé›†ç¾¤å®‰è£…\nä»€ä¹ˆæ˜¯Hadoopã€€ã€€Hadoopæ˜¯ä¸€æ¬¾æ”¯æŒæ•°æ®å¯†é›†å‹åˆ†å¸ƒå¼åº”ç”¨ç¨‹åºå¹¶ä»¥Apache 2.0è®¸å¯åè®®å‘å¸ƒçš„å¼€æºè½¯ä»¶æ¡†æ¶ã€‚å®ƒæ”¯æŒåœ¨å•†å“ç¡¬ä»¶æ„å»ºçš„å¤§å‹é›†ç¾¤ä¸Šè¿è¡Œçš„åº”ç”¨ç¨‹åºã€‚Hadoopæ˜¯æ ¹æ®è°·æ­Œå…¬å¸å‘è¡¨çš„MapReduceå’ŒGoogleæ–‡ä»¶ç³»ç»Ÿçš„è®ºæ–‡è‡ªè¡Œå®ç°è€Œæˆã€‚æ‰€æœ‰çš„Hadoopæ¨¡å—éƒ½æœ‰ä¸€ä¸ªåŸºæœ¬å‡è®¾ï¼Œå³ç¡¬ä»¶æ•…éšœæ˜¯å¸¸è§æƒ…å†µï¼Œåº”è¯¥ç”±æ¡†æ¶è‡ªåŠ¨å¤„ç†ã€‚\nã€€ã€€Hadoopæ¡†æ¶é€æ˜åœ°ä¸ºåº”ç”¨æä¾›å¯é æ€§å’Œæ•°æ®ç§»åŠ¨ã€‚å®ƒå®ç°äº†åä¸ºMapReduceçš„ç¼–ç¨‹èŒƒå¼ï¼šåº”ç”¨ç¨‹åºè¢«åˆ†å‰²æˆè®¸å¤šå°éƒ¨åˆ†ï¼Œè€Œæ¯ä¸ªéƒ¨åˆ†éƒ½èƒ½åœ¨é›†ç¾¤ä¸­çš„ä»»æ„èŠ‚ç‚¹ä¸Šè¿è¡Œæˆ–é‡æ–°è¿è¡Œã€‚æ­¤å¤–ï¼ŒHadoopè¿˜æä¾›äº†åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼Œç”¨ä»¥å­˜å‚¨æ‰€æœ‰è®¡ç®—èŠ‚ç‚¹çš„æ•°æ®ï¼Œè¿™ä¸ºæ•´ä¸ªé›†ç¾¤å¸¦æ¥äº†éå¸¸é«˜çš„å¸¦å®½ã€‚MapReduceå’Œåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿçš„è®¾è®¡ï¼Œä½¿å¾—æ•´ä¸ªæ¡†æ¶èƒ½å¤Ÿè‡ªåŠ¨å¤„ç†èŠ‚ç‚¹æ•…éšœã€‚å®ƒä½¿åº”ç”¨ç¨‹åºä¸æˆåƒä¸Šä¸‡çš„ç‹¬ç«‹è®¡ç®—çš„è®¡ç®—æœºå’ŒPBçº§çš„æ•°æ®è¿æ¥èµ·æ¥ã€‚\nä»¥ä¸Šå†…å®¹æ¥è‡ªç»´åŸºç™¾ç§‘ã€‚ä¸è¿‡å¯¹äºæˆ‘æ¥è¯´ï¼Œå¼€å§‹å­¦ä¹ æŸä¸€å¥—æŠ€æœ¯åªæœ‰å½“æˆ‘äº²è‡ªåŠ¨æ‰‹å®è·µåï¼Œæ‰èƒ½çœŸæ­£ç†è§£è¿™å¥—æŠ€æœ¯è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Œå¹¶ä¸”æœ‰ç›Šäºåç»­çš„å­¦ä¹ ã€‚ä¸‹æ¥å°±è®©æˆ‘ä»¬å¼€å§‹å§ï¼\nWindowså®‰è£…ç¯å¢ƒï¼šæ“ä½œç³»ç»Ÿï¼šWindows 10JDKç‰ˆæœ¬ï¼šJDK 1.8ä»¥ä¸Šçš„Javaå¼€å‘å’Œè¿è¡Œç¯å¢ƒ\nHadoopé…ç½®1 å…ˆæ£€æŸ¥ä¸‹è‡ªå·±çš„é…ç½®ç¯å¢ƒï¼Œä¸»è¦æ˜¯JDKç‰ˆæœ¬2 ä¸‹è½½è¿›åˆ¶å‹ç¼©åŒ…æ–‡ä»¶:hadoop-3.0.0.tar.gz 3 ä¸‹è½½é’ˆå¯¹Windowsç¯å¢ƒçš„Hadoopä¿®æ­£ç¨‹åº:winutils-master.zip4 å°†hadoop-3.0.0.tar.gzè§£å‹è‡³ C:\\Soft\\Hadoopï¼ˆå¯ä»¥æ ¹æ®è‡ªå·±å–œå¥½æ›´æ”¹Hadoopå®‰è£…ç›®å½•ï¼‰5 æ–°å¢ç¯å¢ƒå˜é‡HADOOP_HOMEï¼ˆä½œä¸ºç³»ç»Ÿå˜é‡ï¼‰ï¼Œå¹¶å°†å…¶å€¼è®¾ä¸ºC:\\Soft\\Hadoop\\bin(è¿™é‡Œæ ¹æ®ä½ è‡ªå·±è§£å‹çš„ä½ç½®è®¾ç½®)ï¼ˆè®¾ç½®æ–¹æ³•ï¼šè¿›å…¥â€œæ§åˆ¶é¢æ¿\\ç³»ç»Ÿå’Œå®‰å…¨\\ç³»ç»Ÿâ€ï¼Œç„¶åç‚¹å‡»â€œé«˜çº§ç³»ç»Ÿè®¾ç½®â€ï¼Œç„¶åç‚¹å‡»â€œç¯å¢ƒå˜é‡(N)..â€æŒ‰é’®ï¼‰6 è§‚å¯ŸJAVA_HOMEå˜é‡è®¾ç½®æ˜¯å¦æ­£ç¡®ï¼Œè¿™ä¸ªåé¢ä¼šç”¨åˆ°ã€‚7 å°†C:\\Soft\\Hadoop\\binè·¯å¾„æ·»åŠ åˆ°Pathç¯å¢ƒå˜é‡ã€‚(è¿™æ˜¯æœ¬äººçš„ï¼Œè®°å¾—æ¢æˆè‡ªå·±çš„)8 å°†å¦‚ä¸‹å†…å®¹ç²˜è´´åˆ°..\\Hadoop\\etc\\hadoop\\core-site.xmlæ–‡ä»¶&lt;configuration&gt;    &lt;property&gt;    &lt;name&gt;fs.defaultFS&lt;/name&gt;    &lt;value&gt;hdfs://localhost:9000&lt;/value&gt;    &lt;/property&gt;&lt;/configuration&gt;9 å°†å¦‚ä¸‹å†…å®¹ç²˜è´´åˆ°..\\Hadoop\\etc\\hadoop\\mapred-site.xmlæ–‡ä»¶&lt;configuration&gt;    &lt;property&gt;    &lt;name&gt;mapreduce.framework.name&lt;/name&gt;    &lt;value&gt;yarn&lt;/value&gt;    &lt;/property&gt;&lt;/configuration&gt;10 åœ¨..\\Hadoopè·¯å¾„ä¸‹åˆ›å»ºâ€œdataâ€å­ç›®å½•ï¼›åœ¨..\\Hadoop\\dataè·¯å¾„ä¸‹åˆ›å»ºâ€œnamenodeâ€å­ç›®å½•ï¼›åœ¨..\\Hadoop\\dataè·¯å¾„ä¸‹åˆ›å»ºâ€œdatanodeâ€å­ç›®å½•ã€‚11 å°†å¦‚ä¸‹å†…å®¹ç²˜è´´åˆ°..\\Hadoop\\etc\\hadoop\\hdfs-site.xmlæ–‡ä»¶ï¼ˆé‡Œé¢çš„è·¯å¾„è®°å¾—æ¢æˆè‡ªå·±çš„ï¼‰&lt;configuration&gt;   &lt;property&gt;       &lt;name&gt;dfs.replication&lt;/name&gt;       &lt;value&gt;1&lt;/value&gt;   &lt;/property&gt;   &lt;property&gt;       &lt;name&gt;dfs.namenode.name.dir&lt;/name&gt;       &lt;value&gt;file:///C:/Soft/hadoop/data/namenode&lt;/value&gt;   &lt;/property&gt;   &lt;property&gt;       &lt;name&gt;dfs.datanode.data.dir&lt;/name&gt;       &lt;value&gt;file:///C:/Soft/hadoop/data/datanode&lt;/value&gt;   &lt;/property&gt;&lt;/configuration&gt;12 å°†å¦‚ä¸‹å†…å®¹ç²˜è´´åˆ°..\\Hadoop\\etc\\hadoop\\yarn-site.xmlæ–‡ä»¶&lt;configuration&gt;   &lt;property&gt;    \t&lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;    \t&lt;value&gt;mapreduce_shuffle&lt;/value&gt;   &lt;/property&gt;   &lt;property&gt;      \t&lt;name&gt;yarn.nodemanager.auxservices.mapreduce.shuffle.class&lt;/name&gt;  \t&lt;value&gt;org.apache.hadoop.mapred.ShuffleHandler&lt;/value&gt;   &lt;/property&gt;&lt;/configuration&gt;13 ç¼–è¾‘æ–‡ä»¶C:\\Hadoop\\etc\\hadoop\\hadoop-env.cmdï¼šæŠŠâ€œset JAVA_HOME=%JAVA_HOME%â€ä¿®æ”¹ä¸ºâ€œset JAVA_HOME=C:\\PROGRA~1\\Java\\è‡ªå·±çš„jdkç‰ˆæœ¬â€å¯ä»¥å›åˆ°ç¬¬6æ­¥çœ‹ä¸€ä¸‹ï¼Œæœ¬äººçš„æ˜¯jdk1.8.0_20114 C:\\Hadoop\\binç›®å½•ä¸‹çš„å†…å®¹åˆ é™¤ã€‚15 å°†ç¬¬3æ­¥ä¸‹è½½çš„â€œwinutils-master.zipâ€è§£å‹ï¼Œç„¶åå°†è§£å‹æ–‡ä»¶ä¸­â€œ..\\winutils-master\\hadoop-3.0.0\\binâ€ç›®å½•ä¸‹çš„å†…å®¹æ‹·è´åˆ°â€œ..\\Hadoop\\binâ€ç›®å½•ã€‚\næµ‹è¯•åˆ°æ­¤ä¸ºæ­¢ï¼ŒHadoopçš„å®‰è£…å°±å®Œæˆäº†ï¼Œæ¥ä¸‹æ¥è¿è¡Œå‡ ä¸ªå‘½ä»¤æµ‹è¯•Hadoopæ˜¯å¦å¯ä»¥æ­£å¸¸è¿è¡Œ1 æ‰“å¼€ç»ˆç«¯cd ..\\Hadoop\\bin2 å…ˆå¯¹HDFSåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿè¿›è¡Œæ ¼å¼åŒ–ã€‚hdfs namenode â€“formatå¦‚æœæˆåŠŸï¼Œèƒ½çœ‹åˆ°ä¸‹é¢è¿™å¥INFO common.Storage: Storage directory C:\\Soft\\hadoop\\data\\namenode has been successfully formatted3 è¾“å…¥ä¸‹é¢çš„å‘½ä»¤ã€‚å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œå°†ä¼šå¯åŠ¨ä¸€ä¸ªâ€œhdfs namenodeâ€è¿›ç¨‹å’Œä¸€ä¸ªâ€œhdfs datanodeâ€è¿›ç¨‹ï¼Œæ„æˆäº†åªæœ‰1ä¸ªä¸»èŠ‚ç‚¹å’Œ1ä¸ªä»èŠ‚ç‚¹çš„â€œHDFSåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿé›†ç¾¤â€ã€‚å¯ä»¥é€šè¿‡http://localhost:9870ç›‘æ§HDFSç³»ç»Ÿã€‚cd ..\\Hadoop\\sbinstart-dfs4 å…³é—­HDFSåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿã€‚cd ..\\Hadoop\\sbinstop-dfs\nWordCountç¤ºä¾‹çš„ä½¿ç”¨é¦–å…ˆï¼Œä»¥ç®¡ç†å‘˜èº«ä»½å¯åŠ¨å‘½ä»¤è¡Œï¼Œè¿›åˆ°sbinæ–‡ä»¶å¤¹ä¸‹cd C:\\Soft\\Hadoop\\sbinå¯åŠ¨Hadoopstart-allå¦‚æœæ­£å¸¸çš„è¯ä¼šæ‰“å¼€å››ä¸ªçª—å£æ–°å»ºä¸€ä¸ªtxtæ–‡ä»¶ä½œä¸ºæ•°æ®æ ·æœ¬test.txthelloworldqitstopsdfappleEAsteamorangeåœ¨Hadoopä¸­æ–°å»ºä¸€ä¸ªtestæ–‡ä»¶å¤¹hadoop fs -mkdir /test\nå°†test.txtä¸Šä¼ åˆ°testæ–‡ä»¶å¤¹ä¸­ï¼ŒæŸ¥çœ‹ä¸€ä¸‹hadoop fs -put C:\\Else\\test.txt \\testhadoop fs -ls /hadoop fs -ls /teståˆ°æ­¤å‡†å¤‡å·¥ä½œå°±å·²ç»åšå®Œäº†ã€‚\nWordCountæ˜¯Hadoopè‡ªå¸¦çš„ä¸€ä¸ªç¤ºä¾‹ç¨‹åºï¼Œåœ¨../Hadoop\\share\\hadoop\\mapreduceæ–‡ä»¶å¤¹ä¸‹èƒ½æ‰¾åˆ°åç§°é‡Œå¸¦æœ‰examplesçš„jaråŒ…hadoop jar C:\\Soft\\Hadoop\\share\\hadoop\\mapreduce\\hadoop-mapreduce-examples-3.0.0.jar wordcount \\test \\outputè¿è¡Œå®Œæˆåèƒ½åœ¨outputæ–‡ä»¶å¤¹ä¸‹çœ‹çš„ä¸¤ä¸ªæ–‡ä»¶ï¼Œæœ€ç»ˆçš„ç»“æœå°±å­˜åœ¨part-r-00000ä¸­hadoop fs -ls /outputhadoop fs -cat /output/part-r-00000è¾“å…¥ç»“æŸå‘½ä»¤ï¼Œå…³é—­ç³»ç»Ÿstop-all\nLinuxå®‰è£…ç¯å¢ƒï¼š\n\næ“ä½œç³»ç»Ÿï¼šCentos 7\nJDKç‰ˆæœ¬ï¼šJDK 1.8ä»¥ä¸Šçš„Javaå¼€å‘å’Œè¿è¡Œç¯å¢ƒ\n\nCentos 7 ä¸‹è½½åœ°å€ï¼šhttps://mirrors.aliyun.com/centos/7/isos/x86_64/CentOS-7-x86_64-DVD-2009.iso\n\nVMè™šæ‹Ÿæœºå®‰è£…æ—¶è®°å¾—é…ç½®ç½‘ç»œå’Œä¸»æœºåï¼ï¼ï¼\nä¿®æ”¹ç½‘ç»œé…ç½®æ–‡ä»¶vi /etc/sysconfig/network-scripts/ifcfg-ens33\næŒ‰iå¼€å§‹ç¼–è¾‘ï¼ŒæŒ‰escåè¾“å…¥:wqä¿å­˜é€€å‡ºï¼ˆ:qä¸ä¿å­˜é€€å‡ºï¼‰TYPE=&quot;Ethernet&quot;PROXY_METHOD=&quot;none&quot;BROWSER_ONLY=&quot;no&quot;#BOOTPROTO=&quot;dhcp&quot;BOOTPROTO=&quot;static&quot;DEFROUTE=&quot;yes&quot;IPV4_FAILURE_FATAL=&quot;no&quot;IPV6INIT=&quot;yes&quot;IPV6_AUTOCONF=&quot;yes&quot;IPV6_DEFROUTE=&quot;yes&quot;IPV6_FAILURE_FATAL=&quot;no&quot;IPV6_ADDR_GEN_MODE=&quot;stable-privacy&quot;NAME=&quot;ens33&quot;UUID=&quot;84be3b82-7dd7-45ae-a35c-62f84b9f1c1c&quot;DEVICE=&quot;ens33&quot;ONBOOT=&quot;yes&quot;IPADDR=192.168.142.131NETMASK=255.255.255.0GATEWAY=192.168.142.2DNS1=114.114.114.114å…¶ä¸­IPADDRæ ¹æ®è‡ªå·±çš„è™šæ‹Ÿç½‘ç»œç¼–è¾‘å™¨çš„NATæ¨¡å¼ä¸­å­ç½‘åœ°å€å¡«å†™ï¼ŒNETMASKä¸ºå­ç½‘æ©ç ï¼ŒGATEWAYä¸ºç½‘å…³ã€‚\n\né‡å¯ç½‘ç»œï¼Œæµ‹è¯•ç½‘ç»œé“¾æ¥systemctl restart networkping www.baidu.comåˆ‡æ¢é˜¿é‡Œæºmv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.bak curl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo\né‡å‘½åä¸»æœºåhostnamectl set-hostname hadoop01å®‰è£… epel-release\n\nExtra Packages for Enterprise Linux æ˜¯ä¸ºâ€œçº¢å¸½ç³»â€çš„æ“ä½œç³»ç»Ÿæä¾›é¢å¤–çš„è½¯ä»¶åŒ…ï¼Œé€‚ç”¨äº RHELã€CentOS å’Œ Scientific Linuxã€‚ç›¸å½“äºæ˜¯ä¸€ä¸ªè½¯ä»¶ä»“åº“ï¼Œå¤§å¤šæ•° rpm åŒ…åœ¨å®˜æ–¹ repository ä¸­æ˜¯æ‰¾ä¸åˆ°çš„ï¼‰\n\nyum install -y epel-release\nå…³é—­é˜²ç«å¢™ ï¼Œå…³é—­é˜²ç«å¢™å¼€æœºè‡ªå¯systemctl stop firewalldsystemctl disable firewalld.service\nä½¿ç”¨æ‹·è´åœ¨ hadoop103 ä¸Šæ“ä½œï¼Œå°† hadoop102 ä¸­/opt/module ç›®å½•ä¸‹æ‰€æœ‰ç›®å½•æ‹·è´åˆ°hadoop104 ä¸Šã€‚scp -r leokadia@hadoop102:/opt/module/* leokadia@hadoop104:/opt/module\nåŒæ­¥åŒæ­¥ hadoop102 ä¸­çš„/opt/module/hadoop-3.1.3 åˆ° hadoop103rsync -av hadoop-3.1.3/ leokadia@hadoop103:/opt/module/hadoop-3.1.3//home/MQ/binç›®å½•ä¸‹# hadoopé›†ç¾¤å¯åœmyhadoop.sh startmyhadoop.sh stop# æŸ¥çœ‹ä¸‰å°æœåŠ¡å™¨ Java è¿›ç¨‹è„šæœ¬jpsall\né™„å½•ä»£ç |æ“ä½œ|-|-|hadoop fs â€“ls / |    æ˜¾ç¤ºæ ¹ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œç›®å½•|hadoop fs â€“mkdir /test|    åˆ›å»ºå­ç›®å½•/testï¼Œåˆ›å»ºå¤šçº§ç›®å½• åŠ ä¸Š â€“p|hadoop fs -rm /test1.txt|    åˆ é™¤æ–‡ä»¶|hadoop fs -rm -r /test|    åˆ é™¤å­ç›®å½•ï¼ˆè¦åŠ -rå‚æ•°ï¼‰|hadoop fs -put C:\\tmp\\test.txt \\test|    å°†æœ¬åœ°æ–‡ä»¶ä¸Šä¼ åˆ°HDFSåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ|hadoop fs -cat \\test\\test.txt|    æŸ¥çœ‹æ–‡ä»¶å†…å®¹|hadoop fs -cp URI [URI â€¦] |    cp å¤åˆ¶ç³»ç»Ÿå†…æ–‡ä»¶|hadoop fs -get[-ignorecrc] [-crc] |    ä¸‹è½½æ–‡ä»¶åˆ°æœ¬åœ°|hadoop fs -mv URI [URI â€¦] |    å°†æ–‡ä»¶ä»æºè·¯å¾„ç§»åŠ¨åˆ°ç›®æ ‡è·¯å¾„|hadoop fs -du URI [URI â€¦]|    æ˜¾ç¤ºæ–‡ä»¶å¤§å°|\n","tags":["åˆ†å¸ƒå¼","Hadoop","Windows","Linux"]},{"title":"Python|ç²’å­ç¾¤ç®—æ³•å®ç°","url":"/2019/05/20/pso/","content":"ç²’å­ç¾¤ç®—æ³•ï¼Œä¹Ÿç§°ç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•æˆ–é¸Ÿç¾¤è§…é£Ÿç®—æ³•ï¼ˆParticle Swarm Optimizationï¼‰ï¼Œç¼©å†™ä¸ºPSO\nä»‹ç»ç²’å­ç¾¤ç®—æ³•ï¼ˆPSOï¼‰æ˜¯æ¨¡æ‹Ÿç¾¤ä½“æ™ºèƒ½æ‰€å»ºç«‹èµ·æ¥çš„ä¸€ç§ä¼˜åŒ–ç®—æ³•ï¼Œä¸»è¦ç”¨äºè§£å†³æœ€ä¼˜åŒ–é—®é¢˜ã€‚åŸºæœ¬æ€æƒ³æ˜¯é€šè¿‡ç¾¤ä½“ä¸­ä¸ªä½“ä¹‹é—´çš„åä½œå’Œä¿¡æ¯å…±äº«æ¥å¯»æ‰¾æœ€ä¼˜è§£\nç®—æ³•æ˜¯æ¨¡æ‹Ÿé¸Ÿç¾¤æˆ–èœ‚ç¾¤çš„è§…é£Ÿè¡Œä¸ºã€‚å‡è®¾è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼šä¸€ç¾¤é¸Ÿåœ¨éšæœºçš„æœç´¢é£Ÿç‰©ï¼Œåœ¨ä¸€å—åŒºåŸŸé‡Œåªæœ‰ä¸€å—é£Ÿç‰©ï¼Œæ‰€æœ‰çš„é¸Ÿéƒ½ä¸çŸ¥é“é£Ÿç‰©åœ¨å“ªã€‚ä½†æ˜¯å®ƒä»¬çŸ¥é“è‡ªå·±çš„å½“å‰ä½ç½®è·ç¦»é£Ÿç‰©æœ‰å¤šè¿œã€‚é‚£ä¹ˆè¿™ç¾¤é¸Ÿæ‰¾åˆ°é£Ÿç‰©çš„æœ€ä¼˜ç­–ç•¥å°±æ˜¯æœå¯»ç›®å‰ç¦»é£Ÿç‰©æœ€è¿‘çš„é¸Ÿçš„å‘¨å›´åŒºåŸŸã€‚\nåŸºæœ¬æ¦‚å¿µç²’å­ç¾¤ç®—æ³•å°±æ˜¯å¯¹ä¸Šé¢é—®é¢˜çš„ä¸€ä¸ªæŠ½è±¡ã€‚\n\næ¯ä¸ªé¸ŸæŠ½è±¡ä¸ºä¸€ä¸ªæ— è´¨é‡ï¼Œæ— ä½“ç§¯çš„â€œç²’å­â€\næ¯ä¸ªç²’å­æœ‰ä¸€ä¸ªé€‚åº”åº¦å‡½æ•°ä»¥æ¨¡æ‹Ÿæ¯åªé¸Ÿä¸é£Ÿç‰©çš„è·ç¦»\næ¯ä¸ªç²’å­æœ‰ä¸€ä¸ªé€Ÿåº¦å†³å®šå®ƒçš„é£è¡Œæ–¹å‘å’Œè·ç¦»ï¼Œåˆå§‹å€¼å¯ä»¥éšæœºç¡®å®š\næ¯ä¸€æ¬¡å•ä½æ—¶é—´çš„é£è¡Œåï¼Œæ‰€æœ‰ç²’å­åˆ†äº«ä¿¡æ¯ï¼Œä¸‹ä¸€æ­¥å°†é£å‘è‡ªèº«æœ€ä½³ä½ç½®å’Œå…¨å±€æœ€ä¼˜ä½ç½®çš„åŠ æƒä¸­å¿ƒ\n\nåˆå§‹åŒ–ä¸ºä¸€ç¾¤éšæœºç²’å­ï¼Œé€šè¿‡è¿­ä»£æ‰¾åˆ°æœ€ä¼˜ã€‚æ¯æ¬¡è¿­ä»£ä¸­ï¼Œç²’å­é€šè¿‡è·Ÿè¸ªâ€œä¸ªä½“æå€¼ï¼ˆpbestï¼‰â€å’Œâ€œå…¨å±€æå€¼(gbest)â€æ¥æ›´æ–°è‡ªå·±çš„ä½ç½®ã€‚\nä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾åœ¨Dç»´æœç´¢ç©ºé—´ä¸­ï¼Œæœ‰mä¸ªç²’å­å…¶ä¸­ç¬¬iä¸ªç²’å­çš„ä½ç½®ä¸ºçŸ¢é‡ï¼Œè®°$\\vec{x}i=(x{i1},x{i2},\\ldots,x{iD})$å…¶é£ç¿”é€Ÿåº¦ä¹Ÿæ˜¯ä¸€ä¸ªçŸ¢é‡ï¼Œè®°$\\vec{v}i=(v{i1},v{i2},\\ldots,v{iD})$ç¬¬iä¸ªç²’å­æœç´¢åˆ°çš„æœ€ä¼˜ä½ç½®ä¸º$\\vec{p}i=(p{i1},p{i2},\\ldots,p{iD})$æ•´ä¸ªç²’å­ç¾¤æœç´¢åˆ°çš„æœ€ä¼˜ä½ç½®ä¸º$\\vec{p}{gbest}=(p{gbest1},p{gbest2},\\ldots,p{gbestD})$\nç¬¬iä¸ªç²’å­çš„ä½ç½®å’Œé€Ÿåº¦æ›´æ–°ä¸º$v{id}^{k+1}=wv{id}^{k}+c1rand()(p{id}-x{id}^k)+c_2rand()(p{gbest}-x{id}^k)$$x{id}^{k+1}=x{id}^{k}+v{id}^{k} \\qquad i=1,2,\\ldots,m \\quad d=1,2,\\ldots,D$å…¶ä¸­ï¼Œ$w$ç§°ä¸ºæƒ¯æ€§æƒé‡;$c1$å’Œ$c_2$ä¸ºä¸¤ä¸ªæ­£å¸¸ç³»æ•°ï¼Œç§°ä¸ºåŠ é€Ÿå› å­;$rand()$ä¸º(0,1)ä¹‹é—´çš„éšæœºæ•°;$v{id}^{k}$é™åˆ¶åœ¨ä¸€ä¸ªæœ€å¤§é€Ÿåº¦$v_{max}$å†…ã€‚\nç®€å•è§£é‡Šä¸€ä¸‹ï¼š\n\næƒ¯æ€§æƒé‡$w$   ä½¿ç²’å­ä¿æŒè¿åŠ¨æƒ¯æ€§ï¼Œä½¿å…¶æœ‰æ‰©å±•æœç´¢ç©ºé—´çš„è¶‹åŠ¿ï¼Œæœ‰èƒ½åŠ›æ¢ç´¢æ–°çš„åŒºåŸŸã€‚   è¡¨ç¤ºå¾®ç²’å¯¹å½“å‰è‡ªèº«è¿åŠ¨çŠ¶æ€çš„ä¿¡ä»»ï¼Œä¾æ®è‡ªèº«çš„é€Ÿåº¦è¿›è¡Œæƒ¯æ€§è¿åŠ¨ã€‚   è¾ƒå¤§çš„wæœ‰åˆ©äºè·³å‡ºå±€éƒ¨æå€¼ï¼Œè€Œè¾ƒå°çš„wæœ‰åˆ©äºç®—æ³•æ”¶æ•›ã€‚\nåŠ é€Ÿå¸¸æ•°$c_1$å’Œ$c_2$  å°†c1å’Œc2ç»Ÿä¸€ä¸ºä¸€ä¸ªæ§åˆ¶å‚æ•°ï¼ŒÏ†= c1+c2  å¦‚æœÏ†å¾ˆå°ï¼Œç²’å­ç¾¤è¿åŠ¨è½¨è¿¹å°†éå¸¸ç¼“æ…¢ï¼›  å¦‚æœÏ†å¾ˆå¤§ï¼Œåˆ™å¾®ç²’ä½ç½®å˜åŒ–éå¸¸å¿«ï¼›  å®éªŒè¡¨æ˜ï¼Œå½“Ï†=4.1ï¼ˆé€šå¸¸c1=2.0ï¼Œc2=2.0ï¼‰æ—¶ï¼Œå…·æœ‰å¾ˆå¥½çš„æ”¶æ•›æ•ˆæœã€‚\næœ€å¤§é€Ÿåº¦$v_{max}$  å†³å®šç²’å­åœ¨ä¸€ä¸ªå¾ªç¯ä¸­æœ€å¤§çš„ç§»åŠ¨è·ç¦»ï¼Œé€šå¸¸è®¾å®šä¸ºç²’å­çš„èŒƒå›´å®½åº¦ã€‚\nç²’å­æ•°  ä¸€èˆ¬å–20ï½40ï¼Œå¯¹è¾ƒéš¾æˆ–ç‰¹å®šç±»åˆ«çš„é—®é¢˜å¯ä»¥å–100ï½200ã€‚\n\nç®—æ³•æµç¨‹PSOç®—æ³•æ€æƒ³å¾ˆç®€å•ï¼Œå…ˆåˆå§‹åŒ–ä¸ºä¸€ç¾¤éšæœºç²’å­ï¼Œé€šè¿‡è¿­ä»£æ‰¾åˆ°æœ€ä¼˜ã€‚æ¯æ¬¡è¿­ä»£ä¸­ï¼Œç²’å­é€šè¿‡è·Ÿè¸ªâ€œä¸ªä½“æå€¼ï¼ˆpbestï¼‰â€å’Œâ€œå…¨å±€æå€¼(gbest)â€æ¥æ›´æ–°è‡ªå·±çš„ä½ç½®ï¼Œå½“æœ€å¤§å¾ªç¯æ•°ä»¥åŠæœ€å°é”™è¯¯è¦æ±‚åœæ­¢ã€‚\nç®—æ³•å®ç°ä¾‹å­ï¼š$f(x)=x_1^2+x_2^2 \\qquad x_1,x_2 \\in[-10,10]$ï¼Œæ±‚è§£æœ€å°å€¼\n\nå…ˆå»ºç«‹ä¸€ä¸ªPSOç±»ï¼Œæˆ‘ä»¬æ‰€è¦åšçš„æ­¥éª¤ï¼Œåˆ†åˆ«æ˜¯è®¾ç½®å‚æ•°ï¼Œåˆå§‹åŒ–ç§ç¾¤ï¼Œè®¾ç½®ç›®æ ‡å‡½æ•°ï¼Œè¿›è¡Œè¿­ä»£æ›´æ–°ç²’å­ä½ç½®class PSO():    # ----------------------åˆå§‹åŒ–ç§ç¾¤-------------------------    def __init__(self):        pass    #  ----------------------ç›®æ ‡å‡½æ•°---------------------------    def function(self, x):        pass    # ----------------------æ›´æ–°ç²’å­ä½ç½®------------------------    def iterator(self):        pass\nåˆå§‹åŒ–å‚æ•°def __init__(self, pN, max_steps, dim=2, bound=[-10, 10], v_max=2, w=0.6, c1=2, c2=2):    self.pN = pN    self.dim = dim    self.steps = max_steps    self.w = w    self.c1 = c1    self.c2 = c2    self.x_bound = bound    self.x = np.random.uniform(self.x_bound[0], self.x_bound[1], (self.pN, self.dim))    self.v = np.random.rand(self.pN, self.dim) * v_max    self.pbest = self.x  # ä¸ªä½“çš„æœ€ä½³ä½ç½®    fitness = self.function(self.x)    self.gbest = self.x[np.argmin(fitness)]  # å…¨å±€æœ€ä½³ä½ç½®    self.p_fit = fitness  # æ¯ä¸ªä¸ªä½“æœ€ä½³é€‚åº”å€¼    self.fit = np.max(fitness)  # å…¨å±€æœ€ä½³é€‚åº”å€¼\nè®¾ç½®ç›®æ ‡å‡½æ•°def function(self, x):    return np.sum(np.square(x), axis=1)\næ›´æ–°ç²’å­ä½ç½®def iterator(self):    for step in range(self.steps):        # self.g_fit[step] = self.fit        r1 = np.random.rand(self.pN, self.dim)        r2 = np.random.rand(self.pN, self.dim)        self.v = self.w * self.v + self.c1 * r1 * (self.pbest - self.x) + self.c2 * r2 * (self.gbest - self.x)        self.x = self.v + self.x        fitness = self.function(self.x)        plt.clf()        plt.scatter(self.x[:, 0], self.x[:, 1], c=&#x27;k&#x27;)        plt.scatter(self.gbest[0], self.gbest[1], c=&#x27;r&#x27;)        plt.xlim(self.x_bound[0], self.x_bound[1])        plt.ylim(self.x_bound[0], self.x_bound[1])        plt.pause(0.01)        update = np.greater(self.p_fit, fitness)        self.pbest[update] = self.x[update]        self.p_fit[update] = fitness[update]        if np.min(fitness) &lt; self.fit:            self.gbest = self.x[np.argmin(fitness)]            self.fit = np.min(fitness)\næœ€åè¿›è¡Œä¸€ä¸ªæµ‹è¯•if __name__ == &quot;__main__&quot;:    pso = PSO(100, 100, 2)    pso.iterator()    pso.show()\n\nç²’å­ç¾¤ç®—æ³•æ˜¯å¯¹ç°å®ä¸­è§„å¾‹çš„æ€»ç»“å’Œåº”ç”¨ï¼Œå…·ä½“æ€ä¹ˆä½¿ç”¨è¿˜è¦çœ‹æˆ‘ä»¬é‡åˆ°çš„é—®é¢˜ï¼Œå’Œå¯¹é—®é¢˜çš„ç†è§£\n\n\n\nä»£ç import numpy as npimport matplotlib.pyplot as pltclass PSO():    # ----------------------åˆå§‹åŒ–ç§ç¾¤-------------------------    def __init__(self, pN, max_steps, dim=2, bound=[-10, 10], v_max=1, w=0.6, c1=2, c2=2):        self.pN = pN        self.dim = dim        self.steps = max_steps        self.w = w        self.c1 = c1        self.c2 = c2        self.x_bound = bound        self.x = np.random.uniform(self.x_bound[0], self.x_bound[1], (self.pN, self.dim))        self.v = np.random.rand(self.pN, self.dim) * v_max        self.pbest = self.x  # ä¸ªä½“çš„æœ€ä½³ä½ç½®        fitness = self.function(self.x)        self.gbest = self.x[np.argmin(fitness)]  # å…¨å±€æœ€ä½³ä½ç½®        self.p_fit = fitness  # æ¯ä¸ªä¸ªä½“æœ€ä½³é€‚åº”å€¼        self.fit = np.max(fitness)  # å…¨å±€æœ€ä½³é€‚åº”å€¼        # self.g_fit = np.zeros((self.steps,1))    #  ----------------------ç›®æ ‡å‡½æ•°---------------------------    def function(self, x):        return np.sum(np.square(x), axis=1)    # ----------------------æ›´æ–°ç²’å­ä½ç½®------------------------    def iterator(self):        for step in range(self.steps):            # self.g_fit[step] = self.fit            r1 = np.random.rand(self.pN, self.dim)            r2 = np.random.rand(self.pN, self.dim)            self.v = self.w * self.v + self.c1 * r1 * (self.pbest - self.x) + self.c2 * r2 * (self.gbest - self.x)            self.x = self.v + self.x            fitness = self.function(self.x)            plt.clf()            plt.scatter(self.x[:, 0], self.x[:, 1], c=&#x27;k&#x27;)            plt.scatter(self.gbest[0], self.gbest[1], c=&#x27;r&#x27;)            plt.xlim(self.x_bound[0], self.x_bound[1])            plt.ylim(self.x_bound[0], self.x_bound[1])            plt.pause(0.01)            update = np.greater(self.p_fit, fitness)            self.pbest[update] = self.x[update]            self.p_fit[update] = fitness[update]            if np.min(fitness) &lt; self.fit:                self.gbest = self.x[np.argmin(fitness)]                self.fit = np.min(fitness)    def show(self):        print(&quot;æœ€ä½³ä½ç½®ï¼š&quot;, self.gbest)        print(&quot;æœ€ä¼˜è§£ï¼š&quot;, self.fit)        plt.show()if __name__ == &quot;__main__&quot;:    pso = PSO(100, 100, 2)    pso.iterator()    pso.show()","tags":["Python","PSO"]},{"title":"Docker|Dockerçš„å®‰è£…åŠç®€å•ä½¿ç”¨","url":"/2019/05/20/docker/","content":"æœ¬æ–‡çš„å®‰è£…ç¯å¢ƒä¸ºwin10ä¸“ä¸šç‰ˆ\nå®‰è£…æ³¨æ„ï¼šé€‚ç”¨äºWindowsçš„Dockeréœ€è¦è¿è¡ŒMicrosoft Hyper-Vã€‚\nå…ˆåˆ°æ§åˆ¶é¢æ¿-&gt;ç¨‹åºä¸åŠŸèƒ½-&gt;å¯ç”¨æˆ–å…³é—­WindowsåŠŸèƒ½ä¸­æŸ¥çœ‹è‡ªå·±æ˜¯å¦å¼€å¯Hyper-Vå¯ä»¥ä»å®˜ç½‘ä¸‹è½½ï¼Œä½†æ˜¯åœ¨å›½å†…ä¼šæ¯”è¾ƒæ…¢ã€‚å¯ä»¥ç‚¹å‡»è¿™é‡Œä¸‹è½½ã€‚ä¸‹è½½å®Œæˆåï¼Œä¸€è·¯nextå³å¯ï¼Œæœ€ç»ˆç»“æœåœ¨å‘½ä»¤è¡Œä¸­æµ‹è¯•ä¸€ä¸‹\nä½¿ç”¨è¿è¡Œdocker run hello-worldä»¥æµ‹è¯•ä»Docker Hubä¸­æ‹‰å–é•œåƒå¹¶å¯åŠ¨å®¹å™¨docker run hello-worldåˆ é™¤é•œåƒdocker image docker rmi id\nä¾‹å­ç”¨Dockerfileå®šä¹‰ä¸€ä¸ªé•œåƒï¼Œè¾“å‡ºhello world\né¦–å…ˆæ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶å¤¹é‡Œæ”¾å…¥ä¸‰ä¸ªæ–‡ä»¶app.pyfrom flask import Flaskfrom redis import Redis, RedisErrorimport osimport socketredis = Redis(host=&quot;redis&quot;, db=0, socket_connect_timeout=2, socket_timeout=2)app = Flask(__name__)@app.route(&quot;/&quot;)def hello():    try:        visits = redis.incr(&quot;counter&quot;)    except RedisError:        visits = &quot;&lt;i&gt;cannot connect to Redis, counter disabled&lt;/i&gt;&quot;    html = &quot;&lt;h3&gt;Hello &#123;name&#125;!&lt;/h3&gt;&quot; \\           &quot;&lt;b&gt;Hostname:&lt;/b&gt; &#123;hostname&#125;&lt;br/&gt;&quot; \\           &quot;&lt;b&gt;Visits:&lt;/b&gt; &#123;visits&#125;&quot;    return html.format(name=os.getenv(&quot;NAME&quot;, &quot;world&quot;), hostname=socket.gethostname(), visits=visits)if __name__ == &quot;__main__&quot;:    app.run(host=&#x27;0.0.0.0&#x27;, port=80)DockerfileFROM python:3.6-slimWORKDIR /appADD . /appRUN pip install --trusted-host mirrors.aliyun.com --index http://mirrors.aliyun.com/pypi/simple/ -r requirements.txtEXPOSE 80ENV NAME WorldCMD [&quot;python&quot;, &quot;app.py&quot;]requirements.txtFlaskRedisæ‰“å¼€å‘½ä»¤è¡Œcd æ–‡ä»¶å¤¹docker build -t firstapp .åˆ›å»ºå®Œæˆåï¼Œåœ¨é•œåƒåˆ—è¡¨é‡Œå°±èƒ½çœ‹åˆ°äº†è¿è¡Œåº”ç”¨docker run -p 4040:80 firstapp\nå¤§åŠŸå‘Šæˆï¼ï¼ï¼[&gt;_&lt;]\n","tags":["Docker"]},{"title":"Python|é™ç»´ç®—æ³•PCAå’ŒLDAçš„å®ç°åŠæ€»ç»“","url":"/2019/05/19/%E9%99%8D%E7%BB%B4/","content":"ä»¥Irisæ•°æ®é›†ä¸ºä¾‹ï¼Œåˆ†åˆ«å®ç°PCAå’ŒLDAé™ç»´\nPCAç®—æ³•åŸç†ä¸»æˆåˆ†åˆ†æï¼ˆPrincipal Component Analysisï¼ŒPCAï¼‰æ˜¯ä¸€ç§å¸¸ç”¨çš„çº¿æ€§é™ç»´æ•°æ®åˆ†ææ–¹æ³•ï¼Œå…¶å®è´¨æ˜¯åœ¨èƒ½å°½å¯èƒ½å¥½çš„ä»£è¡¨åŸç‰¹å¾çš„æƒ…å†µä¸‹ï¼Œå°†åŸç‰¹å¾è¿›è¡Œçº¿æ€§å˜æ¢ã€æ˜ å°„è‡³ä½çº¬åº¦ç©ºé—´ä¸­ã€‚\n\nè‡³äºæ›´è¯¦ç»†çš„çš„å¯ä»¥çœ‹ä¸‹é¢çš„PCAåŸç†å°ç»“PCA(ä¸»æˆåˆ†åˆ†æ)è¯¦è§£ä¸»æˆåˆ†åˆ†æï¼ˆPCAï¼‰åŸç†è¯¦è§£PCAé™ç»´æ“ä½œ\n\nç®—æ³•å®ç°é¦–å…ˆå°†æ•°æ®åšä¸­å¿ƒåŒ–å¤„ç†meanVal = np.mean(X, axis=0)W = X - meanValè¿™é‡Œè¯´ä¸€ä¸‹ï¼Œä¸­å¿ƒåŒ–å°±æ˜¯ä½¿å¾—æ ·æœ¬çŸ©é˜µçš„ä¸­å¿ƒå›å½’åˆ°åæ ‡ç³»çš„åŸç‚¹ï¼Œçœ‹ä¸‹å›¾åº”è¯¥æ¯”è¾ƒå¥½ç†è§£ã€‚ä¹Ÿå¯ä»¥ç‚¹è¿™é‡Œæ›´è¯¦ç»†ã€‚\nè®¡ç®—ä¸­å¿ƒåŒ–åæ•°æ®çš„åæ–¹å·®çŸ©é˜µcovMat = np.cov(W, rowvar=0)è®¡ç®—åæ–¹å·®çŸ©é˜µçš„ç‰¹å¾å€¼å’Œç‰¹å¾å‘é‡eigVals, eigVects = np.linalg.eig(np.mat(covMat))æ‰¾å‡ºç‰¹å¾å€¼æœ€å¤§çš„kä¸ªç‰¹å¾æ‰€å¯¹åº”çš„ç‰¹å¾å‘é‡ï¼Œå¹¶ç»„æˆå‘é‡TE = np.argsort(eigVals)k_E = E[:-(k + 1):-1]T = eigVects[:, k_E]Y=W*Tå³ä¸ºé™ç»´åˆ°kç»´åçš„æ•°æ®Y = W * T\nç»“æœPCAç®—æ³•def MyPca(X,k):    meanVal = np.mean(X, axis=0)    W = X - meanVal    covMat = np.cov(W, rowvar=0)    eigVals, eigVects = np.linalg.eig(np.mat(covMat))    E = np.argsort(eigVals)    k_E = E[:-(k + 1):-1]    T = eigVects[:, k_E]    Y = W * T    return Yå¸¦å…¥Irisæ•°æ®é›†data = load_iris()y = data.target #æ ‡ç­¾X = data.dataå¸¦å…¥æ•°æ®ï¼Œè¾“å‡ºç»“æœreduced_X = np.array(MyPca(X, 2))show2(reduced_X)\nLDAç®—æ³•åŸç†çº¿æ€§åˆ¤åˆ«åˆ†æ(linear discriminant analysisï¼ŒLDA)æ˜¯æ˜¯ä¸€ç§ç›‘ç£å­¦ä¹ çš„é™ç»´æŠ€æœ¯ï¼ŒæŠ•å½±åå¸Œæœ›ç±»å†…æ–¹å·®æœ€å°ï¼Œç±»é—´æ–¹å·®æœ€å¤§ï¼Œå³æ¯ä¸€ç§ç±»åˆ«æ•°æ®çš„æŠ•å½±ç‚¹å°½å¯èƒ½çš„æ¥è¿‘ï¼Œè€Œä¸åŒç±»åˆ«çš„æ•°æ®çš„ç±»åˆ«ä¸­å¿ƒä¹‹é—´çš„è·ç¦»å°½å¯èƒ½çš„å¤§ã€‚\n\nè¿™é‡Œæ¨èå‡ ç¯‡æ–‡ç« ï¼Œæœ‰æ›´è¯¦ç»†çš„æ•°å­¦æ¨å¯¼çº¿æ€§åˆ¤åˆ«åˆ†æï¼ˆLinear Discriminant Analysisï¼‰ï¼ˆä¸€ï¼‰çº¿æ€§åˆ¤åˆ«åˆ†æï¼ˆLinear Discriminant Analysisï¼‰ï¼ˆäºŒï¼‰\n\nç®—æ³•å®ç°é¦–å…ˆå°†æ•°æ®æ ¹æ®æ ‡ç­¾åˆ†ç±»yi = set(y)xi = np.array([X[np.where(y == i)] for i in yi])è®¡ç®—æ‰€æœ‰æ ·æœ¬å‡å€¼$\\mu=\\frac{1}{m}\\sum\\limits{i=1}^m$å’Œå„ç±»æ ·æœ¬å‡å€¼$\\mu_i=\\frac{1}{n_i}\\sum\\limits{x\\in xi}x$å…¶ä¸­$m$è¡¨ç¤ºæ€»æ ·æœ¬æ•°ï¼Œ$n_i$è¡¨ç¤ºç¬¬iç±»çš„æ ·æœ¬æ•°ã€‚u = np.array([np.mean(X, axis=0)])ui = np.array([np.mean(xi[i], axis=0) for i in range(xi.shape[0])])è®¡ç®—ç±»å†…æ•£åº¦çŸ©é˜µ$S_w=\\sum\\limits{i=1}^c\\sum\\limits{x\\in x_i}(x-\\mu_i)(x-\\mu_i)^T$åŠç±»é—´æ•£åº¦çŸ©é˜µ$S_b=\\sum\\limits{i=1}^cn_i(\\mu_i-\\mu)(\\mu_i-\\mu)^T$å…¶ä¸­$c$è¡¨ç¤ºç±»åˆ«æ•°ã€‚Sw = sum(np.dot((xi[i] - ui[i]).T, (xi[i] - ui[i])) for i in range(len(yi)))Sb = sum(len(xi[i]) * (ui[i].reshape(1, 4) - u).T * (ui[i].reshape(1, 4) - u) for i in range(len(yi)))è®¡ç®—$S_w^{-1}S_b$(ç”±äº$S_b$çš„ç§©æœ€å¤§ä¸º$c-1$ï¼Œæ‰€ä»¥LDAæœ€å¤§åªèƒ½é™åˆ°$c-1$çš„ç»´åº¦)S=np.linalg.inv(Sw).dot(Sb)r=np.linalg.matrix_rank(S)if(k&gt;r):    print(&quot;k_max=&quot;,r)    k=ræ‰¾å‡ºç‰¹å¾å€¼æœ€å¤§çš„kä¸ªç‰¹å¾æ‰€å¯¹åº”çš„ç‰¹å¾å‘é‡ï¼Œå¹¶ç»„æˆå‘é‡$W$ï¼Œ$Y=W*X$å³ä¸ºé™ç»´åˆ°kç»´åçš„æ•°æ®eigVals, eigVects = np.linalg.eig(S)E = np.argsort(eigVals)k_E = E[:-(k + 1):-1]W = eigVects[:, k_E]Y=np.dot(X, W)\nç»“æœLDAç®—æ³•def MyLDA(X,y,k):    yi = set(y)    xi = np.array([X[np.where(y == i)] for i in yi])    u = np.array([np.mean(X, axis=0)])    ui = np.array([np.mean(xi[i], axis=0) for i in range(xi.shape[0])])    Sw = sum(np.dot((xi[i] - ui[i]).T, (xi[i] - ui[i]))             for i in range(len(yi)))    Sb = sum(len(xi[i]) * (ui[i].reshape(1, 4) - u).T * (ui[i].reshape(1, 4) - u)             for i in range(len(yi)))    S=np.linalg.inv(Sw).dot(Sb)    r=np.linalg.matrix_rank(S)    if(k&gt;r):        print(&quot;k_max=&quot;,r)        k=r    eigVals, eigVects = np.linalg.eig(S)    E = np.argsort(eigVals)    k_E = E[:-(k + 1):-1]    W = eigVects[:, k_E]    Y=np.dot(X, W)    return Yå¸¦å…¥æ•°æ®ï¼Œè¾“å‡ºç»“æœLDA_2D = np.array(MyLDA(X,y,2))show2(LDA_2D)\nè¿™æ ·å°±å°†æ•°æ®é™åˆ°äºŒç»´ï¼Œä½†å¯èƒ½æœ‰äººä¼šç–‘æƒ‘ï¼Œæ€ä¹ˆçŸ¥é“é™ç»´åçš„ä¿¡æ¯é‡å˜åŒ–äº†å¤šå°‘å‘¢ï¼Ÿå¯ä»¥ç”¨è¿™æ ·çš„è®¡ç®—æ–¹æ³•: $\\etak=\\frac{\\sum{j=1}^k\\lambdaj}{\\sum{j=1}^k\\lambda_j}$æ¥è¡¨ç¤ºé™ç»´åå‰©ä½™çš„ä¿¡æ¯é‡\næ€»ç»“æ€»çš„æ¥è¯´ï¼ŒPCAå’ŒLDAçš„å®ç°å¾ˆç®€å•ï¼Œä½†æ˜¯åŸºæœ¬åŸç†å’Œæ¨å¯¼éœ€è¦æ‰å®çš„æ•°å­¦åŸºç¡€ï¼Œå°¤å…¶æ˜¯LDAä¸­ï¼Œå°¤å…¶è¦æ³¨æ„çŸ©é˜µçš„ç§©å¯¹ç»“æœçš„å½±å“ã€‚PCAå’ŒLDAè™½ç„¶éƒ½ç”¨åˆ°æ•°æ®é™ç»´çš„æ€æƒ³ï¼Œä½†æ˜¯ä¸¤è€…æœ‰ç€å¾ˆå¤§çš„ä¸åŒï¼Œé¦–å…ˆç›‘ç£æ–¹å¼ä¸ä¸€æ ·ï¼ŒLDAæ˜¯æœ‰ç›‘ç£çš„é™ç»´æ–¹æ³•ï¼Œè€ŒPCAæ˜¯æ— ç›‘ç£çš„é™ç»´æ–¹æ³•ï¼›å†è€…ç›®çš„ä¹Ÿä¸ä¸€æ ·ï¼ŒPCAæ˜¯ä¸ºäº†å»é™¤åŸå§‹æ•°æ®é›†ä¸­å†—ä½™çš„ç»´åº¦ï¼Œè®©æŠ•å½±å­ç©ºé—´çš„å„ä¸ªç»´åº¦çš„æ–¹å·®å°½å¯èƒ½å¤§ã€‚è€ŒLDAæ˜¯é€šè¿‡æ•°æ®é™ç»´ä½¿å¾—åŸå§‹æ•°æ®ä¸­ä¸åŒçš„ç±»åˆ«å°½å¯èƒ½åŒºåˆ†å¼€æ¥ã€‚\nä»£ç import matplotlib.pyplot as pltfrom mpl_toolkits.mplot3d import Axes3Dimport numpy as npfrom sklearn.datasets import load_irisdef MyPCA(X,k):    meanVal = np.mean(X, axis=0)    W = X - meanVal    covMat = np.cov(W, rowvar=0)    eigVals, eigVects = np.linalg.eig(np.mat(covMat))    E = np.argsort(eigVals)    k_E = E[:-(k + 1):-1]    T = eigVects[:, k_E]    n = sum(eigVals[k_E])/sum(eigVals)    print(&quot;é™åˆ°&quot;,k,&quot;ç»´åä¿ç•™çš„ä¿¡æ¯é‡æ˜¯åŸæ¥çš„&quot;,n * 100.0, &quot;%&quot;)    Y = W * T    return Ydef MyLDA(X,y,k):    yi = set(y)    xi = np.array([X[np.where(y == i)] for i in yi])    u = np.array([np.mean(X, axis=0)])    ui = np.array([np.mean(xi[i], axis=0) for i in range(xi.shape[0])])    Sw = sum(np.dot((xi[i] - ui[i]).T, (xi[i] - ui[i]))             for i in range(len(yi)))    Sb = sum(len(xi[i]) * (ui[i].reshape(1, 4) - u).T * (ui[i].reshape(1, 4) - u)             for i in range(len(yi)))    S=np.linalg.inv(Sw).dot(Sb)    r=np.linalg.matrix_rank(S)    if(k&gt;r):        print(&quot;k_max=&quot;,r)        k=r    eigVals, eigVects = np.linalg.eig(S)    E = np.argsort(eigVals)    k_E = E[:-(k + 1):-1]    W = eigVects[:, k_E]    n = sum(eigVals[k_E]) / sum(eigVals)    print(&quot;é™åˆ°&quot;, k, &quot;ç»´åä¿ç•™çš„ä¿¡æ¯é‡æ˜¯åŸæ¥çš„&quot;, n * 100.0, &quot;%&quot;)    Y=np.dot(X, W)    return Ydef show2(reduced_X):    red_x, red_y = [], []    blue_x, blue_y = [], []    green_x, green_y = [], []    for i in range(len(reduced_X)):        if y[i] == 0:            red_x.append(reduced_X[i][0])            red_y.append(reduced_X[i][1])        elif y[i] == 1:            blue_x.append(reduced_X[i][0])            blue_y.append(reduced_X[i][1])        else:            green_x.append(reduced_X[i][0])            green_y.append(reduced_X[i][1])    plt.scatter(red_x, red_y, c=&#x27;r&#x27;, marker=&#x27;x&#x27;)    plt.scatter(blue_x, blue_y, c=&#x27;b&#x27;, marker=&#x27;*&#x27;)    plt.scatter(green_x, green_y, c=&#x27;g&#x27;, marker=&#x27;.&#x27;)    # plt.show()def show3(X):    red_x, red_y, red_z = [], [], []    blue_x, blue_y, blue_z = [], [], []    green_x, green_y, green_z = [], [], []    for i in range(len(X)):        if y[i] == 0:            red_x.append(X[i][0])            red_y.append(X[i][1])            red_z.append(X[i][2])        elif y[i] == 1:            blue_x.append(X[i][0])            blue_y.append(X[i][1])            blue_z.append(X[i][2])        else:            green_x.append(X[i][0])            green_y.append(X[i][1])            green_z.append(X[i][2])    fig = plt.figure()    ax = fig.gca(projection=&#x27;3d&#x27;)    ax.scatter(red_x, red_y, red_z, c=&#x27;r&#x27;, marker=&#x27;x&#x27;)    ax.scatter(blue_x, blue_y, blue_z, c=&#x27;b&#x27;, marker=&#x27;*&#x27;)    ax.scatter(green_x, green_y, green_z, c=&#x27;g&#x27;, marker=&#x27;.&#x27;)    # plt.show()if __name__ == &quot;__main__&quot;:    data = load_iris()    y = data.target    X = data.data    #PCA    #é™åˆ°2ç»´    PCA_2D = np.array(MyPCA(X, 2))    show2(PCA_2D)    # é™åˆ°3ç»´    PCA_3D = np.array(MyPCA(X, 3))    show3(PCA_3D)    plt.show()    #LDA    # é™åˆ°2ç»´    LDA_2D = np.array(MyLDA(X,y,2))    show2(LDA_2D)    plt.show()\nå¦‚æœ‰é”™è¯¯ï¼Œæ¬¢è¿æŒ‡æ­£ï¼›å¦‚æœæœ‰æ›´å¥½çš„ï¼Œæ¬¢è¿åˆ†äº«ã€‚\n","tags":["Python","PCA","LDA"]},{"title":"JAVA|ç®€å•çš„Web Service","url":"/2019/05/16/%E5%88%86%E5%B8%83%E5%BC%8F4/","content":"ç¼–å†™Web Serviceå®¢æˆ·ç«¯ç¨‹åºã€‚\nä»€ä¹ˆæ˜¯Web Serviceï¼Ÿ\nä¸ºæ–¹ä¾¿ç½‘ç»œä¸Šä¸åŒèŠ‚ç‚¹ä¹‹é—´äº’æ“ä½œè€Œå®šä¹‰çš„ä¸€å¥—åè®®æ ‡å‡†ï¼Œ ä¹Ÿå¯è§†ä¸ºå®ç°è¿œç¨‹è¿‡ç¨‹è°ƒç”¨çš„ä¸€å¥—åè®®æ ‡å‡†ã€‚(W3C)\næ–¹ä¾¿äº†Business to Businessçš„ä¸šåŠ¡é›†æˆã€‚å¯ä»¥å°†å¤šä¸ªç¬¬ä¸‰æ–¹æœåŠ¡ç»„åˆæˆä¸€ç§æ–°çš„æœåŠ¡ã€‚\nWebç³»ç»ŸåŠŸèƒ½è¢«æ‰©å±•ï¼šä¸åªæ˜¯ç”¨äºå…±äº«æ–‡æ¡£ï¼Œä¸åªæ˜¯ä¸ºâ€œçœ‹â€ï¼›Webç³»ç»Ÿä¹Ÿè¢«ç”¨äºèŠ‚ç‚¹ä¹‹é—´çš„äº’æ“ä½œã€‚\nå®¢æˆ·ç«¯-æœåŠ¡å™¨æ¨¡å¼\nè·¨å¹³å°ã€è·¨è¯­è¨€ã€é¢å‘æ¥å£ç¼–ç¨‹\nå®ç°é¢å‘æœåŠ¡æ„æ¶(SOAï¼šService-oriented Architecture)çš„é‡è¦æŠ€æœ¯ä¹‹ä¸€\n\nä¸»è¦åŒ…å«çš„æ ‡å‡†åè®®\næ¶ˆæ¯ç¼–ç æ ‡å‡†(XML)\nä¼ è¾“åè®®æ ‡å‡†(HTTPã€SMTPã€TCPã€UDP)\nè¿œç¨‹å¯¹è±¡è®¿é—®åè®®ï¼ˆå³è¿œç¨‹æ–¹æ³•è°ƒç”¨åè®®ï¼‰ï¼šSOAP(Simple Object Access Protocol):\nWebæœåŠ¡æè¿°è¯­è¨€ï¼šWSDL(Web Services Description Language)  ï¼ˆä¸»è¦æè¿°æœåŠ¡æ¥å£å®šä¹‰ï¼‰\næœåŠ¡ç›®å½•ã€æœåŠ¡æ³¨å†Œã€æœåŠ¡å‘ç°ï¼šUDDI(Universal Discovery Description and Integration)\nå®‰å…¨ç›¸å…³æ ‡å‡†ï¼šç­¾åã€åŠ å¯†ã€è®¤è¯ç­‰\næœåŠ¡ç»„åˆã€æœåŠ¡ç¼–æ’\n\nSOAP\nWSDLä¸UDDI\nå®ç°ä¸è°ƒç”¨Web Serviceçš„æµç¨‹æœåŠ¡ç«¯çš„å®ç°\nç”¨å¸¸ç”¨é«˜çº§ç¼–ç¨‹è¯­è¨€ï¼ˆä¾‹å¦‚Javaï¼‰å®šä¹‰WebæœåŠ¡æ¥å£\næ ¹æ®Javaå®šä¹‰çš„WebæœåŠ¡æ¥å£ç”ŸæˆWSDLï¼ˆä¸­é—´ä»¶è‡ªåŠ¨åšï¼‰\nå®šä¹‰å®ç°æ¥å£çš„WebæœåŠ¡å®ç°ç±»\nå°†WebæœåŠ¡å®ç°ç±»ç»‘å®šåˆ°WebæœåŠ¡å™¨\nå°†WebæœåŠ¡æ³¨å†Œçš„UDDIä¸­å¿ƒ\n\nå®¢æˆ·ç«¯çš„å®ç°\nä»UDDIä¸­å¿ƒæŸ¥æ‰¾çš„ç›®æ ‡WebæœåŠ¡çš„æ¥å£å®šä¹‰ï¼ˆWSDLï¼‰\næ ¹æ®WSDLç”ŸæˆWebæœåŠ¡ä»£ç†ç±»(WSDL to Java)\nåˆ©ç”¨WebæœåŠ¡ä»£ç†ç±»è°ƒç”¨WebæœåŠ¡æ¥å£ä¸­å®šä¹‰çš„å…·ä½“æ–¹æ³•\n\nä¾‹å­é¢˜ç›®ï¼šåˆ°å…è´¹å…¬å¼€Web Serviceç›®å½•ç½‘ç«™ï¼ˆå¦‚http://www.webxml.com.cnï¼‰ä¸Šæ‰¾åˆ°ä¸€ç§è‡ªå·±æ„Ÿå…´è¶£çš„Web Serviceï¼Œå¦‚ï¼šå¤©æ°”é¢„æŠ¥æœåŠ¡ã€é£æœºèˆªç­æ—¶åˆ»è¡¨æŸ¥è¯¢æœåŠ¡ã€ç«è½¦æ—¶åˆ»è¡¨æŸ¥è¯¢æœåŠ¡ã€é‚®æ”¿ç¼–ç æŸ¥è¯¢æœåŠ¡ã€ä¸­å›½è‚¡ç¥¨è¡Œæƒ…æŸ¥è¯¢ã€åŠæ—¶å¤–æ±‡æŸ¥è¯¢ç­‰ï¼Œç¼–å†™ä¸€ä¸ªè¯¥æœåŠ¡çš„è°ƒç”¨å®¢æˆ·ç«¯ç¨‹åºã€‚\n\nå®ç°è¿‡ç¨‹1.é¦–å…ˆåœ¨Web Servicesçš„ç½‘ç«™ä¸­æ‰¾åˆ°ç›®æ ‡WebæœåŠ¡çš„æ¥å£å®šä¹‰ã€‚ï¼ˆæˆ‘é€‰çš„æ˜¯IPåœ°å€ï¼Œä¸»è¦è¦çš„æ˜¯WSDLé‚£ä¸€è¡Œï¼‰æ‹·è´ç½‘å€http://ws.webxml.com.cn/WebServices/IpAddressSearchWebService.asmx?wsdl2.æ‰“å¼€å‘½ä»¤è¡Œè¾“å…¥å‘½ä»¤ï¼Œæ ¹æ®WSDLç”ŸæˆWebæœåŠ¡ä»£ç†ç±»cd ä½ çš„æ–‡ä»¶å¤¹wsimport -keep -p wsproxy ä½ æ‹·è´çš„ç½‘å€ï¼ˆæ¯”å¦‚ï¼šhttp://ws.webxml.com.cn/WebServices/IpAddressSearchWebService.asmx?wsdlï¼‰åœ¨ä½ çš„æ–‡ä»¶å¤¹ä¸­ä¼šå‡ºç°ä¸€ä¸ªwsproxyæ–‡ä»¶å¤¹3.åˆ©ç”¨WebæœåŠ¡ä»£ç†ç±»è°ƒç”¨WebæœåŠ¡æ¥å£ä¸­å®šä¹‰çš„å…·ä½“æ–¹æ³•ï¼Œç¼–å†™å®¢æˆ·ç«¯ã€‚è¿™æ­¥æ¯”è¾ƒéº»çƒ¦ï¼Œæœ‰æ¥å£è¯´æ˜çš„ç®€å•ç‚¹ï¼Œæ²¡æœ‰çš„å°±è¦æ ¹æ®ä¸Šä¸€æ­¥ç”Ÿæˆçš„æ–‡ä»¶çŒœæµ‹äº†ã€‚ä¸‹é¢æ˜¯æˆ‘çš„ï¼Œå¯ä»¥æ¯”è¾ƒç€å†™ã€‚4.æœ€åï¼Œç¼–è¯‘å¹¶è¿è¡Œå®¢æˆ·ç«¯javac .\\wsclient\\*.javajava wsclient.CodeInfoClient(è¿™é‡Œæ˜¯æˆ‘çš„å®¢æˆ·ç«¯çš„ä½ç½®å’Œåç§°)\nPS: ç¬¬ä¸€æ­¥çš„ç½‘ç«™æ˜¯å…è´¹çš„ï¼Œä½†é‡Œé¢çš„ç½‘å€ä¸æ˜¯éƒ½å¯ä»¥ç”¨çš„ï¼Œå¦‚æœç¬¬äºŒæ­¥å‡ºé”™ï¼Œæ¢ä¸ªç½‘å€è¯•è¯•\nå†ä¸¾ä¸ªä¾‹å­QQåœ¨çº¿æŸ¥è¯¢wsimport -keep -p wsproxy http://ws.webxml.com.cn/webservices/qqOnlineWebService.asmx?wsdlCodeInfoClient.javapackage wsclient;import wsproxy.*; public class CodeInfoClient &#123;     public static void main(String[] args) &#123;        QqOnlineWebService service = new QqOnlineWebService();        QqOnlineWebServiceSoap pService = service.getQqOnlineWebServiceSoap();                 System.out.println(pService.qqCheckOnline(&quot;QQå·&quot;));            &#125; &#125;\n","tags":["Java","åˆ†å¸ƒå¼","Web"]}]